var _SETTINGS={MarketJSGameCenter:{Activator:{Enabled:!1,Position:{Top:"15%",Left:"0"}},API:{Enabled:!1,Log:{Events:{InitializeGame:!1,EndGame:!1,Level:{Begin:!1,End:!1,Win:!1,Lose:!1,Draw:!1}}}}},API:{Enabled:!1,Log:{Events:{InitializeGame:!1,EndGame:!1,Level:{Begin:!1,End:!1,Win:!1,Lose:!1,Draw:!1}}}},Ad:{Mobile:{Preroll:{Enabled:!1,Duration:5,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGamePreroll:40,MobileAdInGamePreroll2:40,MobileAdInGamePreroll3:20}}},Header:{Enabled:!1,Duration:5,
Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameHeader:40,MobileAdInGameHeader2:40,MobileAdInGameHeader3:20}}},Footer:{Enabled:!1,Duration:5,Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameFooter:40,MobileAdInGameFooter2:40,MobileAdInGameFooter3:20}}},End:{Enabled:!1,Duration:1,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGameEnd:40,MobileAdInGameEnd2:40,MobileAdInGameEnd3:20}}}}},Language:{Default:"en"},DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!1,
Link:"http://google.com",LinkEnabled:!1,NewWindow:!1,Width:166,Height:61}},Branding:{Splash:{Enabled:!1},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,NewWindow:!1,Width:166,Height:61}},MoreGames:{Enabled:!1,Link:"http://www.marketjs.com/game/links/mobile",NewWindow:!0},Gamecenter:{Enabled:!1}};var _STRINGS={Ad:{Mobile:{Preroll:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},Header:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},End:{ReadyIn:"Advertisement ends in ",Loading:"Please wait ...",Close:"Close"}}},Splash:{Loading:"Loading ...",LogoLine1:"Some text here",LogoLine2:"powered by MarketJS",LogoLine3:"none"},Game:{SelectPlayer:"Select Player",Win:"You win!",Lose:"You lose!",Score:"Score",Time:"Time"},Results:{Title:"High score"}};var MobileAdInGamePreroll={ad_duration:_SETTINGS.Ad.Mobile.Preroll.Duration,ad_width:_SETTINGS.Ad.Mobile.Preroll.Width,ad_height:_SETTINGS.Ad.Mobile.Preroll.Height,ready_in:_STRINGS.Ad.Mobile.Preroll.ReadyIn,loading:_STRINGS.Ad.Mobile.Preroll.Loading,close:_STRINGS.Ad.Mobile.Preroll.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.Preroll.Rotation.Enabled){var b=_SETTINGS.Ad.Mobile.Preroll.Rotation.Weight,c=b.MobileAdInGamePreroll,d=
c+b.MobileAdInGamePreroll2,b=d+b.MobileAdInGamePreroll3,e=Math.floor(100*Math.random());console.log("seed: ",e);e<=c?this.selectedOverlayName="MobileAdInGamePreroll":e<=d?this.selectedOverlayName="MobileAdInGamePreroll2":e<=b&&(this.selectedOverlayName="MobileAdInGamePreroll3");console.log("Ad rotating preroll enabled")}else this.selectedOverlayName="MobileAdInGamePreroll",console.log("Ad rotating preroll disabled");console.log("selected:",this.selectedOverlayName);this.overlay=$("#"+this.selectedOverlayName);
this.box=$("#"+this.selectedOverlayName+"-Box");this.game=$("#game");this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-
this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},Timer:function(b){var c=b,d=setInterval(function(){MobileAdInGamePreroll.boxContents.header.text(MobileAdInGamePreroll.ready_in+c+"...");MobileAdInGamePreroll.boxContents.footer.text(MobileAdInGamePreroll.loading);c--;0>c&&(clearInterval(d),MobileAdInGamePreroll.boxContents.close.css("left",MobileAdInGamePreroll.boxContents.body.width()-23),MobileAdInGamePreroll.boxContents.close.show(),MobileAdInGamePreroll.boxContents.header.html(MobileAdInGamePreroll.close),
MobileAdInGamePreroll.boxContents.footer.text(""))},1E3)},Close:function(){this.boxContents.close.hide();this.overlay.hide()}};var MobileAdInGameHeader={ad_duration:_SETTINGS.Ad.Mobile.Header.Duration,ad_width:_SETTINGS.Ad.Mobile.Header.Width,ad_height:_SETTINGS.Ad.Mobile.Header.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Header.Rotation.Enabled){var b=_SETTINGS.Ad.Mobile.Header.Rotation.Weight,c=b.MobileAdInGameHeader,d=c+b.MobileAdInGameHeader2,b=d+b.MobileAdInGameHeader3,e=Math.floor(100*Math.random());console.log("seed: ",e);e<=c?this.selectedOverlayName="MobileAdInGameHeader":e<=d?this.selectedOverlayName="MobileAdInGameHeader2":
e<=b&&(this.selectedOverlayName="MobileAdInGameHeader3");console.log("Ad rotating header enabled")}else this.selectedOverlayName="MobileAdInGameHeader",console.log("Ad rotating header disabled");this.div=$("#"+this.selectedOverlayName);this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",0);this.div.show(this.Timer(this.ad_duration))},Timer:function(b){var c=setInterval(function(){b--;
0>b&&(MobileAdInGameHeader.div.hide(),clearInterval(c))},1E3)}};var MobileAdInGameFooter={ad_duration:_SETTINGS.Ad.Mobile.Footer.Duration,ad_width:_SETTINGS.Ad.Mobile.Footer.Width,ad_height:_SETTINGS.Ad.Mobile.Footer.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Footer.Rotation.Enabled){var b=_SETTINGS.Ad.Mobile.Footer.Rotation.Weight,c=b.MobileAdInGameFooter,d=c+b.MobileAdInGameFooter2,b=d+b.MobileAdInGameFooter3,e=Math.floor(100*Math.random());console.log("seed: ",e);e<=c?this.selectedOverlayName="MobileAdInGameFooter":e<=d?this.selectedOverlayName="MobileAdInGameFooter2":
e<=b&&(this.selectedOverlayName="MobileAdInGameFooter3");console.log("Ad rotating footer enabled")}else this.selectedOverlayName="MobileAdInGameFooter",console.log("Ad rotating footer disabled");this.div=$("#"+this.selectedOverlayName);this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",this.game.height()-this.div.height()-5);this.div.show(this.Timer(this.ad_duration))},
Timer:function(b){var c=setInterval(function(){b--;0>b&&(MobileAdInGameFooter.div.hide(),clearInterval(c))},1E3)}};var MobileAdInGameEnd={ad_duration:_SETTINGS.Ad.Mobile.End.Duration,ad_width:_SETTINGS.Ad.Mobile.End.Width,ad_height:_SETTINGS.Ad.Mobile.End.Height,ready_in:_STRINGS.Ad.Mobile.End.ReadyIn,loading:_STRINGS.Ad.Mobile.End.Loading,close:_STRINGS.Ad.Mobile.End.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.End.Rotation.Enabled){var b=_SETTINGS.Ad.Mobile.End.Rotation.Weight,c=b.MobileAdInGameEnd,d=c+b.MobileAdInGameEnd2,b=d+b.MobileAdInGameEnd3,
e=Math.floor(100*Math.random());console.log("seed: ",e);e<=c?this.selectedOverlayName="MobileAdInGameEnd":e<=d?this.selectedOverlayName="MobileAdInGameEnd2":e<=b&&(this.selectedOverlayName="MobileAdInGameEnd3");console.log("Ad rotating end enabled")}else this.selectedOverlayName="MobileAdInGameEnd",console.log("Ad rotating end disabled");console.log("selected:",this.selectedOverlayName);this.overlay=$("#"+this.selectedOverlayName);this.box=$("#"+this.selectedOverlayName+"-Box");this.game=$("#game");
this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},
Timer:function(b){var c=b,d=setInterval(function(){MobileAdInGameEnd.boxContents.header.text(MobileAdInGameEnd.ready_in+c+"...");MobileAdInGameEnd.boxContents.footer.text(MobileAdInGameEnd.loading);c--;0>c&&(clearInterval(d),MobileAdInGameEnd.boxContents.close.css("left",MobileAdInGameEnd.boxContents.body.width()-23),MobileAdInGameEnd.boxContents.close.show(),MobileAdInGameEnd.boxContents.header.html(MobileAdInGameEnd.close),MobileAdInGameEnd.boxContents.footer.text(""))},1E3)},Close:function(){this.boxContents.close.hide();
this.overlay.hide()}};(function(b,c){function d(b,j,x){if(x===c&&1===b.nodeType)if(x="data-"+j.replace(sc,"-$1").toLowerCase(),x=b.getAttribute(x),"string"==typeof x){try{x="true"===x?!0:"false"===x?!1:"null"===x?null:+x+""===x?+x:tc.test(x)?f.parseJSON(x):x}catch(z){}f.data(b,j,x)}else x=c;return x}function e(b){for(var j in b)if(!("data"===j&&f.isEmptyObject(b[j]))&&"toJSON"!==j)return!1;return!0}function g(){return!1}function l(){return!0}function p(b){return!b||!b.parentNode||11===b.parentNode.nodeType}function y(b,
j){do b=b[j];while(b&&1!==b.nodeType);return b}function q(b,j,c){j=j||0;if(f.isFunction(j))return f.grep(b,function(b,u){return!!j.call(b,u,b)===c});if(j.nodeType)return f.grep(b,function(b){return b===j===c});if("string"==typeof j){var z=f.grep(b,function(b){return 1===b.nodeType});if(vc.test(j))return f.filter(j,z,!c);j=f.filter(j,z)}return f.grep(b,function(b){return 0<=f.inArray(b,j)===c})}function s(b){var j=wb.split("|");b=b.createDocumentFragment();if(b.createElement)for(;j.length;)b.createElement(j.pop());
return b}function t(b,j){if(1===j.nodeType&&f.hasData(b)){var c,z,d;z=f._data(b);var e=f._data(j,z),v=z.events;if(v)for(c in delete e.handle,e.events={},v){z=0;for(d=v[c].length;z<d;z++)f.event.add(j,c,v[c][z])}e.data&&(e.data=f.extend({},e.data))}}function m(b,j){var c;1===j.nodeType&&(j.clearAttributes&&j.clearAttributes(),j.mergeAttributes&&j.mergeAttributes(b),c=j.nodeName.toLowerCase(),"object"===c?(j.parentNode&&(j.outerHTML=b.outerHTML),f.support.html5Clone&&b.innerHTML&&!f.trim(j.innerHTML)&&
(j.innerHTML=b.innerHTML)):"input"===c&&xb.test(b.type)?(j.defaultChecked=j.checked=b.checked,j.value!==b.value&&(j.value=b.value)):"option"===c?j.selected=b.defaultSelected:"input"===c||"textarea"===c?j.defaultValue=b.defaultValue:"script"===c&&j.text!==b.text&&(j.text=b.text),j.removeAttribute(f.expando))}function n(b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll("*"):[]}function r(b){xb.test(b.type)&&(b.defaultChecked=
b.checked)}function B(b,j){if(j in b)return j;for(var c=j.charAt(0).toUpperCase()+j.slice(1),f=j,d=yb.length;d--;)if(j=yb[d]+c,j in b)return j;return f}function M(b,j){return b=j||b,"none"===f.css(b,"display")||!f.contains(b.ownerDocument,b)}function D(b,j){for(var c,z,d=[],e=0,v=b.length;e<v;e++)c=b[e],c.style&&(d[e]=f._data(c,"olddisplay"),j?(!d[e]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&M(c)&&(d[e]=f._data(c,"olddisplay",O(c.nodeName)))):(z=P(c,"display"),!d[e]&&"none"!==
z&&f._data(c,"olddisplay",z)));for(e=0;e<v;e++)if(c=b[e],c.style&&(!j||"none"===c.style.display||""===c.style.display))c.style.display=j?d[e]||"":"none";return b}function H(b,j,c){return(b=wc.exec(j))?Math.max(0,b[1]-(c||0))+(b[2]||"px"):j}function Xa(b,j,c,z){j=c===(z?"border":"content")?4:"width"===j?1:0;for(var d=0;4>j;j+=2)"margin"===c&&(d+=f.css(b,c+da[j],!0)),z?("content"===c&&(d-=parseFloat(P(b,"padding"+da[j]))||0),"margin"!==c&&(d-=parseFloat(P(b,"border"+da[j]+"Width"))||0)):(d+=parseFloat(P(b,
"padding"+da[j]))||0,"padding"!==c&&(d+=parseFloat(P(b,"border"+da[j]+"Width"))||0));return d}function E(b,j,c){var z="width"===j?b.offsetWidth:b.offsetHeight,d=!0,e=f.support.boxSizing&&"border-box"===f.css(b,"boxSizing");if(0>=z||null==z){z=P(b,j);if(0>z||null==z)z=b.style[j];if(xa.test(z))return z;d=e&&(f.support.boxSizingReliable||z===b.style[j]);z=parseFloat(z)||0}return z+Xa(b,j,c||(e?"border":"content"),d)+"px"}function O(b){if(Ya[b])return Ya[b];var j=f("<"+b+">").appendTo(A.body),c=j.css("display");
j.remove();if("none"===c||""===c){ka=A.body.appendChild(ka||f.extend(A.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!la||!ka.createElement)la=(ka.contentWindow||ka.contentDocument).document,la.write("<!doctype html><html><body>"),la.close();j=la.body.appendChild(la.createElement(b));c=P(j,"display");A.body.removeChild(ka)}return Ya[b]=c,c}function L(b,j,c,z){var d;if(f.isArray(j))f.each(j,function(j,f){c||xc.test(b)?z(b,f):L(b+"["+("object"==typeof f?j:"")+"]",f,c,z)});else if(!c&&
"object"===f.type(j))for(d in j)L(b+"["+d+"]",j[d],c,z);else z(b,j)}function ya(b){return function(j,c){"string"!=typeof j&&(c=j,j="*");var z,d,e=j.toLowerCase().split(ea),v=0,m=e.length;if(f.isFunction(c))for(;v<m;v++)z=e[v],(d=/^\+/.test(z))&&(z=z.substr(1)||"*"),z=b[z]=b[z]||[],z[d?"unshift":"push"](c)}}function ma(b,j,x,f,d,e){d=d||j.dataTypes[0];e=e||{};e[d]=!0;var v;d=b[d];for(var m=0,g=d?d.length:0,n=b===Za;m<g&&(n||!v);m++)v=d[m](j,x,f),"string"==typeof v&&(!n||e[v]?v=c:(j.dataTypes.unshift(v),
v=ma(b,j,x,f,v,e)));return(n||!v)&&!e["*"]&&(v=ma(b,j,x,f,"*",e)),v}function ra(b,j){var x,z,d=f.ajaxSettings.flatOptions||{};for(x in j)j[x]!==c&&((d[x]?b:z||(z={}))[x]=j[x]);z&&f.extend(!0,b,z)}function zb(){try{return new b.XMLHttpRequest}catch(u){}}function Ab(){return setTimeout(function(){za=c},0),za=f.now()}function Bb(b,j,c){var z,d=0,e=Aa.length,v=f.Deferred().always(function(){delete m.elem}),m=function(){for(var j=za||Ab(),j=Math.max(0,g.startTime+g.duration-j),c=1-(j/g.duration||0),x=
0,f=g.tweens.length;x<f;x++)g.tweens[x].run(c);return v.notifyWith(b,[g,c,j]),1>c&&f?j:(v.resolveWith(b,[g]),!1)},g=v.promise({elem:b,props:f.extend({},j),opts:f.extend(!0,{specialEasing:{}},c),originalProperties:j,originalOptions:c,startTime:za||Ab(),duration:c.duration,tweens:[],createTween:function(j,c){var x=f.Tween(b,g.opts,j,c,g.opts.specialEasing[j]||g.opts.easing);return g.tweens.push(x),x},stop:function(j){for(var c=0,x=j?g.tweens.length:0;c<x;c++)g.tweens[c].run(1);return j?v.resolveWith(b,
[g,j]):v.rejectWith(b,[g,j]),this}});j=g.props;c=g.opts.specialEasing;var n,l,r,q;for(z in j)if(n=f.camelCase(z),l=c[n],r=j[z],f.isArray(r)&&(l=r[1],r=j[z]=r[0]),z!==n&&(j[n]=r,delete j[z]),(q=f.cssHooks[n])&&"expand"in q)for(z in r=q.expand(r),delete j[n],r)z in j||(j[z]=r[z],c[z]=l);else c[n]=l;for(;d<e;d++)if(z=Aa[d].call(g,b,j,g.opts))return z;var s=g;f.each(j,function(b,u){for(var j=(sa[b]||[]).concat(sa["*"]),c=0,x=j.length;c<x&&!j[c].call(s,b,u);c++);});return f.isFunction(g.opts.start)&&g.opts.start.call(b,
g),f.fx.timer(f.extend(m,{anim:g,queue:g.opts.queue,elem:b})),g.progress(g.opts.progress).done(g.opts.done,g.opts.complete).fail(g.opts.fail).always(g.opts.always)}function R(b,j,c,f,d){return new R.prototype.init(b,j,c,f,d)}function Ca(b,j){var c,f={height:b},d=0;for(j=j?1:0;4>d;d+=2-j)c=da[d],f["margin"+c]=f["padding"+c]=b;return j&&(f.opacity=f.width=b),f}function Cb(b){return f.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1}var Db,Da,A=b.document,zc=b.location,Ac=b.navigator,Bc=
b.jQuery,Cc=b.$,Eb=Array.prototype.push,Z=Array.prototype.slice,Fb=Array.prototype.indexOf,Dc=Object.prototype.toString,$a=Object.prototype.hasOwnProperty,ab=String.prototype.trim,f=function(b,j){return new f.fn.init(b,j,Db)},Ea=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Ec=/\S/,ea=/\s+/,Fc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Gc=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Gb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Hc=/^[\],:{}\s]*$/,Ic=/(?:^|:|,)(?:\s*\[)+/g,Jc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Kc=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
Lc=/^-ms-/,Mc=/-([\da-z])/gi,Nc=function(b,j){return(j+"").toUpperCase()},Fa=function(){A.addEventListener?(A.removeEventListener("DOMContentLoaded",Fa,!1),f.ready()):"complete"===A.readyState&&(A.detachEvent("onreadystatechange",Fa),f.ready())},Hb={};f.fn=f.prototype={constructor:f,init:function(b,j,x){var d,e;if(!b)return this;if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if("string"==typeof b){"<"===b.charAt(0)&&">"===b.charAt(b.length-1)&&3<=b.length?d=[null,b,null]:d=Gc.exec(b);
if(d&&(d[1]||!j)){if(d[1])return j=j instanceof f?j[0]:j,e=j&&j.nodeType?j.ownerDocument||j:A,b=f.parseHTML(d[1],e,!0),Gb.test(d[1])&&f.isPlainObject(j)&&this.attr.call(b,j,!0),f.merge(this,b);if((j=A.getElementById(d[2]))&&j.parentNode){if(j.id!==d[2])return x.find(b);this.length=1;this[0]=j}return this.context=A,this.selector=b,this}return!j||j.jquery?(j||x).find(b):this.constructor(j).find(b)}return f.isFunction(b)?x.ready(b):(b.selector!==c&&(this.selector=b.selector,this.context=b.context),f.makeArray(b,
this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Z.call(this)},get:function(b){return null==b?this.toArray():0>b?this[this.length+b]:this[b]},pushStack:function(b,j,c){b=f.merge(this.constructor(),b);return b.prevObject=this,b.context=this.context,"find"===j?b.selector=this.selector+(this.selector?" ":"")+c:j&&(b.selector=this.selector+"."+j+"("+c+")"),b},each:function(b,j){return f.each(this,b,j)},ready:function(b){return f.ready.promise().done(b),
this},eq:function(b){return b=+b,-1===b?this.slice(b):this.slice(b,b+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Z.apply(this,arguments),"slice",Z.call(arguments).join(","))},map:function(b){return this.pushStack(f.map(this,function(j,c){return b.call(j,c,j)}))},end:function(){return this.prevObject||this.constructor(null)},push:Eb,sort:[].sort,splice:[].splice};f.fn.init.prototype=f.fn;f.extend=f.fn.extend=function(){var b,j,
x,d,e,K,v=arguments[0]||{},m=1,g=arguments.length,n=!1;"boolean"==typeof v&&(n=v,v=arguments[1]||{},m=2);"object"!=typeof v&&!f.isFunction(v)&&(v={});for(g===m&&(v=this,--m);m<g;m++)if(null!=(b=arguments[m]))for(j in b)x=v[j],d=b[j],v!==d&&(n&&d&&(f.isPlainObject(d)||(e=f.isArray(d)))?(e?(e=!1,K=x&&f.isArray(x)?x:[]):K=x&&f.isPlainObject(x)?x:{},v[j]=f.extend(n,K,d)):d!==c&&(v[j]=d));return v};f.extend({noConflict:function(u){return b.$===f&&(b.$=Cc),u&&b.jQuery===f&&(b.jQuery=Bc),f},isReady:!1,readyWait:1,
holdReady:function(b){b?f.readyWait++:f.ready(!0)},ready:function(b){if(!(!0===b?--f.readyWait:f.isReady)){if(!A.body)return setTimeout(f.ready,1);f.isReady=!0;!0!==b&&0<--f.readyWait||(Da.resolveWith(A,[f]),f.fn.trigger&&f(A).trigger("ready").off("ready"))}},isFunction:function(b){return"function"===f.type(b)},isArray:Array.isArray||function(b){return"array"===f.type(b)},isWindow:function(b){return null!=b&&b==b.window},isNumeric:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},type:function(b){return null==
b?String(b):Hb[Dc.call(b)]||"object"},isPlainObject:function(b){if(!b||"object"!==f.type(b)||b.nodeType||f.isWindow(b))return!1;try{if(b.constructor&&!$a.call(b,"constructor")&&!$a.call(b.constructor.prototype,"isPrototypeOf"))return!1}catch(j){return!1}for(var x in b);return x===c||$a.call(b,x)},isEmptyObject:function(b){for(var j in b)return!1;return!0},error:function(b){throw Error(b);},parseHTML:function(b,j,c){var d;return!b||"string"!=typeof b?null:("boolean"==typeof j&&(c=j,j=0),j=j||A,(d=
Gb.exec(b))?[j.createElement(d[1])]:(d=f.buildFragment([b],j,c?null:[]),f.merge([],(d.cacheable?f.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(u){if(!u||"string"!=typeof u)return null;u=f.trim(u);if(b.JSON&&b.JSON.parse)return b.JSON.parse(u);if(Hc.test(u.replace(Jc,"@").replace(Kc,"]").replace(Ic,"")))return(new Function("return "+u))();f.error("Invalid JSON: "+u)},parseXML:function(u){var j,x;if(!u||"string"!=typeof u)return null;try{b.DOMParser?(x=new DOMParser,j=x.parseFromString(u,
"text/xml")):(j=new ActiveXObject("Microsoft.XMLDOM"),j.async="false",j.loadXML(u))}catch(d){j=c}return(!j||!j.documentElement||j.getElementsByTagName("parsererror").length)&&f.error("Invalid XML: "+u),j},noop:function(){},globalEval:function(u){u&&Ec.test(u)&&(b.execScript||function(u){b.eval.call(b,u)})(u)},camelCase:function(b){return b.replace(Lc,"ms-").replace(Mc,Nc)},nodeName:function(b,j){return b.nodeName&&b.nodeName.toLowerCase()===j.toLowerCase()},each:function(b,j,x){var d,e=0,K=b.length,
v=K===c||f.isFunction(b);if(x)if(v)for(d in b){if(!1===j.apply(b[d],x))break}else for(;e<K&&!1!==j.apply(b[e++],x););else if(v)for(d in b){if(!1===j.call(b[d],d,b[d]))break}else for(;e<K&&!1!==j.call(b[e],e,b[e++]););return b},trim:ab&&!ab.call("\ufeff\u00a0")?function(b){return null==b?"":ab.call(b)}:function(b){return null==b?"":(b+"").replace(Fc,"")},makeArray:function(b,j){var c,d=j||[];return null!=b&&(c=f.type(b),null==b.length||"string"===c||"function"===c||"regexp"===c||f.isWindow(b)?Eb.call(d,
b):f.merge(d,b)),d},inArray:function(b,j,c){var f;if(j){if(Fb)return Fb.call(j,b,c);f=j.length;for(c=c?0>c?Math.max(0,f+c):c:0;c<f;c++)if(c in j&&j[c]===b)return c}return-1},merge:function(b,j){var x=j.length,f=b.length,d=0;if("number"==typeof x)for(;d<x;d++)b[f++]=j[d];else for(;j[d]!==c;)b[f++]=j[d++];return b.length=f,b},grep:function(b,j,c){var f,d=[],e=0,v=b.length;for(c=!!c;e<v;e++)f=!!j(b[e],e),c!==f&&d.push(b[e]);return d},map:function(b,j,x){var d,e,m=[],v=0,g=b.length;if(b instanceof f||
g!==c&&"number"==typeof g&&(0<g&&b[0]&&b[g-1]||0===g||f.isArray(b)))for(;v<g;v++)d=j(b[v],v,x),null!=d&&(m[m.length]=d);else for(e in b)d=j(b[e],e,x),null!=d&&(m[m.length]=d);return m.concat.apply([],m)},guid:1,proxy:function(b,j){var x,d,e;return"string"==typeof j&&(x=b[j],j=b,b=x),f.isFunction(b)?(d=Z.call(arguments,2),e=function(){return b.apply(j,d.concat(Z.call(arguments)))},e.guid=b.guid=b.guid||f.guid++,e):c},access:function(b,j,x,d,e,m,v){var g,n=null==x,l=0,r=b.length;if(x&&"object"==typeof x){for(l in x)f.access(b,
j,l,x[l],1,m,d);e=1}else if(d!==c){g=v===c&&f.isFunction(d);n&&(g?(g=j,j=function(b,u,j){return g.call(f(b),j)}):(j.call(b,d),j=null));if(j)for(;l<r;l++)j(b[l],x,g?d.call(b[l],l,j(b[l],x)):d,v);e=1}return e?b:n?j.call(b):r?j(b[0],x):m},now:function(){return(new Date).getTime()}});f.ready.promise=function(u){if(!Da)if(Da=f.Deferred(),"complete"===A.readyState)setTimeout(f.ready,1);else if(A.addEventListener)A.addEventListener("DOMContentLoaded",Fa,!1),b.addEventListener("load",f.ready,!1);else{A.attachEvent("onreadystatechange",
Fa);b.attachEvent("onload",f.ready);var j=!1;try{j=null==b.frameElement&&A.documentElement}catch(c){}j&&j.doScroll&&function uc(){if(!f.isReady){try{j.doScroll("left")}catch(b){return setTimeout(uc,50)}f.ready()}}()}return Da.promise(u)};f.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b,j){Hb["[object "+j+"]"]=j.toLowerCase()});Db=f(A);var Ib={};f.Callbacks=function(b){var j;if("string"==typeof b){if(!(j=Ib[b])){j=b;var x=Ib[j]={};j=(f.each(j.split(ea),function(b,
u){x[u]=!0}),x)}}else j=f.extend({},b);b=j;var d,e,m,v,g,n,l=[],r=!b.once&&[],q=function(j){d=b.memory&&j;e=!0;n=v||0;v=0;g=l.length;for(m=!0;l&&n<g;n++)if(!1===l[n].apply(j[0],j[1])&&b.stopOnFalse){d=!1;break}m=!1;l&&(r?r.length&&q(r.shift()):d?l=[]:s.disable())},s={add:function(){if(l){var j=l.length;(function yc(j){f.each(j,function(j,c){var x=f.type(c);"function"===x&&(!b.unique||!s.has(c))?l.push(c):c&&c.length&&"string"!==x&&yc(c)})})(arguments);m?g=l.length:d&&(v=j,q(d))}return this},remove:function(){return l&&
f.each(arguments,function(b,u){for(var j;-1<(j=f.inArray(u,l,j));)l.splice(j,1),m&&(j<=g&&g--,j<=n&&n--)}),this},has:function(b){return-1<f.inArray(b,l)},empty:function(){return l=[],this},disable:function(){return l=r=d=c,this},disabled:function(){return!l},lock:function(){return r=c,d||s.disable(),this},locked:function(){return!r},fireWith:function(b,u){return u=u||[],u=[b,u.slice?u.slice():u],l&&(!e||r)&&(m?r.push(u):q(u)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!e}};
return s};f.extend({Deferred:function(b){var j=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var b=arguments;return f.Deferred(function(u){f.each(j,function(j,c){var x=c[0],d=b[j];e[c[1]](f.isFunction(d)?function(){var b=d.apply(this,arguments);b&&f.isFunction(b.promise)?
b.promise().done(u.resolve).fail(u.reject).progress(u.notify):u[x+"With"](this===e?u:this,[b])}:u[x])});b=null}).promise()},promise:function(b){return null!=b?f.extend(b,d):d}},e={};return d.pipe=d.then,f.each(j,function(b,u){var f=u[2],m=u[3];d[u[1]]=f.add;m&&f.add(function(){c=m},j[b^1][2].disable,j[2][2].lock);e[u[0]]=f.fire;e[u[0]+"With"]=f.fireWith}),d.promise(e),b&&b.call(e,e),e},when:function(b){var j=0,c=Z.call(arguments),d=c.length,e=1!==d||b&&f.isFunction(b.promise)?d:0,m=1===e?b:f.Deferred(),
v=function(b,u,j){return function(c){u[b]=this;j[b]=1<arguments.length?Z.call(arguments):c;j===g?m.notifyWith(u,j):--e||m.resolveWith(u,j)}},g,n,l;if(1<d){g=Array(d);n=Array(d);for(l=Array(d);j<d;j++)c[j]&&f.isFunction(c[j].promise)?c[j].promise().done(v(j,l,c)).fail(m.reject).progress(v(j,n,g)):--e}return e||m.resolveWith(l,c),m.promise()}});var Oc=f,bb;var N,Ga,fa,Ha,Ia,S,ga,Ja,cb,ta,Jb,I=A.createElement("div");I.setAttribute("className","t");I.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
Ga=I.getElementsByTagName("*");fa=I.getElementsByTagName("a")[0];fa.style.cssText="top:1px;float:left;opacity:.5";if(!Ga||!Ga.length)bb={};else{Ha=A.createElement("select");Ia=Ha.appendChild(A.createElement("option"));S=I.getElementsByTagName("input")[0];N={leadingWhitespace:3===I.firstChild.nodeType,tbody:!I.getElementsByTagName("tbody").length,htmlSerialize:!!I.getElementsByTagName("link").length,style:/top/.test(fa.getAttribute("style")),hrefNormalized:"/a"===fa.getAttribute("href"),opacity:/^0.5/.test(fa.style.opacity),
cssFloat:!!fa.style.cssFloat,checkOn:"on"===S.value,optSelected:Ia.selected,getSetAttribute:"t"!==I.className,enctype:!!A.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===A.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};S.checked=!0;N.noCloneChecked=S.cloneNode(!0).checked;
Ha.disabled=!0;N.optDisabled=!Ia.disabled;try{delete I.test}catch(Qd){N.deleteExpando=!1}!I.addEventListener&&I.attachEvent&&I.fireEvent&&(I.attachEvent("onclick",Jb=function(){N.noCloneEvent=!1}),I.cloneNode(!0).fireEvent("onclick"),I.detachEvent("onclick",Jb));S=A.createElement("input");S.value="t";S.setAttribute("type","radio");N.radioValue="t"===S.value;S.setAttribute("checked","checked");S.setAttribute("name","t");I.appendChild(S);ga=A.createDocumentFragment();ga.appendChild(I.lastChild);N.checkClone=
ga.cloneNode(!0).cloneNode(!0).lastChild.checked;N.appendChecked=S.checked;ga.removeChild(S);ga.appendChild(I);if(I.attachEvent)for(cb in{submit:!0,change:!0,focusin:!0})Ja="on"+cb,(ta=Ja in I)||(I.setAttribute(Ja,"return;"),ta="function"==typeof I[Ja]),N[cb+"Bubbles"]=ta;bb=(f(function(){var u,j,c,f,d=A.getElementsByTagName("body")[0];d&&(u=A.createElement("div"),u.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",d.insertBefore(u,d.firstChild),j=A.createElement("div"),
u.appendChild(j),j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=j.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",ta=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",N.reliableHiddenOffsets=ta&&0===c[0].offsetHeight,j.innerHTML="",j.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",N.boxSizing=
4===j.offsetWidth,N.doesNotIncludeMarginInBodyOffset=1!==d.offsetTop,b.getComputedStyle&&(N.pixelPosition="1%"!==(b.getComputedStyle(j,null)||{}).top,N.boxSizingReliable="4px"===(b.getComputedStyle(j,null)||{width:"4px"}).width,f=A.createElement("div"),f.style.cssText=j.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",f.style.marginRight=f.style.width="0",j.style.width="1px",j.appendChild(f),N.reliableMarginRight=!parseFloat((b.getComputedStyle(f,null)||{}).marginRight)),
"undefined"!=typeof j.style.zoom&&(j.innerHTML="",j.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",N.inlineBlockNeedsLayout=3===j.offsetWidth,j.style.display="block",j.style.overflow="visible",j.innerHTML="<div></div>",j.firstChild.style.width="5px",N.shrinkWrapBlocks=3!==j.offsetWidth,u.style.zoom=1),d.removeChild(u))}),ga.removeChild(I),Ga=fa=Ha=Ia=S=ga=I=null,N)}Oc.support=bb;var tc=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,sc=/([A-Z])/g;
f.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(b){return b=b.nodeType?f.cache[b[f.expando]]:b[f.expando],!!b&&!e(b)},data:function(b,j,x,d){if(f.acceptData(b)){var e,m,v=f.expando,g="string"==typeof j,n=b.nodeType,l=n?f.cache:b,r=n?b[v]:b[v]&&v;if(r&&l[r]&&(d||l[r].data)||!(g&&x===c)){r||(n?b[v]=r=f.deletedIds.pop()||f.guid++:r=v);l[r]||(l[r]={},
n||(l[r].toJSON=f.noop));if("object"==typeof j||"function"==typeof j)d?l[r]=f.extend(l[r],j):l[r].data=f.extend(l[r].data,j);return e=l[r],d||(e.data||(e.data={}),e=e.data),x!==c&&(e[f.camelCase(j)]=x),g?(m=e[j],null==m&&(m=e[f.camelCase(j)])):m=e,m}}},removeData:function(b,j,c){if(f.acceptData(b)){var d,m,g,v=b.nodeType,l=v?f.cache:b,n=v?b[f.expando]:f.expando;if(l[n]){if(j&&(d=c?l[n]:l[n].data)){f.isArray(j)||(j in d?j=[j]:(j=f.camelCase(j),j in d?j=[j]:j=j.split(" ")));m=0;for(g=j.length;m<g;m++)delete d[j[m]];
if(!(c?e:f.isEmptyObject)(d))return}if(!c&&(delete l[n].data,!e(l[n])))return;v?f.cleanData([b],!0):f.support.deleteExpando||l!=l.window?delete l[n]:l[n]=null}}},_data:function(b,j,c){return f.data(b,j,c,!0)},acceptData:function(b){var j=b.nodeName&&f.noData[b.nodeName.toLowerCase()];return!j||!0!==j&&b.getAttribute("classid")===j}});f.fn.extend({data:function(b,j){var x,z,e,m,v,g=this[0],l=0,n=null;if(b===c){if(this.length&&(n=f.data(g),1===g.nodeType&&!f._data(g,"parsedAttrs"))){e=g.attributes;
for(v=e.length;l<v;l++)m=e[l].name,m.indexOf("data-")||(m=f.camelCase(m.substring(5)),d(g,m,n[m]));f._data(g,"parsedAttrs",!0)}return n}return"object"==typeof b?this.each(function(){f.data(this,b)}):(x=b.split(".",2),x[1]=x[1]?"."+x[1]:"",z=x[1]+"!",f.access(this,function(j){if(j===c)return n=this.triggerHandler("getData"+z,[x[0]]),n===c&&g&&(n=f.data(g,b),n=d(g,b,n)),n===c&&x[1]?this.data(x[0]):n;x[1]=j;this.each(function(){var c=f(this);c.triggerHandler("setData"+z,x);f.data(this,b,j);c.triggerHandler("changeData"+
z,x)})},null,j,1<arguments.length,null,!1))},removeData:function(b){return this.each(function(){f.removeData(this,b)})}});f.extend({queue:function(b,j,c){var d;if(b)return j=(j||"fx")+"queue",d=f._data(b,j),c&&(!d||f.isArray(c)?d=f._data(b,j,f.makeArray(c)):d.push(c)),d||[]},dequeue:function(b,j){j=j||"fx";var c=f.queue(b,j),d=c.length,e=c.shift(),m=f._queueHooks(b,j),v=function(){f.dequeue(b,j)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===j&&c.unshift("inprogress"),delete m.stop,e.call(b,v,m));
!d&&m&&m.empty.fire()},_queueHooks:function(b,j){var c=j+"queueHooks";return f._data(b,c)||f._data(b,c,{empty:f.Callbacks("once memory").add(function(){f.removeData(b,j+"queue",!0);f.removeData(b,c,!0)})})}});f.fn.extend({queue:function(b,j){var d=2;return"string"!=typeof b&&(j=b,b="fx",d--),arguments.length<d?f.queue(this[0],b):j===c?this:this.each(function(){var c=f.queue(this,b,j);f._queueHooks(this,b);"fx"===b&&"inprogress"!==c[0]&&f.dequeue(this,b)})},dequeue:function(b){return this.each(function(){f.dequeue(this,
b)})},delay:function(b,j){return b=f.fx?f.fx.speeds[b]||b:b,j=j||"fx",this.queue(j,function(j,c){var f=setTimeout(j,b);c.stop=function(){clearTimeout(f)}})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,j){var d,e=1,m=f.Deferred(),g=this,v=this.length,n=function(){--e||m.resolveWith(g,[g])};"string"!=typeof b&&(j=b,b=c);for(b=b||"fx";v--;)(d=f._data(g[v],b+"queueHooks"))&&d.empty&&(e++,d.empty.add(n));return n(),m.promise(j)}});var aa,Kb,Lb,Mb=/[\t\r\n]/g,Pc=/\r/g,Qc=/^(?:button|input)$/i,
Rc=/^(?:button|input|object|select|textarea)$/i,Sc=/^a(?:rea|)$/i,Nb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ob=f.support.getSetAttribute;f.fn.extend({attr:function(b,j){return f.access(this,f.attr,b,j,1<arguments.length)},removeAttr:function(b){return this.each(function(){f.removeAttr(this,b)})},prop:function(b,j){return f.access(this,f.prop,b,j,1<arguments.length)},removeProp:function(b){return b=f.propFix[b]||
b,this.each(function(){try{this[b]=c,delete this[b]}catch(j){}})},addClass:function(b){var j,c,d,e,m,v,g;if(f.isFunction(b))return this.each(function(j){f(this).addClass(b.call(this,j,this.className))});if(b&&"string"==typeof b){j=b.split(ea);c=0;for(d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(!e.className&&1===j.length)e.className=b;else{m=" "+e.className+" ";v=0;for(g=j.length;v<g;v++)0>m.indexOf(" "+j[v]+" ")&&(m+=j[v]+" ");e.className=f.trim(m)}}return this},removeClass:function(b){var j,
d,e,m,g,v,n;if(f.isFunction(b))return this.each(function(j){f(this).removeClass(b.call(this,j,this.className))});if(b&&"string"==typeof b||b===c){j=(b||"").split(ea);v=0;for(n=this.length;v<n;v++)if(e=this[v],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(Mb," ");m=0;for(g=j.length;m<g;m++)for(;0<=d.indexOf(" "+j[m]+" ");)d=d.replace(" "+j[m]+" "," ");e.className=b?f.trim(d):""}}return this},toggleClass:function(b,j){var c=typeof b,d="boolean"==typeof j;return f.isFunction(b)?this.each(function(c){f(this).toggleClass(b.call(this,
c,this.className,j),j)}):this.each(function(){if("string"===c)for(var e,m=0,v=f(this),g=j,n=b.split(ea);e=n[m++];)g=d?g:!v.hasClass(e),v[g?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&f._data(this,"__className__",this.className),this.className=this.className||!1===b?"":f._data(this,"__className__")||""})},hasClass:function(b){b=" "+b+" ";for(var j=0,c=this.length;j<c;j++)if(1===this[j].nodeType&&0<=(" "+this[j].className+" ").replace(Mb," ").indexOf(b))return!0;
return!1},val:function(b){var j,d,e,m=this[0];if(arguments.length)return e=f.isFunction(b),this.each(function(d){var x,m=f(this);if(1===this.nodeType&&(e?x=b.call(this,d,m.val()):x=b,null==x?x="":"number"==typeof x?x+="":f.isArray(x)&&(x=f.map(x,function(b){return null==b?"":b+""})),j=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],!j||!("set"in j)||j.set(this,x,"value")===c))this.value=x});if(m)return j=f.valHooks[m.type]||f.valHooks[m.nodeName.toLowerCase()],j&&"get"in j&&(d=j.get(m,
"value"))!==c?d:(d=m.value,"string"==typeof d?d.replace(Pc,""):null==d?"":d)}});f.extend({valHooks:{option:{get:function(b){var j=b.attributes.value;return!j||j.specified?b.value:b.text}},select:{get:function(b){var j,c,d=b.selectedIndex,e=[],m=b.options,v="select-one"===b.type;if(0>d)return null;b=v?d:0;for(c=v?d+1:m.length;b<c;b++)if(j=m[b],j.selected&&(f.support.optDisabled?!j.disabled:null===j.getAttribute("disabled"))&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){j=f(j).val();
if(v)return j;e.push(j)}return v&&!e.length&&m.length?f(m[d]).val():e},set:function(b,j){var c=f.makeArray(j);return f(b).find("option").each(function(){this.selected=0<=f.inArray(f(this).val(),c)}),c.length||(b.selectedIndex=-1),c}}},attrFn:{},attr:function(b,j,d,e){var m,g,v=b.nodeType;if(b&&!(3===v||8===v||2===v)){if(e&&f.isFunction(f.fn[j]))return f(b)[j](d);if("undefined"==typeof b.getAttribute)return f.prop(b,j,d);(e=1!==v||!f.isXMLDoc(b))&&(j=j.toLowerCase(),g=f.attrHooks[j]||(Nb.test(j)?Kb:
aa));if(d!==c){if(null===d){f.removeAttr(b,j);return}return g&&"set"in g&&e&&(m=g.set(b,d,j))!==c?m:(b.setAttribute(j,d+""),d)}return g&&"get"in g&&e&&null!==(m=g.get(b,j))?m:(m=b.getAttribute(j),null===m?c:m)}},removeAttr:function(b,j){var c,d,e,m,v=0;if(j&&1===b.nodeType)for(d=j.split(ea);v<d.length;v++)(e=d[v])&&(c=f.propFix[e]||e,m=Nb.test(e),m||f.attr(b,e,""),b.removeAttribute(Ob?e:c),m&&c in b&&(b[c]=!1))},attrHooks:{type:{set:function(b,j){if(Qc.test(b.nodeName)&&b.parentNode)f.error("type property can't be changed");
else if(!f.support.radioValue&&"radio"===j&&f.nodeName(b,"input")){var c=b.value;return b.setAttribute("type",j),c&&(b.value=c),j}}},value:{get:function(b,j){return aa&&f.nodeName(b,"button")?aa.get(b,j):j in b?b.value:null},set:function(b,j,c){if(aa&&f.nodeName(b,"button"))return aa.set(b,j,c);b.value=j}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b,j,d){var e,m,g,v=b.nodeType;if(b&&!(3===v||8===v||2===v))return g=1!==v||!f.isXMLDoc(b),g&&(j=f.propFix[j]||j,m=f.propHooks[j]),d!==c?m&&"set"in m&&(e=m.set(b,d,j))!==c?e:b[j]=d:m&&"get"in m&&null!==(e=m.get(b,j))?e:b[j]},propHooks:{tabIndex:{get:function(b){var j=b.getAttributeNode("tabindex");return j&&j.specified?parseInt(j.value,10):Rc.test(b.nodeName)||Sc.test(b.nodeName)&&b.href?0:c}}}});Kb={get:function(b,
j){var d,e=f.prop(b,j);return!0===e||"boolean"!=typeof e&&(d=b.getAttributeNode(j))&&!1!==d.nodeValue?j.toLowerCase():c},set:function(b,j,c){var d;return!1===j?f.removeAttr(b,c):(d=f.propFix[c]||c,d in b&&(b[d]=!0),b.setAttribute(c,c.toLowerCase())),c}};Ob||(Lb={name:!0,id:!0,coords:!0},aa=f.valHooks.button={get:function(b,j){var d;return d=b.getAttributeNode(j),d&&(Lb[j]?""!==d.value:d.specified)?d.value:c},set:function(b,j,c){var d=b.getAttributeNode(c);return d||(d=A.createAttribute(c),b.setAttributeNode(d)),
d.value=j+""}},f.each(["width","height"],function(b,j){f.attrHooks[j]=f.extend(f.attrHooks[j],{set:function(b,u){if(""===u)return b.setAttribute(j,"auto"),u}})}),f.attrHooks.contenteditable={get:aa.get,set:function(b,j,c){""===j&&(j="false");aa.set(b,j,c)}});f.support.hrefNormalized||f.each(["href","src","width","height"],function(b,j){f.attrHooks[j]=f.extend(f.attrHooks[j],{get:function(b){b=b.getAttribute(j,2);return null===b?c:b}})});f.support.style||(f.attrHooks.style={get:function(b){return b.style.cssText.toLowerCase()||
c},set:function(b,j){return b.style.cssText=j+""}});f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(b){b=b.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}));f.support.enctype||(f.propFix.enctype="encoding");f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(b){return null===b.getAttribute("value")?"on":b.value}}});f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],
{set:function(b,j){if(f.isArray(j))return b.checked=0<=f.inArray(f(b).val(),j)}})});var db=/^(?:textarea|input|select)$/i,Pb=/^([^\.]*|)(?:\.(.+)|)$/,Tc=/(?:^|\s)hover(\.\S+|)\b/,Uc=/^key/,Vc=/^(?:mouse|contextmenu)|click/,Qb=/^(?:focusinfocus|focusoutblur)$/,Rb=function(b){return f.event.special.hover?b:b.replace(Tc,"mouseenter$1 mouseleave$1")};f.event={add:function(b,j,d,e,m){var g,v,n,l,r,q,Ba,s,t;if(!(3===b.nodeType||8===b.nodeType||!j||!d||!(g=f._data(b)))){d.handler&&(Ba=d,d=Ba.handler,m=Ba.selector);
d.guid||(d.guid=f.guid++);(n=g.events)||(g.events=n={});(v=g.handle)||(g.handle=v=function(b){return"undefined"!=typeof f&&(!b||f.event.triggered!==b.type)?f.event.dispatch.apply(v.elem,arguments):c},v.elem=b);j=f.trim(Rb(j)).split(" ");for(g=0;g<j.length;g++){l=Pb.exec(j[g])||[];r=l[1];q=(l[2]||"").split(".").sort();t=f.event.special[r]||{};r=(m?t.delegateType:t.bindType)||r;t=f.event.special[r]||{};l=f.extend({type:r,origType:l[1],data:e,handler:d,guid:d.guid,selector:m,needsContext:m&&f.expr.match.needsContext.test(m),
namespace:q.join(".")},Ba);s=n[r];if(!s&&(s=n[r]=[],s.delegateCount=0,!t.setup||!1===t.setup.call(b,e,q,v)))b.addEventListener?b.addEventListener(r,v,!1):b.attachEvent&&b.attachEvent("on"+r,v);t.add&&(t.add.call(b,l),l.handler.guid||(l.handler.guid=d.guid));m?s.splice(s.delegateCount++,0,l):s.push(l);f.event.global[r]=!0}b=null}},global:{},remove:function(b,j,c,d,e){var m,v,g,n,l,r,q,s,t,p,B=f.hasData(b)&&f._data(b);if(B&&(q=B.events)){j=f.trim(Rb(j||"")).split(" ");for(m=0;m<j.length;m++)if(v=Pb.exec(j[m])||
[],g=n=v[1],v=v[2],g){s=f.event.special[g]||{};g=(d?s.delegateType:s.bindType)||g;t=q[g]||[];l=t.length;v=v?RegExp("(^|\\.)"+v.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(r=0;r<t.length;r++)p=t[r],(e||n===p.origType)&&(!c||c.guid===p.guid)&&(!v||v.test(p.namespace))&&(!d||d===p.selector||"**"===d&&p.selector)&&(t.splice(r--,1),p.selector&&t.delegateCount--,s.remove&&s.remove.call(b,p));0===t.length&&l!==t.length&&((!s.teardown||!1===s.teardown.call(b,v,B.handle))&&f.removeEvent(b,
g,B.handle),delete q[g])}else for(g in q)f.event.remove(b,g+j[m],c,d,!0);f.isEmptyObject(q)&&(delete B.handle,f.removeData(b,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(u,j,d,e){if(!d||3!==d.nodeType&&8!==d.nodeType){var m,g,v,n,l,r,q,s=u.type||u;n=[];if(!Qb.test(s+f.event.triggered)&&(0<=s.indexOf("!")&&(s=s.slice(0,-1),m=!0),0<=s.indexOf(".")&&(n=s.split("."),s=n.shift(),n.sort()),d&&!f.event.customEvent[s]||f.event.global[s]))if(u="object"==typeof u?u[f.expando]?
u:new f.Event(s,u):new f.Event(s),u.type=s,u.isTrigger=!0,u.exclusive=m,u.namespace=n.join("."),u.namespace_re=u.namespace?RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n=0>s.indexOf(":")?"on"+s:"",d){if(u.result=c,u.target||(u.target=d),j=null!=j?f.makeArray(j):[],j.unshift(u),l=f.event.special[s]||{},!(l.trigger&&!1===l.trigger.apply(d,j))){q=[[d,l.bindType||s]];if(!e&&!l.noBubble&&!f.isWindow(d)){g=l.delegateType||s;m=Qb.test(g+s)?d:d.parentNode;for(v=d;m;m=m.parentNode)q.push([m,g]),
v=m;v===(d.ownerDocument||A)&&q.push([v.defaultView||v.parentWindow||b,g])}for(g=0;g<q.length&&!u.isPropagationStopped();g++)m=q[g][0],u.type=q[g][1],(r=(f._data(m,"events")||{})[u.type]&&f._data(m,"handle"))&&r.apply(m,j),(r=n&&m[n])&&f.acceptData(m)&&r.apply&&!1===r.apply(m,j)&&u.preventDefault();return u.type=s,!e&&!u.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.ownerDocument,j))&&("click"!==s||!f.nodeName(d,"a"))&&f.acceptData(d)&&n&&d[s]&&("focus"!==s&&"blur"!==s||0!==u.target.offsetWidth)&&
!f.isWindow(d)&&(v=d[n],v&&(d[n]=null),f.event.triggered=s,d[s](),f.event.triggered=c,v&&(d[n]=v)),u.result}}else for(g in d=f.cache,d)d[g].events&&d[g].events[s]&&f.event.trigger(u,j,d[g].handle.elem,!0)}},dispatch:function(u){u=f.event.fix(u||b.event);var j,d,e,m,g,v,n=(f._data(this,"events")||{})[u.type]||[],l=n.delegateCount,r=Z.call(arguments),q=!u.exclusive&&!u.namespace,s=f.event.special[u.type]||{},t=[];r[0]=u;u.delegateTarget=this;if(!(s.preDispatch&&!1===s.preDispatch.call(this,u))){if(l&&
(!u.button||"click"!==u.type))for(d=u.target;d!=this;d=d.parentNode||this)if(!0!==d.disabled||"click"!==u.type){m={};g=[];for(j=0;j<l;j++)e=n[j],v=e.selector,m[v]===c&&(m[v]=e.needsContext?0<=f(v,this).index(d):f.find(v,this,null,[d]).length),m[v]&&g.push(e);g.length&&t.push({elem:d,matches:g})}n.length>l&&t.push({elem:this,matches:n.slice(l)});for(j=0;j<t.length&&!u.isPropagationStopped();j++){m=t[j];u.currentTarget=m.elem;for(d=0;d<m.matches.length&&!u.isImmediatePropagationStopped();d++)if(e=m.matches[d],
q||!u.namespace&&!e.namespace||u.namespace_re&&u.namespace_re.test(e.namespace))u.data=e.data,u.handleObj=e,e=((f.event.special[e.origType]||{}).handle||e.handler).apply(m.elem,r),e!==c&&(u.result=e,!1===e&&(u.preventDefault(),u.stopPropagation()))}return s.postDispatch&&s.postDispatch.call(this,u),u.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},
keyHooks:{props:["char","charCode","key","keyCode"],filter:function(b,j){return null==b.which&&(b.which=null!=j.charCode?j.charCode:j.keyCode),b}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b,j){var d,f,e,m=j.button,g=j.fromElement;return null==b.pageX&&null!=j.clientX&&(d=b.target.ownerDocument||A,f=d.documentElement,e=d.body,b.pageX=j.clientX+(f&&f.scrollLeft||e&&e.scrollLeft||0)-(f&&f.clientLeft||
e&&e.clientLeft||0),b.pageY=j.clientY+(f&&f.scrollTop||e&&e.scrollTop||0)-(f&&f.clientTop||e&&e.clientTop||0)),!b.relatedTarget&&g&&(b.relatedTarget=g===b.target?j.toElement:g),!b.which&&m!==c&&(b.which=m&1?1:m&2?3:m&4?2:0),b}},fix:function(b){if(b[f.expando])return b;var j,c,d=b,e=f.event.fixHooks[b.type]||{},m=e.props?this.props.concat(e.props):this.props;b=f.Event(d);for(j=m.length;j;)c=m[--j],b[c]=d[c];return b.target||(b.target=d.srcElement||A),3===b.target.nodeType&&(b.target=b.target.parentNode),
b.metaKey=!!b.metaKey,e.filter?e.filter(b,d):b},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b,j,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(b,j){this.onbeforeunload===j&&(this.onbeforeunload=null)}}},simulate:function(b,j,c,d){b=f.extend(new f.Event,c,{type:b,isSimulated:!0,originalEvent:{}});d?f.event.trigger(b,null,j):f.event.dispatch.call(j,b);b.isDefaultPrevented()&&c.preventDefault()}};f.event.handle=
f.event.dispatch;f.removeEvent=A.removeEventListener?function(b,j,c){b.removeEventListener&&b.removeEventListener(j,c,!1)}:function(b,j,c){j="on"+j;b.detachEvent&&("undefined"==typeof b[j]&&(b[j]=null),b.detachEvent(j,c))};f.Event=function(b,j){if(this instanceof f.Event)b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||!1===b.returnValue||b.getPreventDefault&&b.getPreventDefault()?l:g):this.type=b,j&&f.extend(this,j),this.timeStamp=b&&b.timeStamp||f.now(),
this[f.expando]=!0;else return new f.Event(b,j)};f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=l;var b=this.originalEvent;b&&(b.preventDefault?b.preventDefault():b.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=l;var b=this.originalEvent;b&&(b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l;this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g};
f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,j){f.event.special[b]={delegateType:j,bindType:j,handle:function(b){var c,u=b.relatedTarget,d=b.handleObj;if(!u||u!==this&&!f.contains(this,u))b.type=d.origType,c=d.handler.apply(this,arguments),b.type=j;return c}}});f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(b){b=b.target;(b=f.nodeName(b,"input")||f.nodeName(b,"button")?
b.form:c)&&!f._data(b,"_submit_attached")&&(f.event.add(b,"submit._submit",function(b){b._submit_bubble=!0}),f._data(b,"_submit_attached",!0))})},postDispatch:function(b){b._submit_bubble&&(delete b._submit_bubble,this.parentNode&&!b.isTrigger&&f.event.simulate("submit",this.parentNode,b,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}});f.support.changeBubbles||(f.event.special.change={setup:function(){if(db.test(this.nodeName)){if("checkbox"===this.type||
"radio"===this.type)f.event.add(this,"propertychange._change",function(b){"checked"===b.originalEvent.propertyName&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(b){this._just_changed&&!b.isTrigger&&(this._just_changed=!1);f.event.simulate("change",this,b,!0)});return!1}f.event.add(this,"beforeactivate._change",function(b){b=b.target;db.test(b.nodeName)&&!f._data(b,"_change_attached")&&(f.event.add(b,"change._change",function(b){this.parentNode&&!b.isSimulated&&!b.isTrigger&&
f.event.simulate("change",this.parentNode,b,!0)}),f._data(b,"_change_attached",!0))})},handle:function(b){var j=b.target;if(this!==j||b.isSimulated||b.isTrigger||"radio"!==j.type&&"checkbox"!==j.type)return b.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),!db.test(this.nodeName)}});f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(b,j){var c=0,d=function(b){f.event.simulate(j,b.target,f.event.fix(b),!0)};f.event.special[j]=
{setup:function(){0===c++&&A.addEventListener(b,d,!0)},teardown:function(){0===--c&&A.removeEventListener(b,d,!0)}}});f.fn.extend({on:function(b,j,d,e,m){var n,v;if("object"==typeof b){"string"!=typeof j&&(d=d||j,j=c);for(v in b)this.on(v,j,d,b[v],m);return this}null==d&&null==e?(e=j,d=j=c):null==e&&("string"==typeof j?(e=d,d=c):(e=d,d=j,j=c));if(!1===e)e=g;else if(!e)return this;return 1===m&&(n=e,e=function(b){return f().off(b),n.apply(this,arguments)},e.guid=n.guid||(n.guid=f.guid++)),this.each(function(){f.event.add(this,
b,e,d,j)})},one:function(b,j,c,d){return this.on(b,j,c,d,1)},off:function(b,j,d){var e,m;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,f(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(m in b)this.off(m,j,b[m]);return this}if(!1===j||"function"==typeof j)d=j,j=c;return!1===d&&(d=g),this.each(function(){f.event.remove(this,b,d,j)})},bind:function(b,j,c){return this.on(b,null,j,c)},unbind:function(b,j){return this.off(b,
null,j)},live:function(b,j,c){return f(this.context).on(b,this.selector,j,c),this},die:function(b,j){return f(this.context).off(b,this.selector||"**",j),this},delegate:function(b,j,c,d){return this.on(j,b,c,d)},undelegate:function(b,j,c){return 1===arguments.length?this.off(b,"**"):this.off(j,b||"**",c)},trigger:function(b,j){return this.each(function(){f.event.trigger(b,j,this)})},triggerHandler:function(b,j){if(this[0])return f.event.trigger(b,j,this[0],!0)},toggle:function(b){var j=arguments,c=
b.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+b.guid)||0)%d;return f._data(this,"lastToggle"+b.guid,e+1),c.preventDefault(),j[e].apply(this,arguments)||!1};for(e.guid=c;d<j.length;)j[d++].guid=c;return this.click(e)},hover:function(b,j){return this.mouseenter(b).mouseleave(j||b)}});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(b,j){f.fn[j]=function(b,c){return null==c&&(c=b,b=null),0<arguments.length?this.on(j,null,b,c):this.trigger(j)};Uc.test(j)&&(f.event.fixHooks[j]=f.event.keyHooks);Vc.test(j)&&(f.event.fixHooks[j]=f.event.mouseHooks)});var Wc=b,C=function(b,j,c,d){c=c||[];j=j||W;var f,e,m,g,n=j.nodeType;if(!b||"string"!=typeof b)return c;if(1!==n&&9!==n)return[];m=Ka(j);if(!m&&!d&&(f=Xc.exec(b)))if(g=f[1])if(9===n){e=j.getElementById(g);if(!e||!e.parentNode)return c;if(e.id===g)return c.push(e),c}else{if(j.ownerDocument&&
(e=j.ownerDocument.getElementById(g))&&Sb(j,e)&&e.id===g)return c.push(e),c}else{if(f[2])return na.apply(c,oa.call(j.getElementsByTagName(b),0)),c;if((g=f[3])&&Tb&&j.getElementsByClassName)return na.apply(c,oa.call(j.getElementsByClassName(g),0)),c}return eb(b.replace(La,"$1"),j,c,d,m)},ua=function(b){return function(j){return"input"===j.nodeName.toLowerCase()&&j.type===b}},Ub=function(b){return function(j){var c=j.nodeName.toLowerCase();return("input"===c||"button"===c)&&j.type===b}},ha=function(b){return X(function(j){return j=
+j,X(function(c,d){for(var f,e=b([],c.length,j),m=e.length;m--;)c[f=e[m]]&&(c[f]=!(d[f]=c[f]))})})},Ma=function(b,j,c){if(b===j)return c;for(b=b.nextSibling;b;){if(b===j)return-1;b=b.nextSibling}return 1},Oa=function(b,j){var c,d,f,e,m,g,n;if(m=Vb[F][b])return j?0:m.slice(0);m=b;g=[];for(n=J.preFilter;m;){if(!c||(d=Yc.exec(m)))d&&(m=m.slice(d[0].length)),g.push(f=[]);c=!1;if(d=Zc.exec(m))f.push(c=new Wb(d.shift())),m=m.slice(c.length),c.type=d[0].replace(La," ");for(e in J.filter)(d=Na[e].exec(m))&&
(!n[e]||(d=n[e](d,W,!0)))&&(f.push(c=new Wb(d.shift())),m=m.slice(c.length),c.type=e,c.matches=d);if(!c)break}return j?m.length:m?C.error(b):Vb(b,g).slice(0)},gb=function(b,c,d){var f=c.dir,e=d&&"parentNode"===c.dir,m=$c++;return c.first?function(c,j,d){for(;c=c[f];)if(e||1===c.nodeType)return b(c,j,d)}:function(c,j,d){if(d)for(;c=c[f];){if((e||1===c.nodeType)&&b(c,j,d))return c}else for(var x,g=va+" "+m+" ",n=g+fb;c=c[f];)if(e||1===c.nodeType){if((x=c[F])===n)return c.sizset;if("string"==typeof x&&
0===x.indexOf(g)){if(c.sizset)return c}else{c[F]=n;if(b(c,j,d))return c.sizset=!0,c;c.sizset=!1}}}},hb=function(b){return 1<b.length?function(c,d,f){for(var e=b.length;e--;)if(!b[e](c,d,f))return!1;return!0}:b[0]},Pa=function(b,c,d,f,e){for(var m,g=[],n=0,l=b.length,r=null!=c;n<l;n++)if(m=b[n])if(!d||d(m,f,e))g.push(m),r&&c.push(n);return g},ib=function(b,c,d,f,e,m){return f&&!f[F]&&(f=ib(f)),e&&!e[F]&&(e=ib(e,m)),X(function(m,g,n,l){if(!m||!e){var r,q,K=[],s=[],t=g.length;if(!(q=m)){q=c||"*";var p=
n.nodeType?[n]:n,B=[];r=0;for(var y=p.length;r<y;r++)C(q,p[r],B,m);q=B}p=b&&(m||!c)?Pa(q,K,b,n,l):q;B=d?e||(m?b:t||f)?[]:g:p;d&&d(p,B,n,l);if(f){q=Pa(B,s);f(q,[],n,l);for(n=q.length;n--;)if(r=q[n])B[s[n]]=!(p[s[n]]=r)}if(m)for(n=b&&B.length;n--;){if(r=B[n])m[K[n]]=!(g[K[n]]=r)}else B=Pa(B===g?B.splice(t,B.length):B),e?e(null,g,B,l):na.apply(g,B)}})},jb=function(b){var c,d,f,e=b.length,m=J.relative[b[0].type];d=m||J.relative[" "];for(var g=m?1:0,n=gb(function(b){return b===c},d,!0),l=gb(function(b){return-1<
Xb.call(c,b)},d,!0),r=[function(b,d,u){return!m&&(u||d!==Qa)||((c=d).nodeType?n(b,d,u):l(b,d,u))}];g<e;g++)if(d=J.relative[b[g].type])r=[gb(hb(r),d)];else{d=J.filter[b[g].type].apply(null,b[g].matches);if(d[F]){for(f=++g;f<e&&!J.relative[b[f].type];f++);return ib(1<g&&hb(r),1<g&&b.slice(0,g-1).join("").replace(La,"$1"),d,g<f&&jb(b.slice(g,f)),f<e&&jb(b=b.slice(f)),f<e&&b.join(""))}r.push(d)}return hb(r)},eb=function(b,c,d,f,e){var m,g,n,l,r=Oa(b);if(!f&&1===r.length){g=r[0]=r[0].slice(0);if(2<g.length&&
"ID"===(n=g[0]).type&&9===c.nodeType&&!e&&J.relative[g[1].type]){c=J.find.ID(n.matches[0].replace(ia,""),c,e)[0];if(!c)return d;b=b.slice(g.shift().length)}for(m=Na.POS.test(b)?-1:g.length-1;0<=m;m--){n=g[m];if(J.relative[l=n.type])break;if(l=J.find[l])if(f=l(n.matches[0].replace(ia,""),kb.test(g[0].type)&&c.parentNode||c,e)){g.splice(m,1);b=f.length&&g.join("");if(!b)return na.apply(d,oa.call(f,0)),d;break}}}return lb(b,r)(f,c,e,d,kb.test(b)),d},Yb=function(){},fb,mb,J,Ra,Ka,Sb,lb,nb,wa,Qa,Zb=!0,
F=("sizcache"+Math.random()).replace(".",""),Wb=String,W=Wc.document,V=W.documentElement,va=0,$c=0,ad=[].pop,na=[].push,oa=[].slice,Xb=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(this[c]===b)return c;return-1},X=function(b,c){return b[F]=null==c||c,b},ob=function(){var b={},c=[];return X(function(d,f){return c.push(d)>J.cacheLength&&delete b[c.shift()],b[d]=f},b)},$b=ob(),Vb=ob(),ac=ob(),bc="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",pb=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+bc+")|[^:]|\\\\.)*|.*))\\)|)",La=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Yc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Zc=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,bd=RegExp(pb),Xc=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,kb=/[\x20\t\r\n\f]*[+~]/,cd=/h\d/i,dd=/input|select|textarea|button/i,ia=/\\(?!\\)/g,
Na={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+bc),PSEUDO:RegExp("^"+pb),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},ba=function(b){var c=W.createElement("div");try{return b(c)}catch(d){return!1}finally{}},ed=ba(function(b){return b.appendChild(W.createComment("")),!b.getElementsByTagName("*").length}),fd=ba(function(b){return b.innerHTML="<a href='#'></a>",b.firstChild&&"undefined"!==typeof b.firstChild.getAttribute&&"#"===b.firstChild.getAttribute("href")}),
gd=ba(function(b){b.innerHTML="<select></select>";b=typeof b.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),Tb=ba(function(b){return b.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!b.getElementsByClassName||!b.getElementsByClassName("e").length?!1:(b.lastChild.className="e",2===b.getElementsByClassName("e").length)}),hd=ba(function(b){b.id=F+0;b.innerHTML="<a name='"+F+"'></a><div name='"+F+"'></div>";V.insertBefore(b,V.firstChild);var c=W.getElementsByName&&
W.getElementsByName(F).length===2+W.getElementsByName(F+0).length;return mb=!W.getElementById(F),V.removeChild(b),c});try{oa.call(V.childNodes,0)[0].nodeType}catch(Rd){oa=function(b){for(var c,d=[];c=this[b];b++)d.push(c);return d}}C.matches=function(b,c){return C(b,null,null,c)};C.matchesSelector=function(b,c){return 0<C(c,null,null,[b]).length};Ra=C.getText=function(b){var c,d="",f=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=
b.nextSibling)d+=Ra(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[f];f++)d+=Ra(c);return d};Ka=C.isXML=function(b){return(b=b&&(b.ownerDocument||b).documentElement)?"HTML"!==b.nodeName:!1};Sb=C.contains=V.contains?function(b,c){var d=9===b.nodeType?b.documentElement:b,f=c&&c.parentNode;return b===f||!(!f||!(1===f.nodeType&&d.contains&&d.contains(f)))}:V.compareDocumentPosition?function(b,c){return c&&!!(b.compareDocumentPosition(c)&16)}:function(b,c){for(;c=c.parentNode;)if(c===b)return!0;
return!1};C.attr=function(b,c){var d,f=Ka(b);return f||(c=c.toLowerCase()),(d=J.attrHandle[c])?d(b):f||gd?b.getAttribute(c):(d=b.getAttributeNode(c),d?"boolean"==typeof b[c]?b[c]?c:null:d.specified?d.value:null:null)};J=C.selectors={cacheLength:50,createPseudo:X,match:Na,attrHandle:fd?{}:{href:function(b){return b.getAttribute("href",2)},type:function(b){return b.getAttribute("type")}},find:{ID:mb?function(b,c,d){if("undefined"!==typeof c.getElementById&&!d)return(b=c.getElementById(b))&&b.parentNode?
[b]:[]}:function(b,c,d){if("undefined"!==typeof c.getElementById&&!d)return(c=c.getElementById(b))?c.id===b||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").value===b?[c]:void 0:[]},TAG:ed?function(b,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(b)}:function(b,c){var d=c.getElementsByTagName(b);if("*"===b){for(var f,e=[],m=0;f=d[m];m++)1===f.nodeType&&e.push(f);return e}return d},NAME:hd&&function(b,c){if("undefined"!==typeof c.getElementsByName)return c.getElementsByName(name)},
CLASS:Tb&&function(b,c,d){if("undefined"!==typeof c.getElementsByClassName&&!d)return c.getElementsByClassName(b)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(ia,""),b[3]=(b[4]||b[5]||"").replace(ia,""),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1]?(b[2]||C.error(b[0]),b[3]=+(b[3]?b[4]+(b[5]||1):
2*("even"===b[2]||"odd"===b[2])),b[4]=+(b[6]+b[7]||"odd"===b[2])):b[2]&&C.error(b[0]),b},PSEUDO:function(b){var c,d;if(Na.CHILD.test(b[0]))return null;if(b[3])b[2]=b[3];else if(c=b[4])bd.test(c)&&(d=Oa(c,!0))&&(d=c.indexOf(")",c.length-d)-c.length)&&(c=c.slice(0,d),b[0]=b[0].slice(0,d)),b[2]=c;return b.slice(0,3)}},filter:{ID:mb?function(b){return b=b.replace(ia,""),function(c){return c.getAttribute("id")===b}}:function(b){return b=b.replace(ia,""),function(c){return(c="undefined"!==typeof c.getAttributeNode&&
c.getAttributeNode("id"))&&c.value===b}},TAG:function(b){return"*"===b?function(){return!0}:(b=b.replace(ia,"").toLowerCase(),function(c){return c.nodeName&&c.nodeName.toLowerCase()===b})},CLASS:function(b){var c=$b[F][b];return c||(c=$b(b,RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))),function(b){return c.test(b.className||"undefined"!==typeof b.getAttribute&&b.getAttribute("class")||"")}},ATTR:function(b,c,d){return function(f){f=C.attr(f,b);return null==f?"!="===c:c?(f+="","="===
c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&-1<f.indexOf(d):"$="===c?d&&f.substr(f.length-d.length)===d:"~="===c?-1<(" "+f+" ").indexOf(d):"|="===c?f===d||f.substr(0,d.length+1)===d+"-":!1):!0}},CHILD:function(b,c,d,f){return"nth"===b?function(b){var c,j;c=b.parentNode;if(1===d&&0===f)return!0;if(c){j=0;for(c=c.firstChild;c&&!(1===c.nodeType&&(j++,b===c));c=c.nextSibling);}return j-=f,j===d||0===j%d&&0<=j/d}:function(c){var j=c;switch(b){case "only":case "first":for(;j=j.previousSibling;)if(1===
j.nodeType)return!1;if("first"===b)return!0;j=c;case "last":for(;j=j.nextSibling;)if(1===j.nodeType)return!1;return!0}}},PSEUDO:function(b,c){var d,f=J.pseudos[b]||J.setFilters[b.toLowerCase()]||C.error("unsupported pseudo: "+b);return f[F]?f(c):1<f.length?(d=[b,b,"",c],J.setFilters.hasOwnProperty(b.toLowerCase())?X(function(b,d){for(var u,e=f(b,c),m=e.length;m--;)u=Xb.call(b,e[m]),b[u]=!(d[u]=e[m])}):function(b){return f(b,0,d)}):f}},pseudos:{not:X(function(b){var c=[],d=[],f=lb(b.replace(La,"$1"));
return f[F]?X(function(b,c,j,d){d=f(b,null,d,[]);for(var u=b.length;u--;)if(j=d[u])b[u]=!(c[u]=j)}):function(b,u,e){return c[0]=b,f(c,null,e,d),!d.pop()}}),has:X(function(b){return function(c){return 0<C(b,c).length}}),contains:X(function(b){return function(c){return-1<(c.textContent||c.innerText||Ra(c)).indexOf(b)}}),enabled:function(b){return!1===b.disabled},disabled:function(b){return!0===b.disabled},checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===
c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},parent:function(b){return!J.pseudos.empty(b)},empty:function(b){var c;for(b=b.firstChild;b;){if("@"<b.nodeName||3===(c=b.nodeType)||4===c)return!1;b=b.nextSibling}return!0},header:function(b){return cd.test(b.nodeName)},text:function(b){var c,d;return"input"===b.nodeName.toLowerCase()&&"text"===(c=b.type)&&(null==(d=b.getAttribute("type"))||d.toLowerCase()===c)},radio:ua("radio"),checkbox:ua("checkbox"),
file:ua("file"),password:ua("password"),image:ua("image"),submit:Ub("submit"),reset:Ub("reset"),button:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},input:function(b){return dd.test(b.nodeName)},focus:function(b){var c=b.ownerDocument;return b===c.activeElement&&(!c.hasFocus||c.hasFocus())&&(!!b.type||!!b.href)},active:function(b){return b===b.ownerDocument.activeElement},first:ha(function(){return[0]}),last:ha(function(b,c){return[c-1]}),eq:ha(function(b,
c,d){return[0>d?d+c:d]}),even:ha(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:ha(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:ha(function(b,c,d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:ha(function(b,c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};nb=V.compareDocumentPosition?function(b,c){return b===c?(wa=!0,0):(!b.compareDocumentPosition||!c.compareDocumentPosition?b.compareDocumentPosition:b.compareDocumentPosition(c)&4)?-1:1}:function(b,c){if(b===c)return wa=
!0,0;if(b.sourceIndex&&c.sourceIndex)return b.sourceIndex-c.sourceIndex;var d,f,e=[],m=[];d=b.parentNode;f=c.parentNode;var g=d;if(d===f)return Ma(b,c);if(!d)return-1;if(!f)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=f;g;)m.unshift(g),g=g.parentNode;d=e.length;f=m.length;for(g=0;g<d&&g<f;g++)if(e[g]!==m[g])return Ma(e[g],m[g]);return g===d?Ma(b,m[g],-1):Ma(e[g],c,1)};[0,0].sort(nb);Zb=!wa;C.uniqueSort=function(b){var c,d=1;wa=Zb;b.sort(nb);if(wa)for(;c=b[d];d++)c===b[d-1]&&b.splice(d--,1);
return b};C.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};lb=C.compile=function(b,c){var d,f=[],e=[],m=ac[F][b];if(!m){c||(c=Oa(b));for(d=c.length;d--;)m=jb(c[d]),m[F]?f.push(m):e.push(m);var g=0<f.length,n=0<e.length,l=function(b,c,d,j,u){var m,x,r=[],q=0,s="0",K=b&&[],t=null!=u,p=Qa,B=b||n&&J.find.TAG("*",u&&c.parentNode||c),y=va+=null==p?1:Math.E;for(t&&(Qa=c!==W&&c,fb=l.el);null!=(u=B[s]);s++){if(n&&u){for(m=0;x=e[m];m++)if(x(u,c,d)){j.push(u);break}t&&(va=y,fb=
++l.el)}g&&((u=!x&&u)&&q--,b&&K.push(u))}q+=s;if(g&&s!==q){for(m=0;x=f[m];m++)x(K,r,c,d);if(b){if(0<q)for(;s--;)!K[s]&&!r[s]&&(r[s]=ad.call(j));r=Pa(r)}na.apply(j,r);t&&!b&&0<r.length&&1<q+f.length&&C.uniqueSort(j)}return t&&(va=y,Qa=p),K};d=(l.el=0,g?X(l):l);m=ac(b,d)}return m};if(W.querySelectorAll){var cc,id=eb,jd=/'|\\/g,kd=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Y=[":focus"],Sa=[":active",":focus"],Ta=V.matchesSelector||V.mozMatchesSelector||V.webkitMatchesSelector||V.oMatchesSelector||
V.msMatchesSelector;ba(function(b){b.innerHTML="<select><option selected=''></option></select>";b.querySelectorAll("[selected]").length||Y.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");b.querySelectorAll(":checked").length||Y.push(":checked")});ba(function(b){b.innerHTML="<p test=''></p>";b.querySelectorAll("[test^='']").length&&Y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");b.innerHTML="<input type='hidden'/>";b.querySelectorAll(":enabled").length||Y.push(":enabled",
":disabled")});Y=RegExp(Y.join("|"));eb=function(b,c,d,f,e){if(!f&&!e&&(!Y||!Y.test(b))){var m,g,n=!0,l=F;g=c;m=9===c.nodeType&&b;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){m=Oa(b);(n=c.getAttribute("id"))?l=n.replace(jd,"\\$&"):c.setAttribute("id",l);l="[id='"+l+"'] ";for(g=m.length;g--;)m[g]=l+m[g].join("");g=kb.test(b)&&c.parentNode||c;m=m.join(",")}if(m)try{return na.apply(d,oa.call(g.querySelectorAll(m),0)),d}catch(r){}finally{n||c.removeAttribute("id")}}return id(b,c,d,f,e)};Ta&&
(ba(function(b){cc=Ta.call(b,"div");try{Ta.call(b,"[test!='']:sizzle"),Sa.push("!=",pb)}catch(c){}}),Sa=RegExp(Sa.join("|")),C.matchesSelector=function(b,c){c=c.replace(kd,"='$1']");if(!Ka(b)&&!Sa.test(c)&&(!Y||!Y.test(c)))try{var d=Ta.call(b,c);if(d||cc||b.document&&11!==b.document.nodeType)return d}catch(f){}return 0<C(c,null,null,[b]).length})}J.pseudos.nth=J.pseudos.eq;J.filters=Yb.prototype=J.pseudos;J.setFilters=new Yb;C.attr=f.attr;f.find=C;f.expr=C.selectors;f.expr[":"]=f.expr.pseudos;f.unique=
C.uniqueSort;f.text=C.getText;f.isXMLDoc=C.isXML;f.contains=C.contains;var ld=/Until$/,md=/^(?:parents|prev(?:Until|All))/,vc=/^.[^:#\[\.,]*$/,dc=f.expr.match.needsContext,nd={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(b){var c,d,e,m,g,n,l=this;if("string"!=typeof b)return f(b).filter(function(){c=0;for(d=l.length;c<d;c++)if(f.contains(l[c],this))return!0});n=this.pushStack("","find",b);c=0;for(d=this.length;c<d;c++)if(e=n.length,f.find(b,this[c],n),0<c)for(m=e;m<n.length;m++)for(g=
0;g<e;g++)if(n[g]===n[m]){n.splice(m--,1);break}return n},has:function(b){var c,d=f(b,this),e=d.length;return this.filter(function(){for(c=0;c<e;c++)if(f.contains(this,d[c]))return!0})},not:function(b){return this.pushStack(q(this,b,!1),"not",b)},filter:function(b){return this.pushStack(q(this,b,!0),"filter",b)},is:function(b){return!!b&&("string"==typeof b?dc.test(b)?0<=f(b,this.context).index(this[0]):0<f.filter(b,this).length:0<this.filter(b).length)},closest:function(b,c){for(var d,e=0,m=this.length,
g=[],n=dc.test(b)||"string"!=typeof b?f(b,c||this.context):0;e<m;e++)for(d=this[e];d&&d.ownerDocument&&d!==c&&11!==d.nodeType;){if(n?-1<n.index(d):f.find.matchesSelector(d,b)){g.push(d);break}d=d.parentNode}return g=1<g.length?f.unique(g):g,this.pushStack(g,"closest",b)},index:function(b){return b?"string"==typeof b?f.inArray(this[0],f(b)):f.inArray(b.jquery?b[0]:b,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(b,c){var d="string"==typeof b?f(b,c):f.makeArray(b&&b.nodeType?
[b]:b),e=f.merge(this.get(),d);return this.pushStack(p(d[0])||p(e[0])?e:f.unique(e))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});f.fn.andSelf=f.fn.addBack;f.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return f.dir(b,"parentNode")},parentsUntil:function(b,c,d){return f.dir(b,"parentNode",d)},next:function(b){return y(b,"nextSibling")},prev:function(b){return y(b,"previousSibling")},nextAll:function(b){return f.dir(b,
"nextSibling")},prevAll:function(b){return f.dir(b,"previousSibling")},nextUntil:function(b,c,d){return f.dir(b,"nextSibling",d)},prevUntil:function(b,c,d){return f.dir(b,"previousSibling",d)},siblings:function(b){return f.sibling((b.parentNode||{}).firstChild,b)},children:function(b){return f.sibling(b.firstChild)},contents:function(b){return f.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:f.merge([],b.childNodes)}},function(b,c){f.fn[b]=function(d,e){var m=f.map(this,c,d);return ld.test(b)||
(e=d),e&&"string"==typeof e&&(m=f.filter(e,m)),m=1<this.length&&!nd[b]?f.unique(m):m,1<this.length&&md.test(b)&&(m=m.reverse()),this.pushStack(m,b,Z.call(arguments).join(","))}});f.extend({filter:function(b,c,d){return d&&(b=":not("+b+")"),1===c.length?f.find.matchesSelector(c[0],b)?[c[0]]:[]:f.find.matches(b,c)},dir:function(b,d,e){var m=[];for(b=b[d];b&&9!==b.nodeType&&(e===c||1!==b.nodeType||!f(b).is(e));)1===b.nodeType&&m.push(b),b=b[d];return m},sibling:function(b,c){for(var d=[];b;b=b.nextSibling)1===
b.nodeType&&b!==c&&d.push(b);return d}});var wb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",od=/ jQuery\d+="(?:null|\d+)"/g,qb=/^\s+/,ec=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,fc=/<([\w:]+)/,pd=/<tbody/i,qd=/<|&#?\w+;/,rd=/<(?:script|style|link)/i,sd=/<(?:script|object|embed|option|style)/i,rb=RegExp("<(?:"+wb+")[\\s/>]","i"),xb=/^(?:checkbox|radio)$/,
gc=/checked\s*(?:[^=]|=\s*.checked.)/i,td=/\/(java|ecma)script/i,ud=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,U={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},hc=s(A),sb=hc.appendChild(A.createElement("div"));U.optgroup=
U.option;U.tbody=U.tfoot=U.colgroup=U.caption=U.thead;U.th=U.td;f.support.htmlSerialize||(U._default=[1,"X<div>","</div>"]);f.fn.extend({text:function(b){return f.access(this,function(b){return b===c?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(b))},null,b,arguments.length)},wrapAll:function(b){if(f.isFunction(b))return this.each(function(c){f(this).wrapAll(b.call(this,c))});if(this[0]){var c=f(b,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);
c.map(function(){for(var b=this;b.firstChild&&1===b.firstChild.nodeType;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(b){return f.isFunction(b)?this.each(function(c){f(this).wrapInner(b.call(this,c))}):this.each(function(){var c=f(this),d=c.contents();d.length?d.wrapAll(b):c.append(b)})},wrap:function(b){var c=f.isFunction(b);return this.each(function(d){f(this).wrapAll(c?b.call(this,d):b)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||
f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(b){(1===this.nodeType||11===this.nodeType)&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,!0,function(b){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(b,this.firstChild)})},before:function(){if(!p(this[0]))return this.domManip(arguments,!1,function(b){this.parentNode.insertBefore(b,this)});if(arguments.length){var b=f.clean(arguments);return this.pushStack(f.merge(b,
this),"before",this.selector)}},after:function(){if(!p(this[0]))return this.domManip(arguments,!1,function(b){this.parentNode.insertBefore(b,this.nextSibling)});if(arguments.length){var b=f.clean(arguments);return this.pushStack(f.merge(this,b),"after",this.selector)}},remove:function(b,c){for(var d,e=0;null!=(d=this[e]);e++)if(!b||f.filter(b,[d]).length)!c&&1===d.nodeType&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var b,
c=0;null!=(b=this[c]);c++)for(1===b.nodeType&&f.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(b,c){return b=null==b?!1:b,c=null==c?b:c,this.map(function(){return f.clone(this,b,c)})},html:function(b){return f.access(this,function(b){var d=this[0]||{},e=0,m=this.length;if(b===c)return 1===d.nodeType?d.innerHTML.replace(od,""):c;if("string"==typeof b&&!rd.test(b)&&(f.support.htmlSerialize||!rb.test(b))&&(f.support.leadingWhitespace||!qb.test(b))&&
!U[(fc.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(ec,"<$1></$2>");try{for(;e<m;e++)d=this[e]||{},1===d.nodeType&&(f.cleanData(d.getElementsByTagName("*")),d.innerHTML=b);d=0}catch(g){}}d&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(b){return p(this[0])?this.length?this.pushStack(f(f.isFunction(b)?b():b),"replaceWith",b):this:f.isFunction(b)?this.each(function(c){var d=f(this),e=d.html();d.replaceWith(b.call(this,c,e))}):("string"!=typeof b&&(b=f(b).detach()),this.each(function(){var c=
this.nextSibling,d=this.parentNode;f(this).remove();c?f(c).before(b):f(d).append(b)}))},detach:function(b){return this.remove(b,!0)},domManip:function(b,d,e){b=[].concat.apply([],b);var m,g,n,l=0,r=b[0],q=[],s=this.length;if(!f.support.checkClone&&1<s&&"string"==typeof r&&gc.test(r))return this.each(function(){f(this).domManip(b,d,e)});if(f.isFunction(r))return this.each(function(m){var g=f(this);b[0]=r.call(this,m,d?g.html():c);g.domManip(b,d,e)});if(this[0]){m=f.buildFragment(b,this,q);n=m.fragment;
g=n.firstChild;1===n.childNodes.length&&(n=g);if(g){d=d&&f.nodeName(g,"tr");for(m=m.cacheable||s-1;l<s;l++)e.call(d&&f.nodeName(this[l],"table")?this[l].getElementsByTagName("tbody")[0]||this[l].appendChild(this[l].ownerDocument.createElement("tbody")):this[l],l===m?n:f.clone(n,!0,!0))}n=g=null;q.length&&f.each(q,function(b,c){c.src?f.ajax?f.ajax({url:c.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):f.error("no ajax"):f.globalEval((c.text||c.textContent||c.innerHTML||"").replace(ud,
""));c.parentNode&&c.parentNode.removeChild(c)})}return this}});f.buildFragment=function(b,d,e){var m,g,n,l=b[0];return d=d||A,d=!d.nodeType&&d[0]||d,d=d.ownerDocument||d,1===b.length&&"string"==typeof l&&512>l.length&&d===A&&"<"===l.charAt(0)&&!sd.test(l)&&(f.support.checkClone||!gc.test(l))&&(f.support.html5Clone||!rb.test(l))&&(g=!0,m=f.fragments[l],n=m!==c),m||(m=d.createDocumentFragment(),f.clean(b,d,m,e),g&&(f.fragments[l]=n&&m)),{fragment:m,cacheable:g}};f.fragments={};f.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){f.fn[b]=function(d){var e,m=0,g=[];d=f(d);var n=d.length;e=1===this.length&&this[0].parentNode;if((null==e||e&&11===e.nodeType&&1===e.childNodes.length)&&1===n)return d[c](this[0]),this;for(;m<n;m++)e=(0<m?this.clone(!0):this).get(),f(d[m])[c](e),g=g.concat(e);return this.pushStack(g,b,d.selector)}});f.extend({clone:function(b,c,d){var e,g,l,r;f.support.html5Clone||f.isXMLDoc(b)||!rb.test("<"+b.nodeName+
">")?r=b.cloneNode(!0):(sb.innerHTML=b.outerHTML,sb.removeChild(r=sb.firstChild));if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(1===b.nodeType||11===b.nodeType)&&!f.isXMLDoc(b)){m(b,r);e=n(b);g=n(r);for(l=0;e[l];++l)g[l]&&m(e[l],g[l])}if(c&&(t(b,r),d)){e=n(b);g=n(r);for(l=0;e[l];++l)t(e[l],g[l])}return r},clean:function(b,c,d,e){var m,g,n,l,q,t,p,B=c===A&&hc,y=[];if(!c||"undefined"==typeof c.createDocumentFragment)c=A;for(m=0;null!=(n=b[m]);m++)if("number"==typeof n&&(n+=""),n){if("string"==
typeof n)if(qd.test(n)){B=B||s(c);t=c.createElement("div");B.appendChild(t);n=n.replace(ec,"<$1></$2>");g=(fc.exec(n)||["",""])[1].toLowerCase();l=U[g]||U._default;q=l[0];for(t.innerHTML=l[1]+n+l[2];q--;)t=t.lastChild;if(!f.support.tbody){q=pd.test(n);l="table"===g&&!q?t.firstChild&&t.firstChild.childNodes:"<table>"===l[1]&&!q?t.childNodes:[];for(g=l.length-1;0<=g;--g)f.nodeName(l[g],"tbody")&&!l[g].childNodes.length&&l[g].parentNode.removeChild(l[g])}!f.support.leadingWhitespace&&qb.test(n)&&t.insertBefore(c.createTextNode(qb.exec(n)[0]),
t.firstChild);n=t.childNodes;t.parentNode.removeChild(t)}else n=c.createTextNode(n);n.nodeType?y.push(n):f.merge(y,n)}t&&(n=t=B=null);if(!f.support.appendChecked)for(m=0;null!=(n=y[m]);m++)f.nodeName(n,"input")?r(n):"undefined"!=typeof n.getElementsByTagName&&f.grep(n.getElementsByTagName("input"),r);if(d){b=function(b){if(!b.type||td.test(b.type))return e?e.push(b.parentNode?b.parentNode.removeChild(b):b):d.appendChild(b)};for(m=0;null!=(n=y[m]);m++)if(!f.nodeName(n,"script")||!b(n))d.appendChild(n),
"undefined"!=typeof n.getElementsByTagName&&(p=f.grep(f.merge([],n.getElementsByTagName("script")),b),y.splice.apply(y,[m+1,0].concat(p)),m+=p.length)}return y},cleanData:function(b,c){for(var d,e,m,g,n=0,l=f.expando,r=f.cache,q=f.support.deleteExpando,s=f.event.special;null!=(m=b[n]);n++)if(c||f.acceptData(m))if(d=(e=m[l])&&r[e]){if(d.events)for(g in d.events)s[g]?f.event.remove(m,g):f.removeEvent(m,g,d.handle);r[e]&&(delete r[e],q?delete m[l]:m.removeAttribute?m.removeAttribute(l):m[l]=null,f.deletedIds.push(e))}}});
var Ua,ca;f.uaMatch=function(b){b=b.toLowerCase();b=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||0>b.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return{browser:b[1]||"",version:b[2]||"0"}};Ua=f.uaMatch(Ac.userAgent);ca={};Ua.browser&&(ca[Ua.browser]=!0,ca.version=Ua.version);ca.chrome?ca.webkit=!0:ca.webkit&&(ca.safari=!0);f.browser=ca;f.sub=function(){function b(c,d){return new b.fn.init(c,
d)}f.extend(!0,b,this);b.superclass=this;b.fn=b.prototype=this();b.fn.constructor=b;b.sub=this.sub;b.fn.init=function(d,e){return e&&e instanceof f&&!(e instanceof b)&&(e=b(e)),f.fn.init.call(this,d,e,c)};b.fn.init.prototype=b.fn;var c=b(A);return b};var P,ka,la,tb=/alpha\([^)]*\)/i,vd=/opacity=([^)]*)/,wd=/^(top|right|bottom|left)$/,xd=/^(none|table(?!-c[ea]).+)/,ic=/^margin/,wc=RegExp("^("+Ea+")(.*)$","i"),xa=RegExp("^("+Ea+")(?!px)[a-z%]+$","i"),yd=RegExp("^([-+])=("+Ea+")","i"),Ya={},zd={position:"absolute",
visibility:"hidden",display:"block"},jc={letterSpacing:0,fontWeight:400},da=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"],Ad=f.fn.toggle;f.fn.extend({css:function(b,d){return f.access(this,function(b,d,j){return j!==c?f.style(b,d,j):f.css(b,d)},b,d,1<arguments.length)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(b,c){var d="boolean"==typeof b;return f.isFunction(b)&&f.isFunction(c)?Ad.apply(this,arguments):this.each(function(){(d?b:M(this))?f(this).show():
f(this).hide()})}});f.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=P(b,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(b,d,e,m){if(b&&!(3===b.nodeType||8===b.nodeType||!b.style)){var g,n,l,r=f.camelCase(d),q=b.style;d=f.cssProps[r]||(f.cssProps[r]=B(q,r));l=f.cssHooks[d]||f.cssHooks[r];if(e===c)return l&&"get"in l&&(g=l.get(b,
!1,m))!==c?g:q[d];n=typeof e;"string"===n&&(g=yd.exec(e))&&(e=(g[1]+1)*g[2]+parseFloat(f.css(b,d)),n="number");if(!(null==e||"number"===n&&isNaN(e)))if("number"===n&&!f.cssNumber[r]&&(e+="px"),!l||!("set"in l)||(e=l.set(b,e,m))!==c)try{q[d]=e}catch(s){}}},css:function(b,d,e,m){var g,n,l,r=f.camelCase(d);return d=f.cssProps[r]||(f.cssProps[r]=B(b.style,r)),l=f.cssHooks[d]||f.cssHooks[r],l&&"get"in l&&(g=l.get(b,!0,m)),g===c&&(g=P(b,d)),"normal"===g&&d in jc&&(g=jc[d]),e||m!==c?(n=parseFloat(g),e||
f.isNumeric(n)?n||0:g):g},swap:function(b,c,d){var f,e={};for(f in c)e[f]=b.style[f],b.style[f]=c[f];d=d.call(b);for(f in c)b.style[f]=e[f];return d}});b.getComputedStyle?P=function(c,d){var e,m,g,n,l=b.getComputedStyle(c,null),r=c.style;return l&&(e=l[d],""===e&&!f.contains(c.ownerDocument,c)&&(e=f.style(c,d)),xa.test(e)&&ic.test(d)&&(m=r.width,g=r.minWidth,n=r.maxWidth,r.minWidth=r.maxWidth=r.width=e,e=l.width,r.width=m,r.minWidth=g,r.maxWidth=n)),e}:A.documentElement.currentStyle&&(P=function(b,
c){var d,f,e=b.currentStyle&&b.currentStyle[c],m=b.style;return null==e&&m&&m[c]&&(e=m[c]),xa.test(e)&&!wd.test(c)&&(d=m.left,f=b.runtimeStyle&&b.runtimeStyle.left,f&&(b.runtimeStyle.left=b.currentStyle.left),m.left="fontSize"===c?"1em":e,e=m.pixelLeft+"px",m.left=d,f&&(b.runtimeStyle.left=f)),""===e?"auto":e});f.each(["height","width"],function(b,c){f.cssHooks[c]={get:function(b,d,e){if(d)return 0===b.offsetWidth&&xd.test(P(b,"display"))?f.swap(b,zd,function(){return E(b,c,e)}):E(b,c,e)},set:function(b,
d,e){return H(b,d,e?Xa(b,c,e,f.support.boxSizing&&"border-box"===f.css(b,"boxSizing")):0)}}});f.support.opacity||(f.cssHooks.opacity={get:function(b,c){return vd.test((c&&b.currentStyle?b.currentStyle.filter:b.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":c?"1":""},set:function(b,c){var d=b.style,e=b.currentStyle,m=f.isNumeric(c)?"alpha(opacity="+100*c+")":"",g=e&&e.filter||d.filter||"";d.zoom=1;if(1<=c&&(""===f.trim(g.replace(tb,""))&&d.removeAttribute)&&(d.removeAttribute("filter"),e&&!e.filter))return;
d.filter=tb.test(g)?g.replace(tb,m):g+" "+m}});f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(b,c){return f.swap(b,{display:"inline-block"},function(){if(c)return P(b,"marginRight")})}});!f.support.pixelPosition&&f.fn.position&&f.each(["top","left"],function(b,c){f.cssHooks[c]={get:function(b,d){if(d){var e=P(b,c);return xa.test(e)?f(b).position()[c]+"px":e}}}})});f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(b){return 0===b.offsetWidth&&0===b.offsetHeight||
!f.support.reliableHiddenOffsets&&"none"===(b.style&&b.style.display||P(b,"display"))},f.expr.filters.visible=function(b){return!f.expr.filters.hidden(b)});f.each({margin:"",padding:"",border:"Width"},function(b,c){f.cssHooks[b+c]={expand:function(d){var f="string"==typeof d?d.split(" "):[d],e={};for(d=0;4>d;d++)e[b+da[d]+c]=f[d]||f[d-2]||f[0];return e}};ic.test(b)||(f.cssHooks[b+c].set=H)});var Bd=/%20/g,xc=/\[\]$/,kc=/\r?\n/g,Cd=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Dd=/^(?:select|textarea)/i;f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Dd.test(this.nodeName)||Cd.test(this.type))}).map(function(b,c){var d=f(this).val();return null==d?null:f.isArray(d)?f.map(d,function(b){return{name:c.name,value:b.replace(kc,"\r\n")}}):{name:c.name,value:d.replace(kc,"\r\n")}}).get()}});
f.param=function(b,d){var e,m=[],g=function(b,c){c=f.isFunction(c)?c():null==c?"":c;m[m.length]=encodeURIComponent(b)+"="+encodeURIComponent(c)};d===c&&(d=f.ajaxSettings&&f.ajaxSettings.traditional);if(f.isArray(b)||b.jquery&&!f.isPlainObject(b))f.each(b,function(){g(this.name,this.value)});else for(e in b)L(e,b[e],d,g);return m.join("&").replace(Bd,"+")};var pa,ja,Ed=/#.*$/,Fd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Gd=/^(?:GET|HEAD)$/,Hd=/^\/\//,lc=/\?/,Id=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
Jd=/([?&])_=[^&]*/,mc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,nc=f.fn.load,Za={},oc={},pc=["*/"]+["*"];try{ja=zc.href}catch(Sd){ja=A.createElement("a"),ja.href="",ja=ja.href}pa=mc.exec(ja.toLowerCase())||[];f.fn.load=function(b,d,e){if("string"!=typeof b&&nc)return nc.apply(this,arguments);if(!this.length)return this;var m,g,n,l=this,r=b.indexOf(" ");return 0<=r&&(m=b.slice(r,b.length),b=b.slice(0,r)),f.isFunction(d)?(e=d,d=c):d&&"object"==typeof d&&(g="POST"),f.ajax({url:b,type:g,dataType:"html",
data:d,complete:function(b,c){e&&l.each(e,n||[b.responseText,c,b])}}).done(function(b){n=arguments;l.html(m?f("<div>").append(b.replace(Id,"")).find(m):b)}),this};f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){f.fn[c]=function(b){return this.on(c,b)}});f.each(["get","post"],function(b,d){f[d]=function(b,e,m,g){return f.isFunction(e)&&(g=g||m,m=e,e=c),f.ajax({type:d,url:b,data:e,success:m,dataType:g})}});f.extend({getScript:function(b,d){return f.get(b,
c,d,"script")},getJSON:function(b,c,d){return f.get(b,c,d,"json")},ajaxSetup:function(b,c){return c?ra(b,f.ajaxSettings):(c=b,b=f.ajaxSettings),ra(b,c),b},ajaxSettings:{url:ja,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(pa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":pc},contents:{xml:/xml/,
html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":b.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:ya(Za),ajaxTransport:ya(oc),ajax:function(b,d){function e(b,d,j,n){var u,q,x,t,K,D=d;if(2!==E){E=2;r&&clearTimeout(r);l=c;g=n||"";G.readyState=0<b?4:0;if(j){t=p;n=G;var T,Q,C,I,J=t.contents,L=t.dataTypes,O=t.responseFields;for(Q in O)Q in j&&(n[O[Q]]=j[Q]);for(;"*"===L[0];)L.shift(),
T===c&&(T=t.mimeType||n.getResponseHeader("content-type"));if(T)for(Q in J)if(J[Q]&&J[Q].test(T)){L.unshift(Q);break}if(L[0]in j)C=L[0];else{for(Q in j){if(!L[0]||t.converters[Q+" "+L[0]]){C=Q;break}I||(I=Q)}C=C||I}j=C?(C!==L[0]&&L.unshift(C),j[C]):void 0;t=j}if(200<=b&&300>b||304===b)if(p.ifModified&&(K=G.getResponseHeader("Last-Modified"),K&&(f.lastModified[m]=K),K=G.getResponseHeader("Etag"),K&&(f.etag[m]=K)),304===b)D="notmodified",u=!0;else{var F;a:{u=p;q=t;var N,D=u.dataTypes.slice();j=D[0];
T={};Q=0;u.dataFilter&&(q=u.dataFilter(q,u.dataType));if(D[1])for(F in u.converters)T[F.toLowerCase()]=u.converters[F];for(;x=D[++Q];)if("*"!==x){if("*"!==j&&j!==x){F=T[j+" "+x]||T["* "+x];if(!F)for(N in T)if(K=N.split(" "),K[1]===x&&(F=T[j+" "+K[0]]||T["* "+K[0]])){!0===F?F=T[N]:!0!==T[N]&&(x=K[0],D.splice(Q--,0,x));break}if(!0!==F)if(F&&u["throws"])q=F(q);else try{q=F(q)}catch(P){F={state:"parsererror",error:F?P:"No conversion from "+j+" to "+x};break a}}j=x}F={state:"success",data:q}}u=F;D=u.state;
q=u.data;x=u.error;u=!x}else if(x=D,!D||b)D="error",0>b&&(b=0);G.status=b;G.statusText=(d||D)+"";u?M.resolveWith(B,[q,D,G]):M.rejectWith(B,[G,D,x]);G.statusCode(H);H=c;s&&y.trigger("ajax"+(u?"Success":"Error"),[G,p,u?q:x]);A.fireWith(B,[G,D]);s&&(y.trigger("ajaxComplete",[G,p]),--f.active||f.event.trigger("ajaxStop"))}}"object"==typeof b&&(d=b,b=c);d=d||{};var m,g,n,l,r,q,s,t,p=f.ajaxSetup({},d),B=p.context||p,y=B!==p&&(B.nodeType||B instanceof f)?f(B):f.event,M=f.Deferred(),A=f.Callbacks("once memory"),
H=p.statusCode||{},D={},C={},E=0,I="canceled",G={readyState:0,setRequestHeader:function(b,c){if(!E){var d=b.toLowerCase();b=C[d]=C[d]||b;D[b]=c}return this},getAllResponseHeaders:function(){return 2===E?g:null},getResponseHeader:function(b){var d;if(2===E){if(!n)for(n={};d=Fd.exec(g);)n[d[1].toLowerCase()]=d[2];d=n[b.toLowerCase()]}return d===c?null:d},overrideMimeType:function(b){return E||(p.mimeType=b),this},abort:function(b){return b=b||I,l&&l.abort(b),e(0,b),this}};M.promise(G);G.success=G.done;
G.error=G.fail;G.complete=A.add;G.statusCode=function(b){if(b){var c;if(2>E)for(c in b)H[c]=[H[c],b[c]];else c=b[G.status],G.always(c)}return this};p.url=((b||p.url)+"").replace(Ed,"").replace(Hd,pa[1]+"//");p.dataTypes=f.trim(p.dataType||"*").toLowerCase().split(ea);null==p.crossDomain&&(q=mc.exec(p.url.toLowerCase())||!1,p.crossDomain=q&&q.join(":")+(q[3]?"":"http:"===q[1]?80:443)!==pa.join(":")+(pa[3]?"":"http:"===pa[1]?80:443));p.data&&p.processData&&"string"!=typeof p.data&&(p.data=f.param(p.data,
p.traditional));ma(Za,p,d,G);if(2===E)return G;s=p.global;p.type=p.type.toUpperCase();p.hasContent=!Gd.test(p.type);s&&0===f.active++&&f.event.trigger("ajaxStart");if(!p.hasContent&&(p.data&&(p.url+=(lc.test(p.url)?"&":"?")+p.data,delete p.data),m=p.url,!1===p.cache)){q=f.now();var J=p.url.replace(Jd,"$1_="+q);p.url=J+(J===p.url?(lc.test(p.url)?"&":"?")+"_="+q:"")}(p.data&&p.hasContent&&!1!==p.contentType||d.contentType)&&G.setRequestHeader("Content-Type",p.contentType);p.ifModified&&(m=m||p.url,
f.lastModified[m]&&G.setRequestHeader("If-Modified-Since",f.lastModified[m]),f.etag[m]&&G.setRequestHeader("If-None-Match",f.etag[m]));G.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+pc+"; q=0.01":""):p.accepts["*"]);for(t in p.headers)G.setRequestHeader(t,p.headers[t]);if(!p.beforeSend||!1!==p.beforeSend.call(B,G,p)&&2!==E){I="abort";for(t in{success:1,error:1,complete:1})G[t](p[t]);if(l=ma(oc,p,d,G)){G.readyState=1;s&&y.trigger("ajaxSend",
[G,p]);p.async&&0<p.timeout&&(r=setTimeout(function(){G.abort("timeout")},p.timeout));try{E=1,l.send(D,e)}catch(L){if(2>E)e(-1,L);else throw L;}}else e(-1,"No Transport");return G}return G.abort()},active:0,lastModified:{},etag:{}});var qc=[],Kd=/\?/,Va=/(=)\?(?=&|$)|\?\?/,Ld=f.now();f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=qc.pop()||f.expando+"_"+Ld++;return this[b]=!0,b}});f.ajaxPrefilter("json jsonp",function(d,e,m){var g,n,l,r=d.data,q=d.url,s=!1!==d.jsonp,p=s&&Va.test(q),
t=s&&!p&&"string"==typeof r&&!(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Va.test(r);if("jsonp"===d.dataTypes[0]||p||t)return g=d.jsonpCallback=f.isFunction(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,n=b[g],p?d.url=q.replace(Va,"$1"+g):t?d.data=r.replace(Va,"$1"+g):s&&(d.url+=(Kd.test(q)?"&":"?")+d.jsonp+"="+g),d.converters["script json"]=function(){return l||f.error(g+" was not called"),l[0]},d.dataTypes[0]="json",b[g]=function(){l=arguments},m.always(function(){b[g]=
n;d[g]&&(d.jsonpCallback=e.jsonpCallback,qc.push(g));l&&f.isFunction(n)&&n(l[0]);l=n=c}),"script"});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){return f.globalEval(b),b}}});f.ajaxPrefilter("script",function(b){b.cache===c&&(b.cache=!1);b.crossDomain&&(b.type="GET",b.global=!1)});f.ajaxTransport("script",function(b){if(b.crossDomain){var d,f=
A.head||A.getElementsByTagName("head")[0]||A.documentElement;return{send:function(e,m){d=A.createElement("script");d.async="async";b.scriptCharset&&(d.charset=b.scriptCharset);d.src=b.url;d.onload=d.onreadystatechange=function(b,e){if(e||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,f&&d.parentNode&&f.removeChild(d),d=c,e||m(200,"success")};f.insertBefore(d,f.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var qa,ub=b.ActiveXObject?function(){for(var b in qa)qa[b](0,
1)}:!1,Md=0;f.ajaxSettings.xhr=b.ActiveXObject?function(){var c;if(!(c=!this.isLocal&&zb()))a:{try{c=new b.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}c=void 0}return c}:zb;var vb=f.ajaxSettings.xhr();f.extend(f.support,{ajax:!!vb,cors:!!vb&&"withCredentials"in vb});f.support.ajax&&f.ajaxTransport(function(d){if(!d.crossDomain||f.support.cors){var e;return{send:function(m,g){var n,l,r=d.xhr();d.username?r.open(d.type,d.url,d.async,d.username,d.password):r.open(d.type,d.url,d.async);if(d.xhrFields)for(l in d.xhrFields)r[l]=
d.xhrFields[l];d.mimeType&&r.overrideMimeType&&r.overrideMimeType(d.mimeType);!d.crossDomain&&!m["X-Requested-With"]&&(m["X-Requested-With"]="XMLHttpRequest");try{for(l in m)r.setRequestHeader(l,m[l])}catch(q){}r.send(d.hasContent&&d.data||null);e=function(b,m){var l,q,s,p,t;try{if(e&&(m||4===r.readyState))if(e=c,n&&(r.onreadystatechange=f.noop,ub&&delete qa[n]),m)4!==r.readyState&&r.abort();else{l=r.status;s=r.getAllResponseHeaders();p={};(t=r.responseXML)&&t.documentElement&&(p.xml=t);try{p.text=
r.responseText}catch(x){}try{q=r.statusText}catch(B){q=""}!l&&d.isLocal&&!d.crossDomain?l=p.text?200:404:1223===l&&(l=204)}}catch(y){m||g(-1,y)}p&&g(l,q,p,s)};d.async?4===r.readyState?setTimeout(e,0):(n=++Md,ub&&(qa||(qa={},f(b).unload(ub)),qa[n]=e),r.onreadystatechange=e):e()},abort:function(){e&&e(0,1)}}}});var za,Wa,Nd=/^(?:toggle|show|hide)$/,Od=RegExp("^(?:([-+])=|)("+Ea+")([a-z%]*)$","i"),Pd=/queueHooks$/,Aa=[function(b,c,d){var e,m,g,n,l,r,q=this,s=b.style,p={},t=[],B=b.nodeType&&M(b);d.queue||
(l=f._queueHooks(b,"fx"),null==l.unqueued&&(l.unqueued=0,r=l.empty.fire,l.empty.fire=function(){l.unqueued||r()}),l.unqueued++,q.always(function(){q.always(function(){l.unqueued--;f.queue(b,"fx").length||l.empty.fire()})}));1===b.nodeType&&("height"in c||"width"in c)&&(d.overflow=[s.overflow,s.overflowX,s.overflowY],"inline"===f.css(b,"display")&&"none"===f.css(b,"float")&&(!f.support.inlineBlockNeedsLayout||"inline"===O(b.nodeName)?s.display="inline-block":s.zoom=1));d.overflow&&(s.overflow="hidden",
f.support.shrinkWrapBlocks||q.done(function(){s.overflow=d.overflow[0];s.overflowX=d.overflow[1];s.overflowY=d.overflow[2]}));for(e in c)m=c[e],Nd.exec(m)&&(delete c[e],m!==(B?"hide":"show")&&t.push(e));if(m=t.length){g=f._data(b,"fxshow")||f._data(b,"fxshow",{});B?f(b).show():q.done(function(){f(b).hide()});q.done(function(){var c;f.removeData(b,"fxshow",!0);for(c in p)f.style(b,c,p[c])});for(e=0;e<m;e++)c=t[e],n=q.createTween(c,B?g[c]:0),p[c]=g[c]||f.style(b,c),c in g||(g[c]=n.start,B&&(n.end=n.start,
n.start="width"===c||"height"===c?1:0))}}],sa={"*":[function(b,c){var d,e,m=this.createTween(b,c),g=Od.exec(c),n=m.cur(),l=+n||0,r=1,q=20;if(g){d=+g[2];e=g[3]||(f.cssNumber[b]?"":"px");if("px"!==e&&l){l=f.css(m.elem,b,!0)||d||1;do r=r||".5",l/=r,f.style(m.elem,b,l+e);while(r!==(r=m.cur()/n)&&1!==r&&--q)}m.unit=e;m.start=l;m.end=g[1]?l+(g[1]+1)*d:d}return m}]};f.Animation=f.extend(Bb,{tweener:function(b,c){f.isFunction(b)?(c=b,b=["*"]):b=b.split(" ");for(var d,e=0,m=b.length;e<m;e++)d=b[e],sa[d]=sa[d]||
[],sa[d].unshift(c)},prefilter:function(b,c){c?Aa.unshift(b):Aa.push(b)}});f.Tween=R;R.prototype={constructor:R,init:function(b,c,d,e,m,g){this.elem=b;this.prop=d;this.easing=m||"swing";this.options=c;this.start=this.now=this.cur();this.end=e;this.unit=g||(f.cssNumber[d]?"":"px")},cur:function(){var b=R.propHooks[this.prop];return b&&b.get?b.get(this):R.propHooks._default.get(this)},run:function(b){var c,d=R.propHooks[this.prop];return this.options.duration?this.pos=c=f.easing[this.easing](b,this.options.duration*
b,0,1,this.options.duration):this.pos=c=b,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):R.propHooks._default.set(this),this}};R.prototype.init.prototype=R.prototype;R.propHooks={_default:{get:function(b){var c;return null==b.elem[b.prop]||b.elem.style&&null!=b.elem.style[b.prop]?(c=f.css(b.elem,b.prop,!1,""),!c||"auto"===c?0:c):b.elem[b.prop]},set:function(b){f.fx.step[b.prop]?f.fx.step[b.prop](b):b.elem.style&&
(null!=b.elem.style[f.cssProps[b.prop]]||f.cssHooks[b.prop])?f.style(b.elem,b.prop,b.now+b.unit):b.elem[b.prop]=b.now}}};R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};f.each(["toggle","show","hide"],function(b,c){var d=f.fn[c];f.fn[c]=function(e,m,g){return null==e||"boolean"==typeof e||!b&&f.isFunction(e)&&f.isFunction(m)?d.apply(this,arguments):this.animate(Ca(c,!0),e,m,g)}});f.fn.extend({fadeTo:function(b,c,d,f){return this.filter(M).css("opacity",
0).show().end().animate({opacity:c},b,d,f)},animate:function(b,c,d,e){var m=f.isEmptyObject(b),g=f.speed(c,d,e);c=function(){var c=Bb(this,f.extend({},b),g);m&&c.stop(!0)};return m||!1===g.queue?this.each(c):this.queue(g.queue,c)},stop:function(b,d,e){var m=function(b){var c=b.stop;delete b.stop;c(e)};return"string"!=typeof b&&(e=d,d=b,b=c),d&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var c=!0,d=null!=b&&b+"queueHooks",j=f.timers,g=f._data(this);if(d)g[d]&&g[d].stop&&m(g[d]);else for(d in g)g[d]&&
g[d].stop&&Pd.test(d)&&m(g[d]);for(d=j.length;d--;)j[d].elem===this&&(null==b||j[d].queue===b)&&(j[d].anim.stop(e),c=!1,j.splice(d,1));(c||!e)&&f.dequeue(this,b)})}});f.each({slideDown:Ca("show"),slideUp:Ca("hide"),slideToggle:Ca("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){f.fn[b]=function(b,d,f){return this.animate(c,b,d,f)}});f.speed=function(b,c,d){var e=b&&"object"==typeof b?f.extend({},b):{complete:d||!d&&c||f.isFunction(b)&&b,duration:b,
easing:d&&c||c&&!f.isFunction(c)&&c};e.duration=f.fx.off?0:"number"==typeof e.duration?e.duration:e.duration in f.fx.speeds?f.fx.speeds[e.duration]:f.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";return e.old=e.complete,e.complete=function(){f.isFunction(e.old)&&e.old.call(this);e.queue&&f.dequeue(this,e.queue)},e};f.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2}};f.timers=[];f.fx=R.prototype.init;f.fx.tick=function(){for(var b,c=f.timers,
d=0;d<c.length;d++)b=c[d],!b()&&c[d]===b&&c.splice(d--,1);c.length||f.fx.stop()};f.fx.timer=function(b){b()&&f.timers.push(b)&&!Wa&&(Wa=setInterval(f.fx.tick,f.fx.interval))};f.fx.interval=13;f.fx.stop=function(){clearInterval(Wa);Wa=null};f.fx.speeds={slow:600,fast:200,_default:400};f.fx.step={};f.expr&&f.expr.filters&&(f.expr.filters.animated=function(b){return f.grep(f.timers,function(c){return b===c.elem}).length});var rc=/^(?:body|html)$/i;f.fn.offset=function(b){if(arguments.length)return b===
c?this:this.each(function(c){f.offset.setOffset(this,b,c)});var d,e,m,g,n,l,r,q={top:0,left:0},s=this[0],p=s&&s.ownerDocument;if(p)return(e=p.body)===s?f.offset.bodyOffset(s):(d=p.documentElement,f.contains(d,s)?("undefined"!=typeof s.getBoundingClientRect&&(q=s.getBoundingClientRect()),m=Cb(p),g=d.clientTop||e.clientTop||0,n=d.clientLeft||e.clientLeft||0,l=m.pageYOffset||d.scrollTop,r=m.pageXOffset||d.scrollLeft,{top:q.top+l-g,left:q.left+r-n}):q)};f.offset={bodyOffset:function(b){var c=b.offsetTop,
d=b.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(f.css(b,"marginTop"))||0,d+=parseFloat(f.css(b,"marginLeft"))||0),{top:c,left:d}},setOffset:function(b,c,d){var e=f.css(b,"position");"static"===e&&(b.style.position="relative");var m=f(b),g=m.offset(),n=f.css(b,"top"),l=f.css(b,"left"),r={},q={},s,p;("absolute"===e||"fixed"===e)&&-1<f.inArray("auto",[n,l])?(q=m.position(),s=q.top,p=q.left):(s=parseFloat(n)||0,p=parseFloat(l)||0);f.isFunction(c)&&(c=c.call(b,d,g));null!=
c.top&&(r.top=c.top-g.top+s);null!=c.left&&(r.left=c.left-g.left+p);"using"in c?c.using.call(b,r):m.css(r)}};f.fn.extend({position:function(){if(this[0]){var b=this[0],c=this.offsetParent(),d=this.offset(),e=rc.test(c[0].nodeName)?{top:0,left:0}:c.offset();return d.top-=parseFloat(f.css(b,"marginTop"))||0,d.left-=parseFloat(f.css(b,"marginLeft"))||0,e.top+=parseFloat(f.css(c[0],"borderTopWidth"))||0,e.left+=parseFloat(f.css(c[0],"borderLeftWidth"))||0,{top:d.top-e.top,left:d.left-e.left}}},offsetParent:function(){return this.map(function(){for(var b=
this.offsetParent||A.body;b&&!rc.test(b.nodeName)&&"static"===f.css(b,"position");)b=b.offsetParent;return b||A.body})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,d){var e=/Y/.test(d);f.fn[b]=function(m){return f.access(this,function(b,m,g){var n=Cb(b);if(g===c)return n?d in n?n[d]:n.document.documentElement[m]:b[m];n?n.scrollTo(e?f(n).scrollLeft():g,e?g:f(n).scrollTop()):b[m]=g},b,m,arguments.length,null)}});f.each({Height:"height",Width:"width"},function(b,d){f.each({padding:"inner"+
b,content:d,"":"outer"+b},function(e,m){f.fn[m]=function(m,g){var n=arguments.length&&(e||"boolean"!=typeof m),l=e||(!0===m||!0===g?"margin":"border");return f.access(this,function(d,e,m){var j;return f.isWindow(d)?d.document.documentElement["client"+b]:9===d.nodeType?(j=d.documentElement,Math.max(d.body["scroll"+b],j["scroll"+b],d.body["offset"+b],j["offset"+b],j["client"+b])):m===c?f.css(d,e,m,l):f.style(d,e,m,l)},d,n?m:c,n,null)}})});b.jQuery=b.$=f;"function"==typeof define&&define.amd&&define.amd.jQuery&&
define("jquery",[],function(){return f})})(window);var portraitMode=!1,mobilePortraitWidth=480,mobilePortraitHeight=640,mobileLandscapeWidth=640,mobileLandscapeHeight=480,mobileWidth=portraitMode?mobilePortraitWidth:mobileLandscapeWidth,mobileHeight=portraitMode?mobilePortraitHeight:mobileLandscapeHeight,desktopWidth=640,desktopHeight=480,w,h,multiplier,destW,destH,dynamicClickableEntityDivs={},coreDivsToResize=["game","play","orientate"],advancedDivsToResize={MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+
20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll2:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd2:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll3:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd3:{"box-width":_SETTINGS.Ad.Mobile.End.Width+
2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20}};
function adjustLayers(b){for(i=0;i<coreDivsToResize.length;i++)ig.ua.mobile?($("#"+coreDivsToResize[i]).width(w),$("#"+coreDivsToResize[i]).height(h)):($("#"+coreDivsToResize[i]).width(destW),$("#"+coreDivsToResize[i]).height(destH),$("#"+coreDivsToResize[i]).css("left",b?0:w/2-destW/2));for(key in advancedDivsToResize)try{$("#"+key).width(w),$("#"+key).height(h),$("#"+key+"-Box").css("left",(w-advancedDivsToResize[key]["box-width"])/2),$("#"+key+"-Box").css("top",(h-advancedDivsToResize[key]["box-height"])/
2)}catch(c){console.log(c)}$("#ajaxbar").width(w);$("#ajaxbar").height(h)}
function sizeHandler(){$("#game")&&(w=window.innerWidth,h=window.innerHeight,ig.ua.mobile?(multiplier=Math.min(h/mobileHeight,w/mobileWidth),destW=mobileWidth*multiplier,destH=mobileHeight*multiplier):(multiplier=Math.min(h/desktopHeight,w/desktopWidth),destW=desktopWidth*multiplier,destH=desktopHeight*multiplier),widthRatio=window.innerWidth/mobileWidth,heightRatio=window.innerHeight/mobileHeight,adjustLayers(),window.scrollTo(0,1))}
function orientationHandler(){console.log("changing orientation ...");ig.ua.mobile&&((portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth)?($("#orientate").show(),$("#game").hide()):($("#orientate").hide(),$("#game").show()));sizeHandler()}
function fixSamsungHandler(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",
function(b){b.preventDefault();return!1},!1))}window.addEventListener("resize",function(){orientationHandler()},!1);window.addEventListener("orientationchange",function(){orientationHandler()},!1);document.ontouchmove=function(b){window.scrollTo(0,1);b.preventDefault()};function getInternetExplorerVersion(){var b=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b}var ie=getInternetExplorerVersion();function getQueryVariable(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==b)return decodeURIComponent(e[1])}};this.jukebox={};
jukebox.Player=function(b,c){this.id=++jukebox.__jukeboxId;this.origin=c||null;this.settings={};for(var d in this.defaults)this.settings[d]=this.defaults[d];if("[object Object]"===Object.prototype.toString.call(b))for(var e in b)this.settings[e]=b[e];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||
null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var b=this,c=this.settings,d={},e;jukebox.Manager&&void 0!==jukebox.Manager.features&&(d=jukebox.Manager.features);if(!0===d.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var g=function(c){b.__addToManager(c)};
this.context.addEventListener("canplaythrough",g,!0);window.setTimeout(function(){b.context.removeEventListener("canplaythrough",g,!0);g("timeout")},c.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(e in this.HTML5API)this[e]=this.HTML5API[e];1<d.channels?!0===c.autoplay?this.context.autoplay=!0:void 0!==c.spritemap[c.autoplay]&&this.play(c.autoplay):1===d.channels&&void 0!==c.spritemap[c.autoplay]&&(this.backgroundMusic=c.spritemap[c.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(c.autoplay));1==d.channels&&!0!==c.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==b.isPlaying&&(b.pause(),b.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){b.__wasAutoPaused&&(b.resume(),delete b._wasAutoPaused)}))}else if(!0===d.flashaudio){for(e in this.FLASHAPI)this[e]=this.FLASHAPI[e];d=["id=jukebox-flashstream-"+this.id,"autoplay="+c.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(d);
!0===c.autoplay?this.play(0):c.spritemap[c.autoplay]&&this.play(c.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(b){var c,d=this.settings.flashMediaElement,e,g={flashvars:b.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){c=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(c);var l=document.createElement("object");
l.id="jukebox-flashstream-"+this.id;l.setAttribute("type","application/x-shockwave-flash");l.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");l.setAttribute("width","0");l.setAttribute("height","0");g.movie=d+"?x="+(Date.now?Date.now():+new Date);g.flashvars=b.join("&amp;");for(e in g)b=document.createElement("param"),b.setAttribute("name",e),b.setAttribute("value",g[e]),l.appendChild(b);c.outerHTML=l.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{c=
document.createElement("embed");c.id="jukebox-flashstream-"+this.id;c.setAttribute("type","application/x-shockwave-flash");c.setAttribute("width","100");c.setAttribute("height","100");g.play=!1;g.loop=!1;g.src=d+"?x="+(Date.now?Date.now():+new Date);for(e in g)c.setAttribute(e,g[e]);document.getElementsByTagName("body")[0].appendChild(c);this.context=c}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var b=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
b,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(b-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(b,c){if(null!==this.isPlaying&&!0!==c)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(b,this.id);else{var d=this.settings.spritemap,e;if(void 0!==d[b])e=d[b].start;else if("number"===typeof b){e=b;for(var g in d)if(e>=d[g].start&&e<=
d[g].end){b=g;break}}void 0!==e&&"[object Object]"===Object.prototype.toString.call(d[b])&&(this.isPlaying=this.settings.spritemap[b],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(e))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(b){b="number"===
typeof b?b:this.__lastPosition;if(null!==b)return this.play(b),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(b){this.context.volume=b;return 1E-4>Math.abs(this.context.volume-b)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(b){try{return this.context.currentTime=b,!0}catch(c){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(b){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(b),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(b){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(b):!1}}};if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(b){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var c in this.defaults)this.settings[c]=this.defaults[c];if("[object Object]"===Object.prototype.toString.call(b))for(var d in b)this.settings[d]=b[d];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var b=window.Audio&&new Audio;if(b&&b.canPlayType&&!1===this.settings.useFlash){for(var c=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
d,e,g=0,l=c.length;g<l;g++)if(e=c[g].e,c[g].m.length&&"object"===typeof c[g].m)for(var p=0,y=c[g].m.length;p<y;p++)if(d=c[g].m[p],""!==b.canPlayType(d)){this.codecs[e]=d;break}else this.codecs[e]||(this.codecs[e]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;b.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(b.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(q){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(b){return this.__players&&void 0!==this.__players[b]?this.__players[b]:null},__getClone:function(b,c){for(var d in this.__clones){var e=this.__clones[d];if(null===e.isPlaying&&e.origin===b)return e}if("[object Object]"===Object.prototype.toString.call(c)){d={};for(var g in c)d[g]=c[g];d.autoplay=!1;g=new jukebox.Player(d,b);g.isClone=!0;g.wasReady=!1;return this.__clones[g.id]=g}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var b=this.__queue[0],c=this.__getPlayerById(b.origin);if(null!==c){var d=this.__getClone(b.origin,c.settings);null!==d&&(!0===this.features.volume&&(c=this.__players[b.origin])&&d.setVolume(c.getVolume()),this.add(d),d.play(b.pointer,!0))}this.__queue.splice(0,1)}else for(d in this.__queue.length&&1===this.features.channels&&(b=this.__queue[0],c=this.__getPlayerById(b.origin),null!==c&&c.play(b.pointer,!0),this.__queue.splice(0,1)),this.__players)b=this.__players[d],
c=b.getCurrentTime()||0,b.isPlaying&&!1===b.wasReady?b.wasReady=b.setCurrentTime(b.isPlaying.start):b.isPlaying&&!0===b.wasReady?c>b.isPlaying.end&&(!0===b.isPlaying.loop?b.play(b.isPlaying.start,!0):b.stop()):b.isClone&&null===b.isPlaying?this.remove(b):void 0!==b.backgroundMusic&&null===b.isPlaying&&c>b.backgroundMusic.end&&b.backgroundHackForiOS()},getPlayableResource:function(b){"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);for(var c=0,d=b.length;c<d;c++){var e=b[c],g=e.match(/\.([^\.]*)$/)[1];
if(g&&this.codecs[g])return e}return null},add:function(b){return b instanceof jukebox.Player&&void 0===this.__players[b.id]?(this.__playersLength++,this.__players[b.id]=b,!0):!1},remove:function(b){return b instanceof jukebox.Player&&void 0!==this.__players[b.id]?(this.__playersLength--,delete this.__players[b.id],!0):!1},addToQueue:function(b,c){return("string"===typeof b||"number"===typeof b)&&void 0!==this.__players[c]?(this.__queue.push({pointer:b,origin:c}),!0):!1}};(function(){var b={},c=null,d=!0,e=!1;if("undefined"!==typeof AudioContext)c=new AudioContext;else if("undefined"!==typeof webkitAudioContext)c=new webkitAudioContext;else if("undefined"!==typeof Audio){d=!1;try{new Audio}catch(g){e=!0}}else d=!1,e=!0;if(d){var l="undefined"===typeof c.createGain?c.createGainNode():c.createGain();l.gain.value=1;l.connect(c.destination)}var p=function(){this._volume=1;this._muted=!1;this.usingWebAudio=d;this.noAudio=e;this._howls=[]};p.prototype={volume:function(b){b=
parseFloat(b);if(0<=b&&1>=b){this._volume=b;d&&(l.gain.value=b);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(b=0;b<this._howls[c]._audioNode.length;b++)this._howls[c]._audioNode[b].volume=this._howls[c]._volume*this._volume;return this}return d?l.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(b){this._muted=b;d&&(l.gain.value=b?0:this._volume);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&
!1===this._howls[c]._webAudio)for(var e=0;e<this._howls[c]._audioNode.length;e++)this._howls[c]._audioNode[e].muted=b}};var y=new p,p=null;if(!e)var p=new Audio,q={mp3:!!p.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!p.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!p.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(p.canPlayType("audio/x-m4a;")||p.canPlayType("audio/aac;")).replace(/^no$/,
""),mp4:!!(p.canPlayType("audio/x-mp4;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")};var s=function(b){this._autoplay=b.autoplay||!1;this._buffer=b.buffer||!1;this._duration=b.duration||0;this._format=b.format||null;this._loop=b.loop||!1;this._loaded=!1;this._sprite=b.sprite||{};this._src=b.src||"";this._pos3d=b.pos3d||[0,0,-0.5];this._volume=void 0!==b.volume?b.volume:1;this._urls=b.urls||[];this._rate=b.rate||1;this._onload=
[b.onload||function(){}];this._onloaderror=[b.onloaderror||function(){}];this._onend=[b.onend||function(){}];this._onpause=[b.onpause||function(){}];this._onplay=[b.onplay||function(){}];this._onendTimer=[];this._webAudio=d&&!this._buffer;this._audioNode=[];this._webAudio&&this._setupAudioNode();y._howls.push(this);this.load()};s.prototype={load:function(){var d=this,g=null;if(!e){for(var l=0;l<d._urls.length;l++){var s,p;if(d._format)s=d._format;else if(p=d._urls[l].toLowerCase().split("?")[0],s=
(s=p.match(/.+\.([^?]+)(\?|$)/))&&2<=s.length?s:p.match(/data\:audio\/([^?]+);/))s=s[1];else{d.on("loaderror");return}if(q[s]){g=d._urls[l];break}}if(g){d._src=g;if(d._webAudio){var D=g;if(D in b)d._duration=b[D].duration,t(d);else{var H=new XMLHttpRequest;H.open("GET",D,!0);H.responseType="arraybuffer";H.onload=function(){c.decodeAudioData(H.response,function(c){c&&(b[D]=c,t(d,c))},function(){d.on("loaderror")})};H.onerror=function(){d._webAudio&&(d._buffer=!0,d._webAudio=!1,d._audioNode=[],delete d._gainNode,
d.load())};try{H.send()}catch(Xa){H.onerror()}}}else{var E=new Audio;d._audioNode.push(E);E.src=g;E._pos=0;E.preload="auto";E.volume=y._muted?0:d._volume*y.volume();b[g]=d;var O=function(){d._duration=Math.ceil(10*E.duration)/10;0===Object.getOwnPropertyNames(d._sprite).length&&(d._sprite={_default:[0,1E3*d._duration]});d._loaded||(d._loaded=!0,d.on("load"));d._autoplay&&d.play();E.removeEventListener("canplaythrough",O,!1)};E.addEventListener("canplaythrough",O,!1);E.load()}return d}}d.on("loaderror")},
urls:function(b){return b?(this.stop(),this._urls="string"===typeof b?[b]:b,this._loaded=!1,this.load(),this):this._urls},play:function(d,e){var g=this;"function"===typeof d&&(e=d);if(!d||"function"===typeof d)d="_default";if(!g._loaded)return g.on("load",function(){g.play(d,e)}),g;if(!g._sprite[d])return"function"===typeof e&&e(),g;g._inactiveNode(function(l){l._sprite=d;var q=0<l._pos?l._pos:g._sprite[d][0]/1E3,s=g._sprite[d][1]/1E3-l._pos,p=!(!g._loop&&!g._sprite[d][2]),t="string"===typeof e?e:
Math.round(Date.now()*Math.random())+"",E,O={id:t,sprite:d,loop:p};E=setTimeout(function(){!g._webAudio&&p&&g.stop(O.id,O.timer).play(d,O.id);g._webAudio&&!p&&(g._nodeById(O.id).paused=!0,g._nodeById(O.id)._pos=0);!g._webAudio&&!p&&g.stop(O.id,O.timer);g.on("end",t)},1E3*s);g._onendTimer.push(E);O.timer=g._onendTimer[g._onendTimer.length-1];if(g._webAudio){E=g._sprite[d][0]/1E3;var L=g._sprite[d][1]/1E3;l.id=t;l.paused=!1;E=[p,E,L];L=g._nodeById(t);L.bufferSource=c.createBufferSource();L.bufferSource.buffer=
b[g._src];L.bufferSource.connect(L.panner);L.bufferSource.loop=E[0];E[0]&&(L.bufferSource.loopStart=E[1],L.bufferSource.loopEnd=E[1]+E[2]);L.bufferSource.playbackRate.value=g._rate;g._playStart=c.currentTime;l.gain.value=g._volume;"undefined"===typeof l.bufferSource.start?l.bufferSource.noteGrainOn(0,q,s):l.bufferSource.start(0,q,s)}else if(4===l.readyState)l.id=t,l.currentTime=q,l.muted=y._muted,l.volume=g._volume*y.volume(),setTimeout(function(){l.play()},0);else{g._clearEndTimer(E);var ya=d,ma=
e,ra=function(){g.play(ya,ma);l.removeEventListener("canplaythrough",ra,!1)};l.addEventListener("canplaythrough",ra,!1);return g}g.on("play");"function"===typeof e&&e(t);return g});return g},pause:function(b,c){var d=this;if(!d._loaded)return d.on("play",function(){d.pause(b)}),d;d._clearEndTimer(c||0);var e=b?d._nodeById(b):d._activeNode();if(e)if(e._pos=d.pos(null,b),d._webAudio){if(!e.bufferSource||e.paused)return d;e.paused=!0;"undefined"===typeof e.bufferSource.stop?e.bufferSource.noteOff(0):
e.bufferSource.stop(0)}else e.pause();d.on("pause");return d},stop:function(b,c){var d=this;if(!d._loaded)return d.on("play",function(){d.stop(b)}),d;d._clearEndTimer(c||0);var e=b?d._nodeById(b):d._activeNode();if(e)if(e._pos=0,d._webAudio){if(!e.bufferSource||e.paused)return d;e.paused=!0;"undefined"===typeof e.bufferSource.stop?e.bufferSource.noteOff(0):e.bufferSource.stop(0)}else e.pause(),e.currentTime=0;return d},mute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.mute(b)}),
c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=0:d.volume=0);return c},unmute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.unmute(b)}),c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=c._volume:d.volume=c._volume);return c},volume:function(b,c){var d=this;b=parseFloat(b);if(0<=b&&1>=b){d._volume=b;if(!d._loaded)return d.on("play",function(){d.volume(b,c)}),d;var e=c?d._nodeById(c):d._activeNode();e&&(d._webAudio?e.gain.value=b:e.volume=
b*y.volume());return d}return d._volume},loop:function(b){return"boolean"===typeof b?(this._loop=b,this):this._loop},sprite:function(b){return"object"===typeof b?(this._sprite=b,this):this._sprite},pos:function(b,d){var e=this;if(!e._loaded)return e.on("load",function(){e.pos(b)}),"number"===typeof b?e:e._pos||0;b=parseFloat(b);var g=d?e._nodeById(d):e._activeNode();if(g)return 0<=b?(e.pause(d),g._pos=b,e.play(g._sprite,d),e):e._webAudio?g._pos+(c.currentTime-e._playStart):g.currentTime;if(0<=b)return e;
for(g=0;g<e._audioNode.length;g++)if(e._audioNode[g].paused&&4===e._audioNode[g].readyState)return e._webAudio?e._audioNode[g]._pos:e._audioNode[g].currentTime},pos3d:function(b,c,d,e){var g=this;c="undefined"===typeof c||!c?0:c;d="undefined"===typeof d||!d?-0.5:d;if(!g._loaded)return g.on("play",function(){g.pos3d(b,c,d,e)}),g;if(0<=b||0>b){if(g._webAudio){var l=e?g._nodeById(e):g._activeNode();l&&(g._pos3d=[b,c,d],l.panner.setPosition(b,c,d))}}else return g._pos3d;return g},fade:function(b,c,d,
e,g){var l=this,q=Math.abs(b-c),s=b>c?"down":"up",q=q/0.01,p=d/q;if(!l._loaded)return l.on("load",function(){l.fade(b,c,d,e,g)}),l;l.volume(b,g);for(var t=1;t<=q;t++)(function(){var b=Math.round(1E3*(l._volume+("up"===s?0.01:-0.01)*t))/1E3;setTimeout(function(){l.volume(b,g);b===c&&e&&e()},p*t)})()},fadeIn:function(b,c,d){return this.volume(0).play().fade(0,b,c,d)},fadeOut:function(b,c,d,e){var g=this;return g.fade(g._volume,b,c,function(){d&&d();g.pause(e);g.on("end")},e)},_nodeById:function(b){for(var c=
this._audioNode[0],d=0;d<this._audioNode.length;d++)if(this._audioNode[d].id===b){c=this._audioNode[d];break}return c},_activeNode:function(){for(var b=null,c=0;c<this._audioNode.length;c++)if(!this._audioNode[c].paused){b=this._audioNode[c];break}this._drainPool();return b},_inactiveNode:function(b){for(var c=null,d=0;d<this._audioNode.length;d++)if(this._audioNode[d].paused&&4===this._audioNode[d].readyState){b(this._audioNode[d]);c=!0;break}this._drainPool();if(!c){var e;this._webAudio?(e=this._setupAudioNode(),
b(e)):(this.load(),e=this._audioNode[this._audioNode.length-1],e.addEventListener("loadedmetadata",function(){b(e)}))}},_drainPool:function(){var b=0,c;for(c=0;c<this._audioNode.length;c++)this._audioNode[c].paused&&b++;for(c=this._audioNode.length-1;0<=c&&!(5>=b);c--)this._audioNode[c].paused&&(this._webAudio&&this._audioNode[c].disconnect(0),b--,this._audioNode.splice(c,1))},_clearEndTimer:function(b){b=this._onendTimer.indexOf(b);b=0<=b?b:0;this._onendTimer[b]&&(clearTimeout(this._onendTimer[b]),
this._onendTimer.splice(b,1))},_setupAudioNode:function(){var b=this._audioNode,d=this._audioNode.length;b[d]="undefined"===typeof c.createGain?c.createGainNode():c.createGain();b[d].gain.value=this._volume;b[d].paused=!0;b[d]._pos=0;b[d].readyState=4;b[d].connect(l);b[d].panner=c.createPanner();b[d].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);b[d].panner.connect(b[d]);return b[d]},on:function(b,c){var d=this["_on"+b];if("function"===typeof c)d.push(c);else for(var e=0;e<d.length;e++)c?
d[e].call(this,c):d[e].call(this);return this},off:function(b,c){for(var d=this["_on"+b],e=c.toString(),g=0;g<d.length;g++)if(e===d[g].toString()){d.splice(g,1);break}return this},unload:function(){for(var c=this._audioNode,d=0;d<this._audioNode.length;d++)c[d].paused||this.stop(c[d].id),this._webAudio?c[d].disconnect(0):c[d].src="";c=y._howls.indexOf(this);null!==c&&0<=c&&y._howls.splice(c,1);delete b[this._src]}};if(d)var t=function(b,c){b._duration=c?c.duration:b._duration;0===Object.getOwnPropertyNames(b._sprite).length&&
(b._sprite={_default:[0,1E3*b._duration]});b._loaded||(b._loaded=!0,b.on("load"));b._autoplay&&b.play()};"function"===typeof define&&define.amd&&define(function(){return{Howler:y,Howl:s}});"undefined"!==typeof exports&&(exports.Howler=y,exports.Howl=s);window.Howler=y;window.Howl=s})();(function(b){Number.prototype.map=function(b,c,d,e){return d+(e-d)*((this-b)/(c-b))};Number.prototype.limit=function(b,c){return Math.min(c,Math.max(b,this))};Number.prototype.round=function(b){b=Math.pow(10,b||0);return Math.round(this*b)/b};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(b){for(var c=this.length;c--;)this[c]===b&&this.splice(c,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(b){var c=this;return function(){var d=Array.prototype.slice.call(arguments);return c.apply(b||null,d)}};b.ig={game:null,debug:null,version:"1.20",global:b,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:b.ImpactPrefix||"",
lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(b){return"#"==b.charAt(0)?document.getElementById(b.substr(1)):document.getElementsByTagName(b)},$new:function(b){return document.createElement(b)},copy:function(b){if(!b||"object"!=typeof b||b instanceof HTMLElement||b instanceof ig.Class)return b;if(b instanceof Array)for(var c=[],d=0,e=b.length;d<e;d++)c[d]=ig.copy(b[d]);else for(d in c={},b)c[d]=ig.copy(b[d]);return c},merge:function(b,c){for(var d in c){var e=c[d];if("object"!=
typeof e||e instanceof HTMLElement||e instanceof ig.Class)b[d]=e;else{if(!b[d]||"object"!=typeof b[d])b[d]=e instanceof Array?[]:{};ig.merge(b[d],e)}}return b},ksort:function(b){if(!b||"object"!=typeof b)return[];var c=[],d=[],e;for(e in b)c.push(e);c.sort();for(e=0;e<c.length;e++)d.push(b[c[e]]);return d},setVendorAttribute:function(b,c,d){var e=c.charAt(0).toUpperCase()+c.substr(1);b[c]=b["ms"+e]=b["moz"+e]=b["webkit"+e]=b["o"+e]=d},getVendorAttribute:function(b,c){var d=c.charAt(0).toUpperCase()+
c.substr(1);return b[c]||b["ms"+d]||b["moz"+d]||b["webkit"+d]||b["o"+d]},normalizeVendorAttribute:function(b,c){var d=ig.getVendorAttribute(b,c);!b[c]&&d&&(b[c]=d)},getImagePixels:function(b,c,d,e,g){var l=ig.$new("canvas");l.width=b.width;l.height=b.height;var p=l.getContext("2d");ig.System.SCALE.CRISP(l,p);var y=ig.getVendorAttribute(p,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(p,"getImageDataHD");var D=b.width/y,H=b.height/y;l.width=Math.ceil(D);l.height=Math.ceil(H);p.drawImage(b,
0,0,D,H);return 1===y?p.getImageData(c,d,e,g):p.getImageDataHD(c,d,e,g)},module:function(b){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[b]&&ig.modules[b].body)throw"Module '"+b+"' is already defined";ig._current={name:b,requires:[],loaded:!1,body:null};ig.modules[b]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(b){ig._current.body=b;ig._current=
null;ig._initDOMReady()},addResource:function(b){ig.resources.push(b)},setNocache:function(b){ig.nocache=b?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(b,c){ig.modules[b]={name:b,requires:[],loaded:!1,body:null};ig._waitForOnload++;var d=ig.prefix+ig.lib+b.replace(/\./g,"/")+".js"+ig.nocache,e=ig.$new("script");e.type="text/javascript";e.src=d;e.onload=function(){ig._waitForOnload--;ig._execModules()};e.onerror=function(){throw"Failed to load module "+
b+" at "+d+" required from "+c;};ig.$("head")[0].appendChild(e)},_execModules:function(){for(var b=!1,c=0;c<ig._loadQueue.length;c++){for(var d=ig._loadQueue[c],e=!0,g=0;g<d.requires.length;g++){var l=d.requires[g];ig.modules[l]?ig.modules[l].loaded||(e=!1):(e=!1,ig._loadScript(l,d.name))}e&&d.body&&(ig._loadQueue.splice(c,1),d.loaded=!0,d.body(),b=!0,c--)}if(b)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){b=[];for(c=0;c<ig._loadQueue.length;c++){e=[];l=ig._loadQueue[c].requires;
for(g=0;g<l.length;g++)d=ig.modules[l[g]],(!d||!d.loaded)&&e.push(l[g]);b.push(ig._loadQueue[c].name+" (requires: "+e.join(", ")+")")}throw"Unresolved (circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules:\n"+b.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&
ig.setNocache(!0);ig.ua.pixelRatio=b.devicePixelRatio||1;ig.ua.viewport={width:b.innerWidth,height:b.innerHeight};ig.ua.screen={width:b.screen.availWidth*ig.ua.pixelRatio,height:b.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
b||b.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),b.addEventListener("load",ig._DOMReady,!1)))}};for(var c=["ms","moz","webkit","o"],
d=0;d<c.length&&!b.requestAnimationFrame;d++)b.requestAnimationFrame=b[c[d]+"RequestAnimationFrame"];if(b.requestAnimationFrame){var e=1,g={};b.ig.setAnimation=function(c,d){var l=e++;g[l]=!0;var m=function(){g[l]&&(b.requestAnimationFrame(m,d),c())};b.requestAnimationFrame(m,d);return l};b.ig.clearAnimation=function(b){delete g[b]}}else b.ig.setAnimation=function(c){return b.setInterval(c,1E3/60)},b.ig.clearAnimation=function(c){b.clearInterval(c)};var l=!1,p=/xyz/.test(function(){xyz})?/\bparent\b/:
/.*/;b.ig.Class=function(){};var y=function(b){var c=this.prototype,d={},e;for(e in b)"function"==typeof b[e]&&"function"==typeof c[e]&&p.test(b[e])?(d[e]=c[e],c[e]=function(b,c){return function(){var e=this.parent;this.parent=d[b];var g=c.apply(this,arguments);this.parent=e;return g}}(e,b[e])):c[e]=b[e]};b.ig.Class.extend=function(c){function d(){if(!l){if(this.staticInstantiate){var b=this.staticInstantiate.apply(this,arguments);if(b)return b}for(var c in this)"object"==typeof this[c]&&(this[c]=
ig.copy(this[c]));this.init&&this.init.apply(this,arguments)}return this}var e=this.prototype;l=!0;var g=new this;l=!1;for(var n in c)g[n]="function"==typeof c[n]&&"function"==typeof e[n]&&p.test(c[n])?function(b,c){return function(){var d=this.parent;this.parent=e[b];var g=c.apply(this,arguments);this.parent=d;return g}}(n,c[n]):c[n];d.prototype=g;d.constructor=d;d.extend=b.ig.Class.extend;d.inject=y;return d}})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return ig.Image.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(b){var c=this.width*b,d=this.height*b,e=ig.$new("canvas");
e.width=this.width;e.height=this.height;e=e.getContext("2d");e.drawImage(this.data,0,0,this.width,this.height,0,0,this.width,this.height);var e=e.getImageData(0,0,this.width,this.height),g=ig.$new("canvas");g.width=c;g.height=d;for(var l=g.getContext("2d"),p=l.getImageData(0,0,c,d),y=0;y<d;y++)for(var q=0;q<c;q++){var s=4*(Math.floor(y/b)*this.width+Math.floor(q/b)),t=4*(y*c+q);p.data[t]=e.data[s];p.data[t+1]=e.data[s+1];p.data[t+2]=e.data[s+2];p.data[t+3]=e.data[s+3]}l.putImageData(p,0,0);this.data=
g},draw:function(b,c,d,e,g,l){if(this.loaded){var p=ig.system.scale;g=(g?g:this.width)*p;l=(l?l:this.height)*p;ig.system.context.drawImage(this.data,d?d*p:0,e?e*p:0,g,l,ig.system.getDrawPos(b),ig.system.getDrawPos(c),g,l);ig.Image.drawCount++}},drawTile:function(b,c,d,e,g,l,p){g=g?g:e;if(this.loaded&&!(e>this.width||g>this.height)){var y=ig.system.scale,q=Math.floor(e*y),s=Math.floor(g*y),t=l?-1:1,m=p?-1:1;if(l||p)ig.system.context.save(),ig.system.context.scale(t,m);ig.system.context.drawImage(this.data,
Math.floor(d*e)%this.width*y,Math.floor(d*e/this.width)*g*y,q,s,ig.system.getDrawPos(b)*t-(l?q:0),ig.system.getDrawPos(c)*m-(p?s:0),q,s);(l||p)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var b in ig.Image.cache)ig.Image.cache[b].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(b){this._loadMetrics(this.data);this.parent(b)},widthForString:function(b){if(-1!==b.indexOf("\n")){b=b.split("\n");for(var c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(b)},_widthForLine:function(b){for(var c=0,d=0;d<b.length;d++)c+=this.widthMap[b.charCodeAt(d)-this.firstChar]+
this.letterSpacing;return c},heightForString:function(b){return b.split("\n").length*(this.height+this.lineSpacing)},draw:function(b,c,d,e){"string"!=typeof b&&(b=b.toString());if(-1!==b.indexOf("\n")){b=b.split("\n");for(var g=this.height+this.lineSpacing,l=0;l<b.length;l++)this.draw(b[l],c,d+l*g,e)}else{if(e==ig.Font.ALIGN.RIGHT||e==ig.Font.ALIGN.CENTER)l=this._widthForLine(b),c-=e==ig.Font.ALIGN.CENTER?l/2:l;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(l=0;l<b.length;l++)e=b.charCodeAt(l),
c+=this._drawChar(e-this.firstChar,c,d);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=b.length}},_drawChar:function(b,c,d){if(!this.loaded||0>b||b>=this.indices.length)return 0;var e=ig.system.scale,g=this.widthMap[b]*e,l=(this.height-2)*e;ig.system.context.drawImage(this.data,this.indices[b]*e,0,g,l,ig.system.getDrawPos(c),ig.system.getDrawPos(d),g,l);return this.widthMap[b]+this.letterSpacing},_loadMetrics:function(b){this.height=b.height-1;this.widthMap=[];this.indices=
[];for(var c=ig.getImagePixels(b,0,b.height-1,b.width,1),d=0,e=0,g=0;g<b.width;g++){var l=4*g+3;0!=c.data[l]?e++:0==c.data[l]&&e&&(this.widthMap.push(e),this.indices.push(g-e),d++,e=0)}this.widthMap.push(e);this.indices.push(g-e)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){for(var b=new Audio,c=0;c<ig.Sound.use.length;c++){var d=ig.Sound.use[c];if(b.canPlayType(d.mime)){this.format=d;break}}this.format||(ig.Sound.enabled=!1)},load:function(b,c,d){var e=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(c&&this.clips[b].length<ig.Sound.channels)for(c=this.clips[b].length;c<ig.Sound.channels;c++){var g=new Audio(e);g.load();
this.clips[b].push(g)}return this.clips[b][0]}var l=new Audio(e);d&&(l.addEventListener("canplaythrough",function y(c){l.removeEventListener("canplaythrough",y,!1);d(b,!0,c)},!1),l.addEventListener("error",function(c){d(b,!0,c)},!1));l.preload="auto";l.load();this.clips[b]=[l];if(c)for(c=1;c<ig.Sound.channels;c++)g=new Audio(e),g.load(),this.clips[b].push(g);return l},get:function(b){b=this.clips[b];for(var c=0,d;d=b[c++];)if(d.paused||d.ended)return d.ended&&(d.currentTime=0),d;b[0].pause();b[0].currentTime=
0;return b[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):this.__defineGetter__&&
(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(b,c){if(ig.Sound.enabled){var d=ig.soundManager.load(b instanceof ig.Sound?b.path:b,!1);d.loop=this._loop;d.volume=this._volume;d.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(d);c&&(this.namedTracks[c]=d);this.currentTrack||(this.currentTrack=
d)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){if(this.currentTrack){this.currentTrack.pause();try{this.currentTrack.currentTime=0}catch(b){console.log(b)}}},play:function(b){if(b&&this.namedTracks[b])b=this.namedTracks[b],b!=this.currentTrack&&
(this.stop(),this.currentTrack=b);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var c in this.tracks)this.tracks[c].loop=b},getVolume:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,1);for(var c in this.tracks)this.tracks[c].volume=this._volume},fadeOut:function(b){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(b),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var b=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=b?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=b},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(b,c){this.path=b;this.multiChannel=!1!==c;this.load()},load:function(b){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,b):ig.addResource(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.MP3,ig.Sound.FORMAT.OGG];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(b,c){this.gameClass=b;this.resources=c;this._loadCallbackBound=this._loadCallback.bind(this);for(var d=0;d<this.resources.length;d++)this._unloaded.push(this.resources[d].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var b=
0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(b){b.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(b,c){if(c)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=ig.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var b=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=0;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var b=Date.now();ig.Timer.time+=Math.min((b-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(b,c,d,e,g){this.fps=c;this.clock=new ig.Timer;this.canvas=ig.$(b);this.resize(d,e,g);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode},resize:function(b,c,d){this.width=b;this.height=
c;this.scale=d||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(b){this.running?this.newGameClass=b:this.setGameNow(b)},setGameNow:function(b){ig.game=new b;ig.system.setDelegate(ig.game)},setDelegate:function(b){if("function"==typeof b.run)this.delegate=b,this.startRunLoop();else throw"System.setDelegate: No run() function in object";},stopRunLoop:function(){ig.clearAnimation(this.animationId);
this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(b){this.context.fillStyle=b;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(b){return Math.round(b)*
this.scale},SMOOTH:function(b){return Math.round(b*this.scale)},SUBPIXEL:function(b){return b*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!1);b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",
!0);b.style.imageRendering="";b.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var b=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",b,!1);ig.system.canvas.addEventListener("DOMMouseScroll",b,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(b){var c=this.bindings[0<(b.wheelDelta?b.wheelDelta:-1*b.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];c&&(this.actions[c]=!0,this.presses[c]=!0,this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault())},mousemove:function(b){for(var c=
ig.system.canvas,d=0,e=0;null!=c;)d+=c.offsetLeft,e+=c.offsetTop,c=c.offsetParent;var c=b.pageX,g=b.pageY;b.touches&&(c=b.touches[0].clientX,g=b.touches[0].clientY);this.mouse.x=(c-d)/ig.system.scale;this.mouse.y=(g-e)/ig.system.scale},contextmenu:function(b){this.bindings[ig.KEY.MOUSE2]&&(b.stopPropagation(),b.preventDefault())},keydown:function(b){if("text"!=b.target.type){var c="keydown"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1;("touchstart"==b.type||"mousedown"==b.type)&&this.mousemove(b);
if(c=this.bindings[c])this.actions[c]=!0,this.locks[c]||(this.presses[c]=!0,this.locks[c]=!0),b.stopPropagation(),b.preventDefault()}},keyup:function(b){if("text"!=b.target.type){var c=this.bindings["keyup"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1];c&&(this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault())}},devicemotion:function(b){this.accel=b.accelerationIncludingGravity},bind:function(b,c){0>b?this.initMouse():0<b&&this.initKeyboard();this.bindings[b]=c},bindTouch:function(b,
c){var d=ig.$(b),e=this;d.addEventListener("touchstart",function(b){e.touchStart(b,c)},!1);d.addEventListener("touchend",function(b){e.touchEnd(b,c)},!1)},unbind:function(b){this.delayedKeyup[this.bindings[b]]=!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(b){return this.actions[b]},pressed:function(b){return this.presses[b]},released:function(b){return this.delayedKeyup[b]},clearPressed:function(){for(var b in this.delayedKeyup)this.actions[b]=
!1,this.locks[b]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(b,c){this.actions[c]=!0;this.presses[c]=!0;b.stopPropagation();b.preventDefault();return!1},touchEnd:function(b,c){this.delayedKeyup[c]=!0;b.stopPropagation();b.preventDefault();return!1}})});ig.baked=!0;
ig.module("impact.sound-handler").defines(function(){ig.SoundHandler=ig.Class.extend({formats:{ogg:".ogg",mp3:".mp3"},jukebox:null,pausePosition:null,globalMute:!1,forceMuted:!1,muted:!1,bgmPlaying:!1,soundPlaying:!1,currentSoundPlaying:null,soundBuffer:[],voSoundLoaded:[],sfxSoundLoaded:[],SOUNDID:{},voSoundsToLoad:[],sfxVolume:1,musicVolume:1,sfxSoundsToLoad:[{name:"staticSound",path:"media/audio/play/static"},{name:"openingSound",path:"media/audio/opening/opening"},{name:"kittyopeningSound",path:"media/audio/opening/kittyopening"},
{name:"drop1",path:"media/audio/drop1"},{name:"drop2",path:"media/audio/drop2"},{name:"cycle",path:"media/audio/cycle"},{name:"flipover",path:"media/audio/flipover"},{name:"fanfare",path:"media/audio/fanfare"}],debug:!1,init:function(){ig.ua.mobile?(this.initSfx(),this.setupJukebox()):(this.initSfx(),this.setupDesktopMusic());this.stopBackgroundMusic();this.setupWindowHandler()},allVoSoundLoaded:function(){if(this.voSoundLoaded.length>=this.voSoundsToLoad.length){this.debug&&console.log("Vo ready");
for(index=0;index<this.voSoundLoaded.length;index++)this.voSoundLoaded[index].on("end",function(b){b.isPlaying=!1;this.soundBuffer.pop()}.bind(this,this.voSoundLoaded[index])),this.voSoundLoaded[index].on("play",function(b){b.isPlaying=!0}.bind(this,this.voSoundLoaded[index]));return!0}return!1},allSfxSoundLoaded:function(){return this.sfxSoundLoaded.length>=this.sfxSoundsToLoad.length?!0:!1},stopBackgroundMusic:function(){ig.ua.mobile?(this.pausePosition=this.jukebox.player.pause(),this.bgmPlaying=
!1):(this.bgmPlaying=!1,ig.music.pause())},playBackgroundMusic:function(){ig.ua.mobile?(this.pausePosition?this.jukebox.player.resume(this.pausePosition):this.jukebox.player.play(this.jukebox.player.settings.spritemap.music.start,!0),this.bgmPlaying=!0):(this.bgmPlaying=!0,ig.music.play())},playSound:function(b){if((b=this[b])&&(!this.forceMuted||!this.muted)&&!b.isPlaying)this.soundBuffer.push(b),b.play()},stopAllAndPlaySound:function(b){this.stopAllSounds();this.playSound(b)},stopAllSounds:function(){for(index=
0;index<this.soundBuffer.length;index++)this.soundBuffer[index].isPlaying=!1,this.soundBuffer.splice(0,1)[0].stop()},addSound:function(b,c,d){var e=c+this.formats.ogg;c+=this.formats.mp3;this.SOUNDID[b]=b;this[b]=d?new Howl({urls:[e,c],onload:d}):new Howl({urls:[e,c]})},_muteSounds:function(){for(i=0;i<ig.resources.length;i++)ig.resources[i].multiChannel&&ig.resources[i].stop();Howler.mute();this.debug&&console.log("Sounds muted")},_unMuteSounds:function(){Howler.unmute();ig.Sound.enabled=!0;this.debug&&
console.log("Sounds can play")},focusBlurMute:function(){this.forceMuted||this.mute()},focusBlurUnmute:function(){this.forceMuted||this.unmute()},setForceMuted:function(b){this.forceMuted=b},mute:function(){this._muteSounds();ig.ua.mobile?this.jukebox&&(this.jukebox.player.pause(),this.jukebox.player.setVolume(0.01)):ig.music.volume=0;this.muted=!0},unmute:function(){this._unMuteSounds();ig.ua.mobile?this.jukebox&&(this.jukebox.player.resume(),this.jukebox.player.setVolume(1*this.musicVolume)):ig.music.volume=
1*this.musicVolume;this.muted=!1},setupWindowHandler:function(){"true"===getQueryVariable("webview")?($(window).focus(function(){ig.ua.mobile&&ig.game&&ig.game.resumeGame();ig.soundHandler&&ig.soundHandler.focusBlurUnmute()}),$(window).blur(function(){ig.soundHandler&&ig.soundHandler.focusBlurMute()})):(window.onfocus=function(){ig.ua.mobile&&ig.game&&ig.game.resumeGame();ig.soundHandler&&ig.soundHandler.focusBlurUnmute()},window.onblur=function(){ig.soundHandler&&ig.soundHandler.focusBlurMute()})},
initSfx:function(){for(index=0;index<this.sfxSoundsToLoad.length;index++){var b=function(b){this.sfxSoundLoaded.push(this[b])}.bind(this,this.sfxSoundsToLoad[index].name);this.addSound(this.sfxSoundsToLoad[index].name,this.sfxSoundsToLoad[index].path,b)}},initVoSfx:function(){for(index=0;index<this.voSoundsToLoad.length;index++){var b=function(b){this.voSoundLoaded.push(this[b])}.bind(this,this.voSoundsToLoad[index].name);this.addSound(this.voSoundsToLoad[index].name,this.voSoundsToLoad[index].path,
b)}},setupDesktopMusic:function(){ig.music.add("media/audio/bgm.*","background")},setupJukebox:function(){ig.ua.mobile&&(this.jukebox=new ig.Jukebox)},forceLoopBGM:function(){!this.forceMuted&&(this.jukebox&&this.jukebox.player)&&(this.jukebox.player.getCurrentTime()||this.jukebox.player.resume(),this.jukebox.player.settings.spritemap.music&&this.jukebox.player.settings.spritemap.music.loop?this.jukebox.player.getCurrentTime()>=this.jukebox.player.settings.spritemap.music.end&&this.jukebox.player.resume(this.jukebox.player.settings.spritemap.music.start):
this.jukebox.player.isPlaying&&this.jukebox.player.isPlaying.loop?this.jukebox.player.getCurrentTime()>=this.jukebox.player.isPlaying.end&&this.jukebox.player.resume(this.jukebox.player.isPlaying.start):this.jukebox.player.backgroundMusic&&this.jukebox.player.backgroundMusic.loop&&this.jukebox.player.getCurrentTime()>=this.jukebox.player.backgroundMusic.end&&this.jukebox.player.resume(this.jukebox.player.backgroundMusic.start))},setSfxVolume:function(b){this.sfxVolume=b;Howler.volume(this.sfxVolume)},
setMusicVolume:function(b){this.musicVolume=b;ig.ua.mobile?this.jukebox&&this.jukebox.player.setVolume(this.musicVolume):ig.music.volume=this.musicVolume}})});ig.baked=!0;
ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound","impact.sound-handler").defines(function(){ig.main=function(b,c,d,e,g,l,p){ig.system=new ig.System(b,d,e,g,l||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;ig.soundHandler=new ig.SoundHandler;(new (p||ig.Loader)(c,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(b,c,d){this.width=c;this.height=d;this.image=new ig.Image(b)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(b,c,d,e){this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=c;this.sequence=d;
this.stop=!!e;this.tile=this.sequence[0]},rewind:function(){this.timer.reset();this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:b%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(b,c){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(c>ig.system.height||0>b+d||0>c+d)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(c+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},posMP:{x:0,y:0},posML:{x:0,y:0},enableReposition:!1,pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),
max:(136).toRad()},init:function(b,c,d){this.id=++ig.Entity._lastId;this.pos.x=b;this.pos.y=c;ig.merge(this,d)},addAnim:function(b,c,d,e){if(!this.animSheet)throw"No animSheet to add the animation "+b+" to.";c=new ig.Animation(this.animSheet,c,d,e);this.anims[b]=c;this.currentAnim||(this.currentAnim=c);return c},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,
this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(b,c,d,e){return c?(b+c*ig.system.tick).limit(-e,e):d?(c=d*ig.system.tick,0<b-c?b-c:0>b+c?b+c:0):b.limit(-e,e)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&
(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*
c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&c<this.slopeStanding.max&&(this.standing=!0)}this.pos=b.pos},reposition:function(){ig.ua.mobile&&this.enableReposition&&(portraitMode?(this.pos.x=this.posMP.x,this.pos.y=this.posMP.y):(this.pos.x=this.posML.x,this.pos.y=this.posML.y))},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},
receiveDamage:function(b){this.health-=b;0>=this.health&&this.kill()},touches:function(b){return!(this.pos.x>=b.pos.x+b.size.x||this.pos.x+this.size.x<=b.pos.x||this.pos.y>=b.pos.y+b.size.y||this.pos.y+this.size.y<=b.pos.y)},distanceTo:function(b){var c=this.pos.x+this.size.x/2-(b.pos.x+b.size.x/2);b=this.pos.y+this.size.y/2-(b.pos.y+b.size.y/2);return Math.sqrt(c*c+b*b)},angleTo:function(b){return Math.atan2(b.pos.y+b.size.y/2-(this.pos.y+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/
2))},check:function(){},collideWith:function(){},ready:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(b,c){b.checkAgainst&c.type&&b.check(c);c.checkAgainst&b.type&&c.check(b);b.collides&&(c.collides&&b.collides+c.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(b,c)};ig.Entity.solveCollision=function(b,c){var d=null;if(b.collides==ig.Entity.COLLIDES.LITE||c.collides==
ig.Entity.COLLIDES.FIXED)d=b;else if(c.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)d=c;b.last.x+b.size.x>c.last.x&&b.last.x<c.last.x+c.size.x?(b.last.y<c.last.y?ig.Entity.seperateOnYAxis(b,c,d):ig.Entity.seperateOnYAxis(c,b,d),b.collideWith(c,"y"),c.collideWith(b,"y")):b.last.y+b.size.y>c.last.y&&b.last.y<c.last.y+c.size.y&&(b.last.x<c.last.x?ig.Entity.seperateOnXAxis(b,c,d):ig.Entity.seperateOnXAxis(c,b,d),b.collideWith(c,"x"),c.collideWith(b,"x"))};ig.Entity.seperateOnXAxis=
function(b,c,d){var e=b.pos.x+b.size.x-c.pos.x;d?(d.vel.x=-d.vel.x*d.bounciness+(b===d?c:b).vel.x,c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,d==b?-e:e,0,d.size.x,d.size.y),d.pos.x=c.pos.x):(d=(b.vel.x-c.vel.x)/2,b.vel.x=-d,c.vel.x=d,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,-e/2,0,b.size.x,b.size.y),b.pos.x=Math.floor(d.pos.x),b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e/2,0,c.size.x,c.size.y),c.pos.x=Math.ceil(b.pos.x))};ig.Entity.seperateOnYAxis=function(b,c,d){var e=b.pos.y+b.size.y-c.pos.y;
if(d){c=b===d?c:b;d.vel.y=-d.vel.y*d.bounciness+c.vel.y;var g=0;d==b&&Math.abs(d.vel.y-c.vel.y)<d.minBounceVelocity&&(d.standing=!0,g=c.vel.x*ig.system.tick);b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,g,d==b?-e:e,d.size.x,d.size.y);d.pos.y=b.pos.y;d.pos.x=b.pos.x}else ig.game.gravity&&(c.standing||0<b.vel.y)?(d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,-(b.pos.y+b.size.y-c.pos.y),b.size.x,b.size.y),b.pos.y=d.pos.y,0<b.bounciness&&b.vel.y>b.minBounceVelocity?b.vel.y*=-b.bounciness:(b.standing=
!0,b.vel.y=0)):(d=(b.vel.y-c.vel.y)/2,b.vel.y=-d,c.vel.y=d,g=c.vel.x*ig.system.tick,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,g,-e/2,b.size.x,b.size.y),b.pos.y=d.pos.y,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,0,e/2,c.size.x,c.size.y),c.pos.y=b.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(b,c){this.tilesize=b;this.data=c;this.height=c.length;this.width=c[0].length},getTile:function(b,c){var d=Math.floor(b/this.tilesize),e=Math.floor(c/this.tilesize);return 0<=d&&d<this.width&&0<=e&&e<this.height?this.data[e][d]:0},setTile:function(b,c,d){b=Math.floor(b/this.tilesize);c=Math.floor(c/this.tilesize);0<=b&&b<this.width&&(0<=c&&c<this.height)&&(this.data[c][b]=
d)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(b,c,g){this.parent(b,c);this.tiledef=g||ig.CollisionMap.defaultTileDef;for(var l in this.tiledef)l|0>this.lastSlope&&(this.lastSlope=l|0)},trace:function(b,c,g,l,p,y){var q={collision:{x:!1,y:!1,slope:!1},pos:{x:b,y:c},tile:{x:0,y:0}},s=Math.ceil(Math.max(Math.abs(g),Math.abs(l))/this.tilesize);if(1<s)for(var t=g/s,m=l/s,n=0;n<s&&(t||m)&&!(this._traceStep(q,
b,c,t,m,p,y,g,l,n),b=q.pos.x,c=q.pos.y,q.collision.x&&(g=t=0),q.collision.y&&(l=m=0),q.collision.slope);n++);else this._traceStep(q,b,c,g,l,p,y,g,l,0);return q},_traceStep:function(b,c,g,l,p,y,q,s,t,m){b.pos.x+=l;b.pos.y+=p;var n=0;if(l){var r=0<l?y:0,B=0>l?this.tilesize:0,n=Math.max(Math.floor(g/this.tilesize),0),M=Math.min(Math.ceil((g+q)/this.tilesize),this.height);l=Math.floor((b.pos.x+r)/this.tilesize);var D=Math.floor((c+r)/this.tilesize);if(0<m||l==D||0>D||D>=this.width)D=-1;if(0<=l&&l<this.width)for(var H=
n;H<M&&!(-1!=D&&(n=this.data[H][D],1<n&&n<=this.lastSlope&&this._checkTileDef(b,n,c,g,s,t,y,q,D,H)));H++)if(n=this.data[H][l],1==n||n>this.lastSlope||1<n&&this._checkTileDef(b,n,c,g,s,t,y,q,l,H)){if(1<n&&n<=this.lastSlope&&b.collision.slope)break;b.collision.x=!0;b.tile.x=n;c=b.pos.x=l*this.tilesize-r+B;s=0;break}}if(p){r=0<p?q:0;p=0>p?this.tilesize:0;n=Math.max(Math.floor(b.pos.x/this.tilesize),0);B=Math.min(Math.ceil((b.pos.x+y)/this.tilesize),this.width);H=Math.floor((b.pos.y+r)/this.tilesize);
M=Math.floor((g+r)/this.tilesize);if(0<m||H==M||0>M||M>=this.height)M=-1;if(0<=H&&H<this.height)for(l=n;l<B&&!(-1!=M&&(n=this.data[M][l],1<n&&n<=this.lastSlope&&this._checkTileDef(b,n,c,g,s,t,y,q,l,M)));l++)if(n=this.data[H][l],1==n||n>this.lastSlope||1<n&&this._checkTileDef(b,n,c,g,s,t,y,q,l,H)){if(1<n&&n<=this.lastSlope&&b.collision.slope)break;b.collision.y=!0;b.tile.y=n;b.pos.y=H*this.tilesize-r+p;break}}},_checkTileDef:function(b,c,g,l,p,y,q,s,t,m){var n=this.tiledef[c];if(!n)return!1;c=(n[2]-
n[0])*this.tilesize;var r=(n[3]-n[1])*this.tilesize,B=n[4];q=g+p+(0>r?q:0)-(t+n[0])*this.tilesize;s=l+y+(0<c?s:0)-(m+n[1])*this.tilesize;if(0<c*s-r*q){if(0>p*-r+y*c)return B;t=Math.sqrt(c*c+r*r);m=r/t;t=-c/t;var M=q*m+s*t,n=m*M,M=t*M;if(n*n+M*M>=p*p+y*y)return B||0.5>c*(s-y)-r*(q-p);b.pos.x=g+p-n;b.pos.y=l+y-M;b.collision.slope={x:c,y:r,nx:m,ny:t};return!0}return!1}});var b=1/3,c=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,c,!0],6:[0,c,1,b,!0],7:[0,b,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[c,1,1,0,!0],43:[b,1,c,0,!0],54:[0,1,b,0,!0],27:[0,0,1,b,!0],28:[0,b,1,c,!0],29:[0,c,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,b,1,!0],44:[b,0,c,1,!0],55:[c,0,1,1,!0],16:[1,b,0,0,!0],17:[1,c,0,b,!0],18:[1,1,0,c,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[b,1,0,0,!0],41:[c,1,b,0,!0],52:[1,1,c,0,!0],38:[1,c,0,1,!0],39:[1,b,0,c,!0],40:[1,0,
0,b,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,c,1,!0],42:[c,0,b,1,!0],53:[b,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(b,c,g,l){return{collision:{x:!1,y:!1,slope:!1},pos:{x:b+g,y:c+l},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(b,c,d){this.parent(b,c);this.setTileset(d)},setTileset:function(b){this.tilesetName=b instanceof ig.Image?b.path:b;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(b,
c){this.scroll.x=b/this.distance;this.scroll.y=c/this.distance},preRenderMapToChunks:function(){var b=this.width*this.tilesize*ig.system.scale,c=this.height*this.tilesize*ig.system.scale,d=Math.ceil(b/this.chunkSize),e=Math.ceil(c/this.chunkSize);this.preRenderedChunks=[];for(var g=0;g<e;g++){this.preRenderedChunks[g]=[];for(var l=0;l<d;l++)this.preRenderedChunks[g][l]=this.preRenderChunk(l,g,l==d-1?b-l*this.chunkSize:this.chunkSize,g==e-1?c-g*this.chunkSize:this.chunkSize)}},preRenderChunk:function(b,
c,d,e){var g=d/this.tilesize/ig.system.scale+1,l=e/this.tilesize/ig.system.scale+1,p=b*this.chunkSize/ig.system.scale%this.tilesize,y=c*this.chunkSize/ig.system.scale%this.tilesize;b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);c=Math.floor(c*this.chunkSize/this.tilesize/ig.system.scale);var q=ig.$new("canvas");q.width=d;q.height=e;d=ig.system.context;ig.system.context=q.getContext("2d");for(e=0;e<g;e++)for(var s=0;s<l;s++)if(e+b<this.width&&s+c<this.height){var t=this.data[s+c][e+b];
t&&this.tiles.drawTile(e*this.tilesize-p,s*this.tilesize-y,t-1,this.tilesize)}ig.system.context=d;return q},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var b=ig.system.getDrawPos(this.scroll.x),c=ig.system.getDrawPos(this.scroll.y);this.repeat&&(b%=this.width*this.tilesize*ig.system.scale,c%=this.height*this.tilesize*ig.system.scale);var d=Math.max(Math.floor(b/
this.chunkSize),0),e=Math.max(Math.floor(c/this.chunkSize),0),g=Math.ceil((b+ig.system.realWidth)/this.chunkSize),l=Math.ceil((c+ig.system.realHeight)/this.chunkSize),p=this.preRenderedChunks[0].length,y=this.preRenderedChunks.length;this.repeat||(g=Math.min(g,p),l=Math.min(l,y));for(var q=0;e<l;e++){for(var s=0,t=d;t<g;t++){var m=this.preRenderedChunks[e%y][t%p],n=-b+t*this.chunkSize-s,r=-c+e*this.chunkSize-q;ig.system.context.drawImage(m,n,r);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle=
"#f0f",ig.system.context.strokeRect(n,r,this.chunkSize,this.chunkSize));this.repeat&&(m.width<this.chunkSize&&n+m.width<ig.system.realWidth)&&(s=this.chunkSize-m.width,g++)}this.repeat&&(m.height<this.chunkSize&&r+m.height<ig.system.realHeight)&&(q=this.chunkSize-m.height,l++)}},drawTiled:function(){for(var b=0,c=null,d=(this.scroll.x/this.tilesize).toInt(),e=(this.scroll.y/this.tilesize).toInt(),g=this.scroll.x%this.tilesize,l=this.scroll.y%this.tilesize,p=-g-this.tilesize,g=ig.system.width+this.tilesize-
g,y=ig.system.height+this.tilesize-l,q=-1,l=-l-this.tilesize;l<y;q++,l+=this.tilesize){var s=q+e;if(s>=this.height||0>s){if(!this.repeat)continue;s=0<s?s%this.height:(s+1)%this.height+this.height-1}for(var t=-1,m=p;m<g;t++,m+=this.tilesize){b=t+d;if(b>=this.width||0>b){if(!this.repeat)continue;b=0<b?b%this.width:(b+1)%this.width+this.width-1}if(b=this.data[s][b])(c=this.anims[b-1])?c.draw(m,l):this.tiles.drawTile(m,l,b-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevelWithoutEntities:function(b){this.screen={x:0,y:0};this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var c=0;c<b.layer.length;c++){var d=b.layer[c];if("collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);e.anims=this.backgroundAnims[d.tilesetName]||{};e.repeat=d.repeat;e.distance=d.distance;e.foreground=!!d.foreground;e.preRender=!!d.preRender;e.name=
d.name;this.backgroundMaps.push(e)}}},loadLevel:function(b){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var c=0;c<b.entities.length;c++){var d=b.entities[c];this.spawnEntity(d.type,d.x,d.y,d.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(c=0;c<b.layer.length;c++)if(d=b.layer[c],"collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);
e.anims=this.backgroundAnims[d.tilesetName]||{};e.repeat=d.repeat;e.distance=d.distance;e.foreground=!!d.foreground;e.preRender=!!d.preRender;e.name=d.name;this.backgroundMaps.push(e)}for(c=0;c<this.entities.length;c++)this.entities[c].ready()},loadLevelDeferred:function(b){this._levelToLoad=b},getMapByName:function(b){if("collision"==b)return this.collisionMap;for(var c=0;c<this.backgroundMaps.length;c++)if(this.backgroundMaps[c].name==b)return this.backgroundMaps[c];return null},getEntityByName:function(b){return this.namedEntities[b]},
getEntitiesByType:function(b){b="string"===typeof b?ig.global[b]:b;for(var c=[],d=0;d<this.entities.length;d++){var e=this.entities[d];e instanceof b&&!e._killed&&c.push(e)}return c},spawnEntity:function(b,c,d,e){var g="string"===typeof b?ig.global[b]:b;if(!g)throw"Can't spawn entity of type "+b;b=new g(c,d,e||{});this.entities.push(b);b.name&&(this.namedEntities[b.name]=b);return b},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},
removeEntity:function(b){b.name&&delete this.namedEntities[b.name];b._killed=!0;b.type=ig.Entity.TYPE.NONE;b.checkAgainst=ig.Entity.TYPE.NONE;b.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(b)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);if(this._doSortEntities||this.autoSort)this.sortEntities(),this._doSortEntities=!1;this.updateEntities();this.checkEntities();for(var b=0;b<this._deferredKill.length;b++)this.entities.erase(this._deferredKill[b]);
this._deferredKill=[];for(var c in this.backgroundAnims){var b=this.backgroundAnims[c],d;for(d in b)b[d].update()}},updateEntities:function(){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c._killed||c.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var b;for(b=0;b<this.backgroundMaps.length;b++){var c=this.backgroundMaps[b];
if(c.foreground)break;c.setScreenPos(this.screen.x,this.screen.y);c.draw()}this.drawEntities();for(b;b<this.backgroundMaps.length;b++)c=this.backgroundMaps[b],c.setScreenPos(this.screen.x,this.screen.y),c.draw()},drawEntities:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].draw()},checkEntities:function(){for(var b={},c=0;c<this.entities.length;c++){var d=this.entities[c];if(!(d.type==ig.Entity.TYPE.NONE&&d.checkAgainst==ig.Entity.TYPE.NONE&&d.collides==ig.Entity.COLLIDES.NEVER))for(var e=
{},g=Math.floor(d.pos.y/this.cellSize),l=Math.floor((d.pos.x+d.size.x)/this.cellSize)+1,p=Math.floor((d.pos.y+d.size.y)/this.cellSize)+1,y=Math.floor(d.pos.x/this.cellSize);y<l;y++)for(var q=g;q<p;q++)if(b[y])if(b[y][q]){for(var s=b[y][q],t=0;t<s.length;t++)d.touches(s[t])&&!e[s[t].id]&&(e[s[t].id]=!0,ig.Entity.checkPair(d,s[t]));s.push(d)}else b[y][q]=[d];else b[y]={},b[y][q]=[d]}}});ig.Game.SORT={Z_INDEX:function(b,c){return b.zIndex-c.zIndex},POS_X:function(b,c){return b.pos.x+b.size.x-(c.pos.x+
c.size.x)},POS_Y:function(b,c){return b.pos.y+b.size.y-(c.pos.y+c.size.y)}}});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({loadingBgImage:new ig.Image("media/graphics/game/loading/loading-bg.jpg"),loadingBarImage:new ig.Image("media/graphics/game/loading/loading-bar.png"),loadingBarSize:{x:278,y:38},init:function(b,c){this.parent(b,c);ig.ua.mobile&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize();ig.system.context.font="18px vinhan, Helvetica, Verdana";ig.system.context.fillText("",
-50,-50)},end:function(){this.parent();var b=0<=document.URL.indexOf("localhost")?500:3E3;window.setTimeout("ig.system.setGame(MyGame)",b)},setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=
0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){ig.system.context.font="18px vinhan, Helvetica, Verdana";ig.system.context.fillText("vinhan",-50,-50);ig.system.context.font="18px Tw Cen MT, Helvetica, Verdana";ig.system.context.fillText("Tw Cen MT",-50,-50);this._drawStatus+=(this.status-this._drawStatus)/5;ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.loadingBgImage.draw(0,0);this.loadingBarImage.draw(172,340,0,
0,this.loadingBarSize.x*this._drawStatus,this.loadingBarSize.y)}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var c=0;c<this.length;++c)if(this[c]===b)return c;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);this.tweens=
b}};ig.Entity.prototype.tween=function(b,c,d){b=new ig.Tween(this,b,c,d);this.tweens.push(b);return b};ig.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};ig.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};ig.Entity.prototype.stopTweens=function(b){for(var c=0;c<this.tweens.length;c++)this.tweens[c].stop(b)};ig.Tween=function(b,c,d,e){var g={},l={},p={},y=0,q=!1,s=!1,t=!1;this.duration=d;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,e);this.loopNum=this.loopCount;this.chain=function(b){t=b};this.initEnd=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.initEnd(subprop,c[b],d[b])};this.initStart=function(b,c,d,e){if("object"!==typeof d[b])"undefined"!==typeof c[b]&&(e[b]=d[b]);else for(subprop in d[b])e[b]||(e[b]={}),"undefined"!==typeof c[b]&&this.initStart(subprop,
c[b],d[b],e[b])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;y=0;-1==b.tweens.indexOf(this)&&b.tweens.push(this);s=!0;q=new ig.Timer;for(var d in c)this.initEnd(d,c,l);for(d in l)this.initStart(d,l,b,g),this.initDelta(d,p,b,l)};this.initDelta=function(b,c,d,e){if("object"!==typeof e[b])c[b]=e[b]-d[b];else for(subprop in e[b])c[b]||(c[b]={}),this.initDelta(subprop,c[b],d[b],e[b])};this.propUpdate=function(b,c,d,e,g){if("object"!==typeof d[b])c[b]="undefined"!=typeof d[b]?
d[b]+e[b]*g:c[b];else for(subprop in d[b])this.propUpdate(subprop,c[b],d[b],e[b],g)};this.propSet=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.propSet(subprop,c[b],d[b])};this.update=function(){if(!s)return!1;if(this.delay){if(q.delta()<this.delay)return;this.delay=0;q.reset()}if(this.paused||this.complete)return!1;var c=(q.delta()+y)/this.duration,c=1<c?1:c,d=this.easing(c);for(property in p)this.propUpdate(property,b,g,p,d);if(1<=c){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();t&&t.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in g)this.propSet(property,g,b);y=0;q.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){c={};d={};ig.merge(c,l);ig.merge(d,g);ig.merge(g,c);ig.merge(l,d);for(property in l)this.initDelta(property,p,b,l);y=0;q.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;y+=q.delta()};this.resume=function(){this.paused=
!1;q.reset()};this.stop=function(b){b&&(this.loop=this.complete=this.paused=!1,y+=d,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(b){return b};ig.Tween.Easing.Quadratic.EaseIn=function(b){return b*b};ig.Tween.Easing.Quadratic.EaseOut=function(b){return-b*(b-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(b){return b*b*b};ig.Tween.Easing.Cubic.EaseOut=function(b){return--b*b*b+1};ig.Tween.Easing.Cubic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};ig.Tween.Easing.Quartic.EaseIn=function(b){return b*b*b*b};ig.Tween.Easing.Quartic.EaseOut=function(b){return-(--b*b*b*b-1)};ig.Tween.Easing.Quartic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)};ig.Tween.Easing.Quintic.EaseIn=
function(b){return b*b*b*b*b};ig.Tween.Easing.Quintic.EaseOut=function(b){return(b-=1)*b*b*b*b+1};ig.Tween.Easing.Quintic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(b){return-Math.cos(b*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(b){return Math.sin(b*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(b){return-0.5*(Math.cos(Math.PI*b)-1)};ig.Tween.Easing.Exponential.EaseIn=function(b){return 0==b?0:Math.pow(2,
10*(b-1))};ig.Tween.Easing.Exponential.EaseOut=function(b){return 1==b?1:-Math.pow(2,-10*b)+1};ig.Tween.Easing.Exponential.EaseInOut=function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(b){return-(Math.sqrt(1-b*b)-1)};ig.Tween.Easing.Circular.EaseOut=function(b){return Math.sqrt(1- --b*b)};ig.Tween.Easing.Circular.EaseInOut=function(b){return 1>(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e))};ig.Tween.Easing.Elastic.EaseOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*b)*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Elastic.EaseInOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;
e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return 1>(b*=2)?-0.5*d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e):0.5*d*Math.pow(2,-10*(b-=1))*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Back.EaseIn=function(b){return b*b*(2.70158*b-1.70158)};ig.Tween.Easing.Back.EaseOut=function(b){return(b-=1)*b*(2.70158*b+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(b){return 1-ig.Tween.Easing.Bounce.EaseOut(1-b)};ig.Tween.Easing.Bounce.EaseOut=function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(b){return 0.5>b?0.5*ig.Tween.Easing.Bounce.EaseIn(2*b):0.5*ig.Tween.Easing.Bounce.EaseOut(2*b-1)+0.5}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var b=getQueryVariable("webview");if(b)switch(b){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(b=getQueryVariable("debug"))switch(b){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;ig.module("plugins.jukebox").defines(function(){ig.Jukebox=ig.Class.extend({init:function(){this.player=new jukebox.Player({resources:["media/audio/bgm.mp3","media/audio/bgm.ogg"],autoplay:"music",spritemap:{music:{start:0,end:16,loop:!0}}})}})});ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(b,c){this.game=b;this.levels=[];this.currentLevel=0;this.append(c)},loadLevel:function(b){for(key in dynamicClickableEntityDivs)ig.game.hideOverlay([key]);this.currentLevel=b;this.game.loadLevel(this.levels[b]);return!0},loadLevelWithoutEntities:function(b){this.currentLevel=b;this.game.loadLevelWithoutEntities(this.levels[b]);return!0},append:function(b){newLevels=[];return"object"===
typeof b?(b.constructor===[].constructor?newLevels=b:newLevels[0]=b,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(b){var c=null;for(i=0;i<this.levels.length;i++)this.levels[i]==b&&(c=i);return 0<=c?this.loadLevel(c):!1},firstLevel:function(){return this.loadLevel(0)},lastLevel:function(){return this.loadLevel(this.levels.length-
1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});this.START_BRANDING_SPLASH;ig.baked=!0;
ig.module("plugins.branding.splash").requires("impact.impact","impact.entity").defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0)}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},logoIm:new ig.Image("branding/splash1.png"),init:function(b,c,d){this.parent(b,c,d);this.logo=new ig.AnimationSheet(this.logoIm.path,this.logoIm.width,this.logoIm.height);this.size.x=this.logoIm.width;this.size.y=this.logoIm.height;this.anims.idle=
new ig.Animation(this.logo,0,[0],!0);this.pos.x=(ig.system.width-this.size.x)/2;this.pos.y=-this.size.y-200;this.endPosY=(ig.system.height-this.size.y)/2;b=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});c=this.tween({},2.5,{onComplete:function(){ig.game.director.loadLevel(ig.game.director.currentLevel)}});b.chain(c);b.start();this.currentAnim=this.anims.idle},createClickableLayer:function(){console.log("Build clickable layer");this.checkClickableLayer("branding-splash",
_SETTINGS.Branding.Logo.Link,!0)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");
$("#"+g.id).css("position","absolute");if(ig.ua.mobile){var l=window.innerHeight/mobileHeight,p=window.innerWidth/mobileWidth;$("#"+g.id).css("left",this.pos.x*p);$("#"+g.id).css("top",this.pos.y*l);$("#"+g.id).css("width",this.size.x*p);$("#"+g.id).css("height",this.size.y*l)}else l=w/2-destW/2,p=h/2-destH/2,console.log(l,p),$("#"+g.id).css("left",l+this.pos.x*multiplier),$("#"+g.id).css("top",p+this.pos.y*multiplier),$("#"+g.id).css("width",this.size.x*multiplier),$("#"+g.id).css("height",this.size.y*
multiplier);e?$("#"+g.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+g.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=this.size.x*multiplier;dynamicClickableEntityDivs[b].height=this.size.y*multiplier;dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},draw:function(){var b="#ffffff";
_SETTINGS.Branding.Splash.BgColour&&(b=_SETTINGS.Branding.Splash.BgColour);ig.system.context.fillStyle=b;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.parent()}})});this.END_BRANDING_SPLASH;ig.baked=!0;
ig.module("plugins.glyphstudio-api").defines(function(){function b(b){for(var d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var g=d[e].split("=");if(decodeURIComponent(g[0])==b)return decodeURIComponent(g[1])}}ig.glyphstudioApi={};ig.glyphstudioApi.api_url=b("api-url");ig.glyphstudioApi.session_id=b("session-id");ig.onGameStart=function(b){console.log("onGameStart");var d=ig.glyphstudioApi.api_url,e={method:"playstart"};e.sessionid=ig.glyphstudioApi.session_id;e=JSON.stringify(e);
$.ajax({type:"POST",contentType:"text/plain",url:d,async:!0,data:e,success:function(d){d&&void 0!=d.gameplayid&&(ig.glyphstudioApi.gameplay_id=d.gameplayid);d&&"success"==d.status?typeof("function"==b)&&b(!0):d&&d.message?alert(d.message):alert("playstart failed")}.bind(this),error:function(b){alert("playstart failed: "+b.statusText)}})};ig.onGameEnd=function(b,d){console.log("onGameEnd "+b+" "+d);var e=ig.glyphstudioApi.api_url,g={method:"playend"};g.sessionid=ig.glyphstudioApi.session_id;g.gameplayid=
ig.glyphstudioApi.gameplay_id;g.score=b;g.level=d;g=JSON.stringify(g);$.ajax({type:"POST",contentType:"text/plain",url:e,async:!0,data:g,success:function(b){b&&"success"==b.status?b&&b.message&&alert(b.message):b&&b.message&&console.log(b.message)}.bind(this),error:function(b){console.log("playend statusText: "+b.statusText)}})}});ig.baked=!0;
ig.module("game.entities.branding-logo-placeholder").requires("impact.entity").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(b,c,d){this.parent(b,c,d);if(d)switch(console.log("settings found ... using that div layer name"),b=d.div_layer_name,console.log("settings.centralize:",d.centralize),d.centralize){case "true":console.log("centralize true");centralize=!0;break;case "false":console.log("centralize false");
centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else b="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:b,centralize:centralize})}catch(e){console.log(e)}this.kill()}}})});this.START_BRANDING_LOGO;ig.baked=!0;
ig.module("game.entities.branding-logo").requires("impact.entity").defines(function(){EntityBrandingLogo=ig.Entity.extend({gravityFactor:0,logo:new ig.AnimationSheet("branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),size:{x:141,y:20},zIndex:10001,init:function(b,c,d){this.parent(b,c,d);"undefined"==typeof wm&&(_SETTINGS.Branding.Logo.Enabled?(this.size.x=_SETTINGS.Branding.Logo.Width,this.size.y=_SETTINGS.Branding.Logo.Height,d&&d.centralize&&(this.pos.x=ig.system.width/
2-this.size.x/2,console.log("centralize true ... centering branded logo ..."))):this.kill());this.anims.idle=new ig.Animation(this.logo,0,[0],!0);this.currentAnim=this.anims.idle;d?(console.log("branding settings found ... using that div layer name"),b=d.div_layer_name):b="branding-logo";_SETTINGS.Branding.Logo.LinkEnabled&&(console.log("logo link enabled"),this.checkClickableLayer(b,_SETTINGS.Branding.Logo.Link,_SETTINGS.Branding.Logo.NewWindow));console.log("branding logo spawed ...")},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==
b)return!0;return!1},checkClickableLayer:function(b,c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("position","absolute");if(ig.ua.mobile){var l=window.innerHeight/mobileHeight,p=window.innerWidth/
mobileWidth;$("#"+g.id).css("left",this.pos.x*p);$("#"+g.id).css("top",this.pos.y*l);$("#"+g.id).css("width",this.size.x*p);$("#"+g.id).css("height",this.size.y*l)}else l=w/2-destW/2,p=h/2-destH/2,console.log(l,p),$("#"+g.id).css("left",l+this.pos.x*multiplier),$("#"+g.id).css("top",p+this.pos.y*multiplier),$("#"+g.id).css("width",this.size.x*multiplier),$("#"+g.id).css("height",this.size.y*multiplier);e?$("#"+g.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+
d+"'></a>"):$("#"+g.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=this.size.x*multiplier;dynamicClickableEntityDivs[b].height=this.size.y*multiplier;dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y}})});this.END_BRANDING_LOGO;ig.baked=!0;
ig.module("game.entities.button-more-games").requires("impact.entity").defines(function(){EntityButtonMoreGames=ig.Entity.extend({size:{x:102,y:113},init:function(b,c,d){this.parent(b,c,d)},ready:function(){setTimeout(this.spawnDiv(),5)},spawnDiv:function(){this.canSpawnDiv||(this.canSpawnDiv=!0,_SETTINGS.MoreGames.Enabled?this.checkClickableLayer(this.divLayerName?this.divLayerName:"more-games",_SETTINGS.MoreGames.Link,_SETTINGS.MoreGames.NewWindow):this.kill())},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==
b)return!0;return!1},checkClickableLayer:function(b,c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c),ig.ua.mobile?(c=window.innerHeight/mobileHeight,d=window.innerWidth/mobileWidth,$("#"+b).css("left",this.pos.x*d),$("#"+b).css("top",this.pos.y*c),$("#"+b).css("width",this.size.x*d),$("#"+b).css("height",this.size.y*c)):(c=document.getElementById("game").offsetLeft,d=document.getElementById("game").offsetTop,$("#"+b).css("left",
c+this.pos.x*multiplier),$("#"+b).css("top",d+this.pos.y*multiplier),$("#"+b).css("width",this.size.x*multiplier),$("#"+b).css("height",this.size.y*multiplier))):this.createClickableOutboundLayer(b,c,"media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("position","absolute");if(ig.ua.mobile){var l=window.innerHeight/mobileHeight,p=window.innerWidth/mobileWidth;
$("#"+g.id).css("left",this.pos.x*p);$("#"+g.id).css("top",this.pos.y*l);$("#"+g.id).css("width",this.size.x*p);$("#"+g.id).css("height",this.size.y*l)}else l=document.getElementById("game").offsetLeft,p=document.getElementById("game").offsetTop,$("#"+g.id).css("left",l+this.pos.x*multiplier),$("#"+g.id).css("top",p+this.pos.y*multiplier),$("#"+g.id).css("width",this.size.x*multiplier),$("#"+g.id).css("height",this.size.y*multiplier);e?$("#"+g.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+
d+"'></a>"):$("#"+g.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=this.size.x*multiplier;dynamicClickableEntityDivs[b].height=this.size.y*multiplier;dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hide:function(){if(_SETTINGS.MoreGames.Enabled){var b="more-games";this.divLayerName&&(b=this.divLayerName);document.getElementById(b).style.visibility=
"hidden";$("#"+b).hide();this.currentAnim=null}},show:function(){if(_SETTINGS.MoreGames.Enabled){var b="more-games";this.divLayerName&&(b=this.divLayerName);document.getElementById(b).style.visibility="visible";$("#"+b).show();this.currentAnim=this.anims.idle}}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image("media/graphics/opening/shield.png"),mIconImage:new ig.Image("media/graphics/opening/m_icon.png"),titleImage:new ig.Image("media/graphics/opening/title.png"),init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);
try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateOriginalShieldOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&0<this.initTimer.delta()&&
(this.initTimer=null,this.sheildTimer=new ig.Timer(0.05));this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(0.001),this.mIconTimer=new ig.Timer(0.05),this.titleTimer=new ig.Timer(0.15)));this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=0.3,this.moveTimer.reset());this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):this.mIconTimer=
null);this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var b=ig.system.context;b.save();var c=ig.system.width/2,d=ig.system.height/2;b.translate(c,d);b.rotate(this.move*Math.PI/180);b.beginPath();
b.moveTo(0,0);for(var e=0,g=1;48>=g;g+=1)b.lineTo(0+800*Math.cos(2*g*Math.PI/48),0+800*Math.sin(2*g*Math.PI/48)),e++,2==e&&(e=0,b.lineTo(0,0));b.translate(-c,-d);c=b.createRadialGradient(c,d,100,c,d,250);c.addColorStop(0,"rgba(255,255,255,0.1)");c.addColorStop(1,"rgba(0,0,0,0)");b.fillStyle=c;b.fill();b.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768);this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/2-70,this.mIconAnim,
166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image("media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image("media/graphics/opening/kittytitle.png"),init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.kittyopeningSound)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),
ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateKittyOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=new ig.Timer(0.15));this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):
(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var b=ig.system.context.createLinearGradient(0,0,0,ig.system.height);b.addColorStop(0,"#ffed94");b.addColorStop(1,"#ffcd85");ig.system.context.fillStyle=b;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.kittyImage.drawTile(ig.system.width/2-this.kittyImage.width/
8,ig.system.height/2-this.kittyImage.height/4,this.kittyAnim,218,325);this.kittyTitleImage.drawTile(ig.system.width/2-this.kittyTitleImage.width/2,ig.system.height/2+this.kittyImage.height/4+10,this.kittyAnim,380,37);ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,isClicking:!1,isHovering:!1,firstClick:!1,isReleased:!1,hoveringItem:null,objectArray:[],ignorePause:!0,zIndex:5E3,check:function(b){this.objectArray.push(b)},clickObject:function(b){this.isClicking&&!this.firstClick&&"function"==typeof b.clicked&&b.clicked();this.firstClick&&!this.isReleased&&"function"==typeof b.clicking&&b.clicking();
this.firstClick&&this.isReleased&&"function"==typeof b.released&&b.released()},refreshPos:function(){if(ig.ua.mobile){var b=window.innerHeight/mobileHeight;this.pos.x=ig.input.mouse.x/(window.innerWidth/mobileWidth)-this.size.x/2+ig.game.screen.x;this.pos.y=ig.input.mouse.y/b-this.size.y/2}else this.pos.x=ig.input.mouse.x/multiplier-this.size.x/2+ig.game.screen.x,this.pos.y=ig.input.mouse.y/multiplier-this.size.y/2},update:function(){this.refreshPos();var b=null,c=-1;for(a=this.objectArray.length-
1;-1<a;a--)this.objectArray[a].zIndex>c&&(c=this.objectArray[a].zIndex,b=this.objectArray[a]);null!=b?(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.idle&&this.hoveringItem!=b&&this.hoveringItem.idle(),this.hoveringItem=b,this.clickObject(b),this.objectArray=[]):null!=this.hoveringItem&&"function"==typeof this.hoveringItem.idle&&(this.hoveringItem.idle(),this.hoveringItem=null);this.isClicking&&!this.firstClick?this.firstClick=!0:this.isReleased&&this.firstClick&&(this.firstClick=
!1);this.isClicking=ig.input.pressed("click");this.isReleased=ig.input.released("click")}})});ig.baked=!0;ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:1,y:1},init:function(b,c,d){this.parent(b,c,d)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(b,c,d){this.parent(b,c,d);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,
c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("width",this.size.x*multiplier);$("#"+g.id).css("height",this.size.y*multiplier);$("#"+g.id).css("position","absolute");var l=w/2-destW/2,p=h/
2-destH/2;w==mobileWidth?($("#"+g.id).css("left",this.pos.x),$("#"+g.id).css("top",this.pos.y)):($("#"+g.id).css("left",l+this.pos.x*multiplier),$("#"+g.id).css("top",p+this.pos.y*multiplier));e?$("#"+g.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+g.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=$("#"+g.id).width();dynamicClickableEntityDivs[b].height=
$("#"+g.id).height();dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isHovering=!1)},deselectOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;
ig.module("game.entities.home-control").requires("impact.entity").defines(function(){EntityHomeControl=ig.Entity.extend({zIndex:100,bgImage:new ig.Image("media/graphics/game/mainmenu/mainbg.jpg"),startGameRect:{x:250,y:305,w:144,h:142},settingsRect:{x:430,y:310,w:108,h:145},highScoresRect:{x:553,y:285,w:88,h:85},instructionsRect:{x:20,y:279,w:130,h:148},instructionsBgImage:new ig.Image("media/graphics/game/mainmenu/instructions-bg.png"),instructionsCloseRect:{x:522,y:58,w:25,h:25},showInstructions:!1,
pointer:null,moregamesButton:null,menuBgImage:new ig.Image("media/graphics/game/menu/menubg.png"),sliderKnobImage:new ig.Image("media/graphics/game/menu/sliderknob.png"),tickImage:new ig.Image("media/graphics/game/menu/tick.png"),hidemore:new ig.Image("media/graphics/game/mainmenu/hidemore.png"),closeButtonRect:{x:436,y:125,w:30,h:27},soundKnobRect:{x:287,y:186,w:142,h:36},musicKnobRect:{x:287,y:223,w:142,h:36},hintRect:{x:293,y:270,w:25,h:25},showSettings:!1,lockToSoundRect:!1,lockToMusicRect:!1,
moreGamesButton:null,init:function(b,c,d){this.parent(b,c,d)},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.moreGamesButton=ig.game.getEntitiesByType(EntityButtonMoreGames)[0]},draw:function(){this.bgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);if(this.showInstructions)this.instructionsBgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+70,this.pos.y-this.offset.y-ig.game._rscreen.y+30);else if(this.drawSettings){ig.system.context.globalAlpha=
0.5;ig.system.context.fillStyle="#000000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.globalAlpha=1;this.menuBgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+150,this.pos.y-this.offset.y-ig.game._rscreen.y+100);var b=this.sliderKnobImage.width,c=(this.soundKnobRect.w-b)*ig.soundHandler.sfxVolume;this.sliderKnobImage.draw(this.soundKnobRect.x+c+this.pos.x-this.offset.x-ig.game._rscreen.x,this.soundKnobRect.y+this.pos.y-this.offset.y-ig.game._rscreen.y);
c=(this.musicKnobRect.w-b)*ig.soundHandler.musicVolume;this.sliderKnobImage.draw(this.musicKnobRect.x+c+this.pos.x-this.offset.x-ig.game._rscreen.x,this.musicKnobRect.y+this.pos.y-this.offset.y-ig.game._rscreen.y);ig.game.hintsOn&&this.tickImage.draw(this.hintRect.x-3+this.pos.x-this.offset.x-ig.game._rscreen.x,this.hintRect.y-3+this.pos.y-this.offset.y-ig.game._rscreen.y)}},aabbCheck:function(b,c){return b.x+b.w>c.x&&b.x<c.x+c.w&&b.y+b.h>c.y&&b.y<c.y+c.h?!0:!1},checkMainClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();
var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.startGameRect))ig.onGameStart(function(b){if(b){this.moreGamesButton&&this.moreGamesButton.hide();ig.game.director.loadLevel(2);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}}});else if(this.aabbCheck(b,this.settingsRect)){this.moreGamesButton&&this.moreGamesButton.hide();this.drawSettings=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}}else if(!this.aabbCheck(b,
this.highScoresRect)&&this.aabbCheck(b,this.instructionsRect)){this.moreGamesButton&&this.moreGamesButton.hide();this.showInstructions=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(d){console.log(d)}}}},checkInstructionClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.instructionsCloseRect)){this.moreGamesButton&&this.moreGamesButton.show();
this.showInstructions=!1;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}}}},checkSettingsClicks:function(){if(!this.lockToSoundRect&&!this.lockToMusicRect&&this.pointer.firstClick&&!this.pointer.isReleased){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;this.aabbCheck(b,this.soundKnobRect)?this.lockToSoundRect=!0:this.aabbCheck(b,this.musicKnobRect)&&(this.lockToMusicRect=!0)}else if(this.pointer.isReleased)if(this.lockToMusicRect=
this.lockToSoundRect=!1,this.pointer.refreshPos(),b={},b.x=this.pointer.pos.x,b.y=this.pointer.pos.y,b.w=this.pointer.size.x,b.h=this.pointer.size.y,this.aabbCheck(b,this.soundKnobRect))try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}else if(this.aabbCheck(b,this.musicKnobRect))try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(d){console.log(d)}if(this.lockToSoundRect){var b=this.sliderKnobImage.width/2,e=this.pointer.pos.x+this.pointer.size.x/
2-this.soundKnobRect.x;e<b&&(e=b);e>this.soundKnobRect.w-b&&(e=this.soundKnobRect.w-b);e=(e-b)/(this.soundKnobRect.w-b-b);ig.soundHandler.setSfxVolume(e);ig.game.savePlayerStats()}else this.lockToMusicRect&&(b=this.sliderKnobImage.width/2,e=this.pointer.pos.x+this.pointer.size.x/2-this.soundKnobRect.x,e<b&&(e=b),e>this.soundKnobRect.w-b&&(e=this.soundKnobRect.w-b),e=(e-b)/(this.soundKnobRect.w-b-b),ig.soundHandler.setMusicVolume(e),ig.game.savePlayerStats());if(ig.input.pressed("click")){this.pointer.refreshPos();
b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.closeButtonRect)){this.moreGamesButton&&this.moreGamesButton.show();this.drawSettings=!1;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(g){console.log(g)}}if(this.aabbCheck(b,this.hintRect)){ig.game.hintsOn=!ig.game.hintsOn;ig.game.savePlayerStats();try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(l){console.log(l)}}}},update:function(){this.drawSettings?
this.checkSettingsClicks():this.showInstructions?this.checkInstructionClicks():this.checkMainClicks()}})});ig.baked=!0;
ig.module("game.levels.home").requires("impact.image","game.entities.button-more-games","game.entities.home-control","game.entities.pointer-selector","game.entities.branding-logo").defines(function(){LevelHome={entities:[{type:"EntityButtonMoreGames",x:525,y:160},{type:"EntityHomeControl",x:0,y:0},{type:"EntityPointerSelector",x:-20,y:-20},{type:"EntityBrandingLogo",x:492,y:452}],layer:[]}});ig.baked=!0;
ig.module("game.entities.game-card").requires("impact.entity").defines(function(){EntityGameCard=ig.Entity.extend({baseZIndex:200,zIndex:200,type:ig.Entity.TYPE.B,size:{x:80,y:103},offset:{x:0,y:0},vPadding:15,vBackPadding:3,cardId:0,suitId:0,suitColor:0,number:1,foundationCol:0,tableauCol:0,vOrder:0,showBack:!0,hidden:!1,clickOffset:{x:0,y:0},clickable:!1,isWaste:!1,isDeck:!1,isFoundation:!1,isTableau:!1,isDragging:!1,pointer:null,control:null,lastClickTime:0,cardImages:[new ig.Image("media/graphics/game/cards/1_clubs.png"),
new ig.Image("media/graphics/game/cards/1_diamonds.png"),new ig.Image("media/graphics/game/cards/1_hearts.png"),new ig.Image("media/graphics/game/cards/1_spades.png"),new ig.Image("media/graphics/game/cards/2_clubs.png"),new ig.Image("media/graphics/game/cards/2_diamonds.png"),new ig.Image("media/graphics/game/cards/2_hearts.png"),new ig.Image("media/graphics/game/cards/2_spades.png"),new ig.Image("media/graphics/game/cards/3_clubs.png"),new ig.Image("media/graphics/game/cards/3_diamonds.png"),new ig.Image("media/graphics/game/cards/3_hearts.png"),
new ig.Image("media/graphics/game/cards/3_spades.png"),new ig.Image("media/graphics/game/cards/4_clubs.png"),new ig.Image("media/graphics/game/cards/4_diamonds.png"),new ig.Image("media/graphics/game/cards/4_hearts.png"),new ig.Image("media/graphics/game/cards/4_spades.png"),new ig.Image("media/graphics/game/cards/5_clubs.png"),new ig.Image("media/graphics/game/cards/5_diamonds.png"),new ig.Image("media/graphics/game/cards/5_hearts.png"),new ig.Image("media/graphics/game/cards/5_spades.png"),new ig.Image("media/graphics/game/cards/6_clubs.png"),
new ig.Image("media/graphics/game/cards/6_diamonds.png"),new ig.Image("media/graphics/game/cards/6_hearts.png"),new ig.Image("media/graphics/game/cards/6_spades.png"),new ig.Image("media/graphics/game/cards/7_clubs.png"),new ig.Image("media/graphics/game/cards/7_diamonds.png"),new ig.Image("media/graphics/game/cards/7_hearts.png"),new ig.Image("media/graphics/game/cards/7_spades.png"),new ig.Image("media/graphics/game/cards/8_clubs.png"),new ig.Image("media/graphics/game/cards/8_diamonds.png"),new ig.Image("media/graphics/game/cards/8_hearts.png"),
new ig.Image("media/graphics/game/cards/8_spades.png"),new ig.Image("media/graphics/game/cards/9_clubs.png"),new ig.Image("media/graphics/game/cards/9_diamonds.png"),new ig.Image("media/graphics/game/cards/9_hearts.png"),new ig.Image("media/graphics/game/cards/9_spades.png"),new ig.Image("media/graphics/game/cards/10_clubs.png"),new ig.Image("media/graphics/game/cards/10_diamonds.png"),new ig.Image("media/graphics/game/cards/10_hearts.png"),new ig.Image("media/graphics/game/cards/10_spades.png"),
new ig.Image("media/graphics/game/cards/j_clubs.png"),new ig.Image("media/graphics/game/cards/j_diamonds.png"),new ig.Image("media/graphics/game/cards/j_hearts.png"),new ig.Image("media/graphics/game/cards/j_spades.png"),new ig.Image("media/graphics/game/cards/q_clubs.png"),new ig.Image("media/graphics/game/cards/q_diamonds.png"),new ig.Image("media/graphics/game/cards/q_hearts.png"),new ig.Image("media/graphics/game/cards/q_spades.png"),new ig.Image("media/graphics/game/cards/k_clubs.png"),new ig.Image("media/graphics/game/cards/k_diamonds.png"),
new ig.Image("media/graphics/game/cards/k_hearts.png"),new ig.Image("media/graphics/game/cards/k_spades.png")],cardBackImages:[new ig.Image("media/graphics/game/cards/back1.png"),new ig.Image("media/graphics/game/cards/back2.png")],init:function(b,c,d){this.parent(b,c,d);this.ready()},ready:function(){this.control=ig.game.getEntitiesByType(EntityGameControl)[0];this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},setVOrder:function(b){this.vOrder=b;this.zIndex=this.baseZIndex+this.vOrder;ig.game.sortEntitiesDeferred()},
setCardId:function(b){this.cardId=b;this.suitId=this.cardId%4;this.suitColor=0;if(1==this.suitId||2==this.suitId)this.suitColor=1;this.number=1+Math.floor(this.cardId/4)},draw:function(){this.hidden||(this.showBack?this.cardBackImages[0].draw(this.pos.x-this.offset.x-ig.game._rscreen.x+5,this.pos.y-this.offset.y-ig.game._rscreen.y+5):this.cardImages[this.cardId].draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y))},clicked:function(){if(this.clickable&&!this.control.gameStopped&&
!this.control.gameWon)if((this.isWaste||this.isTableau||this.isFoundation)&&!this.showBack){this.zIndex=2E3;ig.game.sortEntitiesDeferred();this.isDragging=!0;this.control.startDragging(this);this.clickOffset.x=this.pointer.pos.x+this.pointer.size.x/2-this.pos.x;this.clickOffset.y=this.pointer.pos.y+this.pointer.size.y/2-this.pos.y;this.pos.x=this.pointer.pos.x+this.pointer.size.x/2-this.clickOffset.x;this.pos.y=this.pointer.pos.y+this.pointer.size.y/2-this.clickOffset.y;if(this.isTableau)for(var b=
this.tableauCol,c=1,d=this.vOrder+1;d<this.control.tableauPile[b].length;d++){var e=this.control.tableauPile[b][d];e.pos.x=this.pos.x;e.pos.y=this.pos.y+c*e.vPadding;c+=1}this.control.resetHintTime()}else this.isTableau&&this.showBack?(this.showBack=!1,this.control.revealTableau(this),this.control.resetHintTime()):this.isDeck&&(this.showBack=!1,this.control.revealWaste(this),this.control.resetHintTime())},clicking:function(){if(this.clickable&&!this.control.gameStopped&&!this.control.gameWon&&this.isDragging&&
(this.isWaste||this.isTableau||this.isFoundation)&&!this.showBack){this.zIndex=2E3;ig.game.sortEntitiesDeferred();this.pos.x=this.pointer.pos.x+this.pointer.size.x/2-this.clickOffset.x;this.pos.y=this.pointer.pos.y+this.pointer.size.y/2-this.clickOffset.y;if(this.isTableau)for(var b=this.tableauCol,c=1,d=this.vOrder+1;d<this.control.tableauPile[b].length;d++){var e=this.control.tableauPile[b][d];e.pos.x=this.pos.x;e.pos.y=this.pos.y+c*e.vPadding;c+=1}this.control.resetHintTime()}},released:function(){if(this.clickable&&
!this.control.gameStopped&&!this.control.gameWon){if(0.25>ig.system.clock.delta()-this.lastClickTime&&!this.showBack&&(this.isTableau&&this.vOrder==this.control.tableauPile[this.tableauCol].length-1||this.isWaste))this.control.foundationShortcut(this),this.control.refreshCardPositions(),this.control.resetHintTime();else if((this.isWaste||this.isTableau||this.isFoundation)&&!this.showBack&&this.isDragging)this.control.dropCard(this),this.zIndex=this.baseZIndex+this.vOrder,this.isDragging=!1,this.control.stopDragging(this),
this.control.refreshCardPositions(),this.control.resetHintTime();this.lastClickTime=ig.system.clock.delta()}},update:function(){if(!this.control.gameWon&&ig.input.released("click")&&(this.isWaste||this.isTableau||this.isFoundation)&&!this.showBack&&this.isDragging)this.control.dropCard(this),this.zIndex=this.baseZIndex+this.vOrder,this.isDragging=!1,this.control.stopDragging(this),this.control.refreshCardPositions()},hide:function(){this.hidden||(this.hidden=!0)},show:function(){this.hidden&&(this.hidden=
!1)}})});ig.baked=!0;
ig.module("game.entities.game-control").requires("impact.entity","game.entities.game-card").defines(function(){EntityGameControl=ig.Entity.extend({zIndex:100,bgImage:new ig.Image("media/graphics/game/bg2.jpg"),cardFrameImage:new ig.Image("media/graphics/game/frame.png"),cardDeckRect:{x:34,y:18,w:80,h:103},cardWasteRect:{x:116,y:18,w:80,h:103},foundationFrameRect:[{x:280,y:18,w:80,h:103},{x:362,y:18,w:80,h:103},{x:444,y:18,w:80,h:103},{x:526,y:18,w:80,h:103}],tableauFrameRect:[{x:34,y:120,w:80,h:103},
{x:116,y:120,w:80,h:103},{x:198,y:120,w:80,h:103},{x:280,y:120,w:80,h:103},{x:362,y:120,w:80,h:103},{x:444,y:120,w:80,h:103},{x:526,y:120,w:80,h:103}],cards:[],deck:[],waste:[],foundationPile:[[],[],[],[]],tableauPile:[[],[],[],[],[],[],[]],clonedDeck:null,clonedTableau:null,ui:null,pointer:null,gameWon:!1,gameStopped:!1,gameStarted:!1,undoUsed:!1,isDragging:!1,draggedCard:null,gamePoints:0,moveHistory:[],lastHintTime:0,hintsDelay:8,hintDisplayTime:1,hintBlinkInterval:0.2,hintMove:null,lastWinAnimStepTime:0,
winAnimTimestep:0.1,bestMove:null,init:function(b,c,d){this.parent(b,c,d)},ready:function(){this.ui=ig.game.getEntitiesByType(EntityGameUi)[0];this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];for(this.gameWon=!1;!this.gameWon;){this.setupGame();this.clonedDeck=[];for(var b=0;b<this.deck.length;b++)this.clonedDeck.push(this.deck[b]);this.clonedTableau=[];for(var c=0;c<this.tableauPile.length;c++){this.clonedTableau.push([]);ct=this.clonedTableau[this.clonedTableau.length-1];for(b=0;b<this.tableauPile[c].length;b++)ct.push(this.tableauPile[c][b])}for(this.findBestMove();null!=
this.bestMove;)this.doBestMove(),this.findBestMove()}this.gameStopped=this.gameWon=!1;this.moveHistory=[];this.gamePoints=0;this.deck=this.clonedDeck;this.waste=[];this.foundationPile=[[],[],[],[]];this.tableauPile=this.clonedTableau;for(b=0;b<this.deck.length;b++)d=this.deck[b],d.isDeck=!0,d.isWaste=!1,d.isFoundation=!1,d.isTableau=!1,d.pos.x=this.cardDeckRect.x,d.pos.y=this.cardDeckRect.y,d.setVOrder(b),d.showBack=!0,b+1>=this.deck.length&&(d.clickable=!0);for(c=0;c<this.tableauPile.length;c++)for(b=
0;b<this.tableauPile[c].length;b++){var d=this.tableauPile[c][b];d.isDeck=!1;d.isWaste=!1;d.isFoundation=!1;d.isTableau=!0;d.pos.x=this.tableauFrameRect[c].x;d.pos.y=this.tableauFrameRect[c].y;d.setVOrder(b);d.tableauCol=c;d.showBack=!0;c==b&&(d.showBack=!1,d.clickable=!0)}this.clonedDeck=[];for(b=0;b<this.deck.length;b++)this.clonedDeck.push(this.deck[b]);this.clonedTableau=[];for(c=0;c<this.tableauPile.length;c++){this.clonedTableau.push([]);ct=this.clonedTableau[this.clonedTableau.length-1];for(b=
0;b<this.tableauPile[c].length;b++)ct.push(this.tableauPile[c][b])}this.refreshCardPositions();this.resetHintTime();this.gameStarted=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.cycle)}catch(e){console.log(e)}},draw:function(){this.bgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);this.cardFrameImage.draw(this.cardDeckRect.x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.cardDeckRect.y+this.pos.y-this.offset.y-ig.game._rscreen.y);for(var b=
0;b<this.foundationFrameRect.length;b++)this.cardFrameImage.draw(this.foundationFrameRect[b].x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.foundationFrameRect[b].y+this.pos.y-this.offset.y-ig.game._rscreen.y);for(b=0;b<this.tableauFrameRect.length;b++)this.cardFrameImage.draw(this.tableauFrameRect[b].x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.tableauFrameRect[b].y+this.pos.y-this.offset.y-ig.game._rscreen.y)},aabbCheck:function(b,c){return b.x+b.w>c.x&&b.x<c.x+c.w&&b.y+b.h>c.y&&b.y<c.y+
c.h?!0:!1},update:function(){if(0==this.deck.length){if(ig.input.pressed("click")){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;this.aabbCheck(b,this.cardDeckRect)&&(this.deckPressed=!0)}this.deckPressed&&ig.input.released("click")&&(this.pointer.refreshPos(),this.deckPressed=!1,b={},b.x=this.pointer.pos.x,b.y=this.pointer.pos.y,b.w=this.pointer.size.x,b.h=this.pointer.size.y,this.aabbCheck(b,this.cardDeckRect)&&this.returnWasteToDeck())}if(!this.gameStopped&&
!this.gameWon&&ig.game.hintsOn&&ig.system.clock.delta()-this.lastHintTime>this.hintsDelay)if(null==this.hintMove&&this.findHintMove(),null!=this.hintMove)if(b=ig.system.clock.delta()-this.lastHintTime-this.hintsDelay,b<=this.hintDisplayTime)if(b%(2*this.hintBlinkInterval)<this.hintBlinkInterval)for(b=0;b<this.hintMove.length;b++)this.hintMove[b].hide();else for(b=0;b<this.hintMove.length;b++)this.hintMove[b].show();else{for(b=0;b<this.hintMove.length;b++)this.hintMove[b].show();this.resetHintTime()}else this.resetHintTime();
this.gameWon&&(this.ui&&!this.ui.drawGameWon)&&(b=ig.system.clock.delta()-this.lastWinAnimStepTime,b>this.winAnimTimestep&&(this.findBestMove(),null!=this.bestMove?this.doBestMove():this.gameWon&&this.showGameWon(),this.lastWinAnimStepTime=ig.system.clock.delta()))},setupGame:function(){if(this.cards)for(var b=0;b<this.cards.length;b++)this.cards[b].kill();this.cards=[];this.deck=[];this.waste=[];this.foundationPile=[[],[],[],[]];this.tableauPile=[[],[],[],[],[],[],[]];for(var c=[],b=0;52>b;b++)c.push(b);
for(var d=[],b=0;52>b;b++){var e=Math.floor(Math.random()*c.length);d.push(c[e]);c.splice(e,1)}c=[];for(b=0;b<this.tableauPile.length;b++)c.push([]);for(b=0;b<c.length;b++)for(e=b;e<c.length;e++)c[e].push(d.pop());for(e=0;e<c.length;e++)for(b=0;b<c[e].length;b++){var g=ig.game.spawnEntity(EntityGameCard,0,0);g.isTableau=!0;g.pos.x=this.tableauFrameRect[e].x;g.pos.y=this.tableauFrameRect[e].y;g.setCardId(c[e][b]);g.setVOrder(b);g.tableauCol=e;this.tableauPile[e].push(g);this.cards.push(g);e==b&&(g.showBack=
!1,g.clickable=!0)}for(b=0;b<d.length;b++)g=ig.game.spawnEntity(EntityGameCard,0,0),g.isDeck=!0,g.pos.x=this.cardDeckRect.x,g.pos.y=this.cardDeckRect.y,g.setCardId(d[b]),g.setVOrder(b),this.deck.push(g),this.cards.push(g),b+1>=d.length&&(g.clickable=!0);this.refreshCardPositions();this.resetHintTime()},refreshCardPositions:function(){for(var b=this.tableauPile.length,c=0,d=!1;!d;){for(var e=0,g=0;g<b;g++)if(this.tableauPile[g].length>c){var l=this.tableauPile[g][c];if(!l.isDragging)if(l.showBack&&
(l.clickable=!1,this.tableauPile[g].length<=c+1&&(l.clickable=!0)),l.setVOrder(c),l.pos.x=this.tableauFrameRect[g].x,0<c){if(this.tableauPile[g].length>c-1){var p=this.tableauPile[g][c-1];l.pos.y=p.showBack?p.pos.y+l.vBackPadding:p.pos.y+l.vPadding}}else l.pos.y=this.tableauFrameRect[g].y}else e+=1;e>=b?d=!0:c+=1}0<=this.waste.length-1&&(l=this.waste[this.waste.length-1],l.pos.x=this.cardWasteRect.x,l.pos.y=this.cardWasteRect.y,l.clickable=!0);b=this.foundationPile.length;c=0;for(d=!1;!d;){for(g=
e=0;g<b;g++)this.foundationPile[g].length>c?(l=this.foundationPile[g][c],l.isDragging||(l.clickable=!1,this.foundationPile[g].length<=c+1&&(l.clickable=!0),l.setVOrder(c),l.pos.x=this.foundationFrameRect[g].x,l.pos.y=this.foundationFrameRect[g].y)):e+=1;e>=b?d=!0:c+=1}ig.game.sortEntitiesDeferred()},revealTableau:function(b){b.showBack=!1;var c={};c.score=this.gamePoints;c.card=b;c.revealTableau=!0;this.moveHistory.push(c);this.gamePoints+=5;this.undoUsed=!1;this.checkWinCondition();if(this.gameStarted)try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.flipover)}catch(d){console.log(d)}},
revealWaste:function(b){0<=this.waste.length-1&&(b=this.waste[this.waste.length-1],b.clickable=!1);b=this.deck.pop();this.waste.push(b);b.isDeck=!1;b.isWaste=!0;b.clickable=!0;b.showBack=!1;b.setVOrder(this.waste.length-1);b.pos.x=this.cardWasteRect.x;b.pos.y=this.cardWasteRect.y;0<=this.deck.length-1&&(this.deck[this.deck.length-1].clickable=!0);var c={};c.score=this.gamePoints;c.card=b;c.revealWaste=!0;this.moveHistory.push(c);this.undoUsed=!1;if(this.gameStarted)try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.flipover)}catch(d){console.log(d)}},
returnWasteToDeck:function(){if(0!=this.waste.length){for(;0<this.waste.length;){var b=this.waste.pop();this.deck.push(b);b.isDeck=!0;b.showBack=!0;b.isWaste=!1;b.clickable=!1;b.setVOrder(this.deck.length-1);b.pos.x=this.cardDeckRect.x;b.pos.y=this.cardDeckRect.y}0<=this.deck.length-1&&(b=this.deck[this.deck.length-1],b.clickable=!0);var c={};c.score=this.gamePoints;c.card=b;c.returnWasteToDeck=!0;this.moveHistory.push(c);this.gamePoints-=100;0>this.gamePoints&&(this.gamePoints=0);this.undoUsed=!1;
if(this.gameStarted)try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.cycle)}catch(d){console.log(d)}}},dropCard:function(b){var c=b.isTableau,d=b.isWaste,e=b.isFoundation,g=b.vOrder,l=b.tableauCol;e&&(l=b.foundationCol);var p={};p.x=b.pos.x;p.y=b.pos.y;p.w=b.size.x;p.h=b.size.y;for(var y=!1,q=0;q<this.tableauPile.length;q++)if(!(b.isTableau&&q==b.tableauCol)&&!y){var s=this.tableauPile[q].length-1;if(!(0>s)&&(s=this.tableauPile[q][s],s!=b&&!s.showBack)){var t={};t.x=s.pos.x;t.y=s.pos.y;t.w=s.size.x;
t.h=s.size.y;if(this.aabbCheck(p,t)&&b.number==s.number-1&&b.suitColor!=s.suitColor){var y=!0,m=b.tableauCol,t=s.tableauCol;if(m!=t){var n=this.tableauPile[m].indexOf(b);if(0<=n)for(;this.tableauPile[m].length>n;){var r=this.tableauPile[m][n];this.tableauPile[t].push(r);this.tableauPile[m].splice(n,1);r.tableauCol=t;r.setVOrder(this.tableauPile[t].length-1)}}n=this.waste.indexOf(b);0<=n&&(this.waste.splice(n,1),this.tableauPile[t].push(b),b.tableauCol=t,b.isWaste=!1,b.isTableau=!0,b.setVOrder(s.vOrder+
1));for(m=0;m<this.foundationPile.length;m++)n=this.foundationPile[m].indexOf(b),0<=n&&(this.foundationPile[m].splice(n,1),this.tableauPile[t].push(b),b.tableauCol=t,b.isFoundation=!1,b.isTableau=!0,b.setVOrder(s.vOrder+1))}}}if(!y&&13==b.number)for(q=0;q<this.tableauPile.length;q++)if(!(b.isTableau&&q==b.tableauCol)&&!y&&0==this.tableauPile[q].length&&this.aabbCheck(p,this.tableauFrameRect[q])){y=!0;m=b.tableauCol;t=q;n=this.tableauPile[m].indexOf(b);if(0<=n)for(;this.tableauPile[m].length>n;)r=
this.tableauPile[m][n],this.tableauPile[t].push(r),this.tableauPile[m].splice(n,1),r.tableauCol=t,r.setVOrder(this.tableauPile[t].length-1);n=this.waste.indexOf(b);0<=n&&(this.waste.splice(n,1),this.tableauPile[t].push(b),b.tableauCol=t,b.isWaste=!1,b.isTableau=!0,b.setVOrder(0))}if(!y){q=!1;if(b.isWaste||b.isTableau)q=!0;b.isTableau&&b.vOrder!=this.tableauPile[b.tableauCol].length-1&&(q=!1);if(q)for(q=0;q<this.foundationPile.length&&!(m=this.foundationPile[q].length-1,!(0>m)&&(s=this.foundationPile[q][m],
s!=b&&(t={},t.x=s.pos.x,t.y=s.pos.y,t.w=s.size.x,t.h=s.size.y,this.aabbCheck(p,t)&&(b.number==s.number+1&&b.suitId==s.suitId)&&(y=!0,m=b.tableauCol,t=s.foundationCol,n=this.tableauPile[m].indexOf(b),0<=n&&(this.tableauPile[m].splice(n,1),this.foundationPile[t].push(b),b.foundationCol=t,b.isTableau=!1,b.isFoundation=!0,b.setVOrder(s.vOrder+1)),n=this.waste.indexOf(b),0<=n&&(this.waste.splice(n,1),this.foundationPile[t].push(b),b.foundationCol=t,b.isWaste=!1,b.isFoundation=!0,b.setVOrder(s.vOrder+1))),
y)));q++);}if(!y&&1==b.number){q=!1;if(b.isWaste||b.isTableau)q=!0;b.isTableau&&b.vOrder!=this.tableauPile[b.tableauCol].length-1&&(q=!1);if(q)for(q=0;q<this.foundationPile.length;q++)!y&&(0==this.foundationPile[q].length&&this.aabbCheck(p,this.foundationFrameRect[q]))&&(y=!0,m=b.tableauCol,t=q,b.isTableau&&(n=this.tableauPile[m].indexOf(b),0<=n&&(this.foundationPile[t].push(b),this.tableauPile[m].splice(n,1),b.foundationCol=t,b.isTableau=!1,b.isFoundation=!0,b.setVOrder(this.foundationPile[t].length-
1))),b.isWaste&&(n=this.waste.indexOf(b),0<=n&&(this.waste.splice(n,1),this.foundationPile[t].push(b),b.foundationCol=t,b.isWaste=!1,b.isFoundation=!0,b.setVOrder(this.foundationPile[t].length-1))))}y&&(p={},p.score=this.gamePoints,p.card=b,p.from={},p.from.isWaste=d,p.from.isTableau=c,p.from.isFoundation=e,p.from.vOrder=g,p.from.col=l,p.to={},p.to.isWaste=b.isWaste,p.to.isTableau=b.isTableau,p.to.isFoundation=b.isFoundation,p.to.vOrder=b.vOrder,p.to.col=b.tableauCol,b.isFoundation&&(p.to.col=b.foundationCol),
this.moveHistory.push(p),this.undoUsed=!1,p.from.isWaste&&p.to.isTableau?this.gamePoints+=5:p.from.isWaste&&p.to.isFoundation?this.gamePoints+=10:p.from.isTableau&&p.to.isFoundation?this.gamePoints+=10:p.from.isFoundation&&p.to.isTableau&&(this.gamePoints-=15,0>this.gamePoints&&(this.gamePoints=0)));if(y&&this.gameStarted)try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop2)}catch(B){console.log(B)}return y},foundationShortcut:function(b){for(var c=0;c<this.foundationPile.length&&!(b.pos.x=
this.foundationFrameRect[c].x,b.pos.y=this.foundationFrameRect[c].y-20,this.dropCard(b));c++);},startDragging:function(b){this.isDragging=!0;this.draggedCard=b;if(this.draggedCard.isTableau){for(var c=this.draggedCard.tableauCol,d=1,e=this.draggedCard.vOrder+1;e<this.tableauPile[c].length;e++)b=this.tableauPile[c][e],b.zIndex=2E3+d,d+=1;ig.game.sortEntitiesDeferred()}},stopDragging:function(b){if(this.isDragging&&this.draggedCard){if(this.draggedCard.isTableau){for(var c=this.draggedCard.tableauCol,
d=this.draggedCard.vOrder+1;d<this.tableauPile[c].length;d++)b=this.tableauPile[c][d],b.zIndex=b.baseZIndex+b.vOrder;ig.game.sortEntitiesDeferred()}this.isDragging=!1;this.draggedCard=null}},undoMove:function(){if(!this.undoUsed&&!this.gameWon&&!(0>=this.moveHistory.length)){this.undoUsed=!0;var b=this.moveHistory.pop();this.gamePoints=b.score;var c=b.card;if(b.returnWasteToDeck){for(;0<this.deck.length;)b=this.deck.pop(),this.waste.push(b),b.isDeck=!1,b.showBack=!1,b.isWaste=!0,b.clickable=!1,b.setVOrder(this.waste.length-
1),b.pos.x=this.cardWasteRect.x,b.pos.y=this.cardWasteRect.y;0<=this.waste.length-1&&(b=this.waste[this.waste.length-1],b.clickable=!0)}else if(b.revealWaste)c.showBack=!0,0<=this.deck.length-1&&(b=this.deck[this.deck.length-1],b.clickable=!1),c.isDeck=!0,c.isWaste=!1,c.clickable=!0,this.deck.push(c),this.waste.splice(c.vOrder,1),c.setVOrder(this.deck.length-1),c.pos.x=this.cardDeckRect.x,c.pos.y=this.cardDeckRect.y,0<=this.waste.length-1&&(b=this.waste[this.waste.length-1],b.clickable=!0);else if(b.revealTableau)c.showBack=
!0;else if(c.isWaste=b.from.isWaste,c.isTableau=b.from.isTableau,c.isFoundation=b.from.isFoundation,c.setVOrder(b.from.vOrder),c.isTableau?(c.tableauCol=b.from.col,this.tableauPile[c.tableauCol].push(c),c.setVOrder(this.tableauPile[c.tableauCol].length-1)):c.isFoundation?(c.foundationCol=b.from.col,this.foundationPile[c.foundationCol].push(c)):c.isWaste&&this.waste.push(c),b.to.isTableau){if(b.from.isTableau&&b.to.vOrder!=this.tableauPile[b.to.col].length-1)for(c=b.to.vOrder+1;this.tableauPile[b.to.col].length>
c;){var d=this.tableauPile[b.to.col][c];this.tableauPile[b.from.col].push(d);this.tableauPile[b.to.col].splice(c,1);d.tableauCol=b.from.col;d.setVOrder(this.tableauPile[b.from.col].length-1)}this.tableauPile[b.to.col].splice(b.to.vOrder,1)}else b.to.isFoundation&&this.foundationPile[b.to.col].splice(b.to.vOrder,1);this.refreshCardPositions();this.resetHintTime();if(this.gameStarted)try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop2)}catch(e){console.log(e)}}},checkWinCondition:function(){if(!this.gameWon){for(var b=
!0,c=0;c<this.tableauPile.length;c++)for(var d=0;d<this.tableauPile[c].length;d++)this.tableauPile[c][d].showBack&&(b=!1);b&&(this.gameWon=!0)}},findHintMove:function(){for(var b=[],c=[],d=0;d<this.tableauPile.length;d++){var e=this.tableauPile[d];0<e.length&&(e=e[e.length-1],e.showBack&&c.push(e))}for(var g=0;g<c.length;g++)e=[],e.push(c[g]),b.push(e);e=!1;c=[];for(d=0;d<this.tableauPile.length;d++)if(0<this.tableauPile[d].length){var l=this.tableauPile[d][this.tableauPile[d].length-1];l.showBack||
c.push(l)}else c.push(null),e=!0;if(e){for(d=0;d<this.tableauPile.length;d++)for(g=0;g<this.tableauPile[d].length;g++)if((l=this.tableauPile[d][g])&&13==l.number&&0<l.vOrder&&!l.showBack)e=[],e.push(l),b.push(e);0<this.waste.length&&(l=this.waste[this.waste.length-1],13==l.number&&(e=[],e.push(l),b.push(e)))}for(d=0;d<this.tableauPile.length;d++){for(var p=[],g=0;g<this.tableauPile[d].length;g++)l=this.tableauPile[d][g],l.showBack||p.push(l);if(0<p.length)for(var y=0;y<c.length;y++)if(y!=d&&c[y]){var l=
p[0],q=c[y];if(l.suitColor!=q.suitColor&&l.number==q.number-1){e=[];for(g=0;g<p.length;g++)l=p[g],e.push(l);e.push(q);b.push(e)}}}if(0<this.waste.length){l=this.waste[this.waste.length-1];for(y=0;y<c.length;y++)c[y]&&(q=c[y],l.suitColor!=q.suitColor&&l.number==q.number-1&&(e=[],e.push(l),e.push(q),b.push(e)))}for(y=0;y<c.length;y++)c[y]&&(q=c[y],1==q.number&&(e=[],e.push(q),b.push(e)));if(0<this.waste.length){g=this.waste[this.waste.length-1];1==g.number&&(e=[],e.push(g),b.push(e));for(d=0;d<this.foundationPile.length;d++)e=
this.foundationPile[d],0<e.length&&(l=e[e.length-1],g.suitId==l.suitId&&g.number==l.number+1&&(e=[],e.push(l),e.push(g),b.push(e)))}for(d=0;d<this.foundationPile.length;d++)if(e=this.foundationPile[d],0<e.length){l=e[e.length-1];for(y=0;y<c.length;y++)c[y]&&(q=c[y],q.suitId==l.suitId&&q.number==l.number+1&&(e=[],e.push(l),e.push(q),b.push(e)))}if(0<b.length)d=Math.floor(Math.random()*b.length),this.hintMove=b[d];else if(this.hintMove=null,0==b.length)if(0<this.deck.length){this.hintMove=[];for(g=
0;g<this.deck.length;g++)l=this.deck[g],this.hintMove.push(l)}else if(0<this.waste.length){this.hintMove=[];for(g=0;g<this.waste.length;g++)l=this.waste[g],this.hintMove.push(l)}},findBestMove:function(){this.bestMove=null;for(var b=[],c=0;c<this.tableauPile.length;c++){var d=this.tableauPile[c];0<d.length&&(d=d[d.length-1],d.showBack&&b.push(d))}for(var e=0;e<b.length;){this.bestMove={};this.bestMove.revealTableau=b[e];return}for(var e=!1,g=-1,b=[],c=0;c<this.tableauPile.length;c++)0<this.tableauPile[c].length?
(d=this.tableauPile[c][this.tableauPile[c].length-1],d.showBack||b.push(d)):(b.push(null),e=!0,-1==g&&(g=c));if(e){for(c=0;c<this.tableauPile.length;c++)for(e=0;e<this.tableauPile[c].length;e++)if((d=this.tableauPile[c][e])&&13==d.number&&0<d.vOrder&&!d.showBack){this.bestMove={};this.bestMove.from=d;this.bestMove.toTableau=g;return}if(0<this.waste.length&&(d=this.waste[this.waste.length-1],13==d.number)){this.bestMove={};this.bestMove.from=d;this.bestMove.toTableau=g;return}}for(c=0;c<this.tableauPile.length;c++)if(g=
[],!(1<this.tableauPile[c].length)||this.tableauPile[c][0].showBack){for(e=0;e<this.tableauPile[c].length;e++)d=this.tableauPile[c][e],d.showBack||g.push(d);if(0<g.length)for(e=0;e<b.length;e++)if(b[e]){var d=g[0],l=b[e];if(d.suitColor!=l.suitColor&&d.number==l.number-1){this.bestMove={};this.bestMove.from=d;this.bestMove.to=l;return}}}for(c=0;c<this.tableauPile.length;c++){g=[];for(e=0;e<this.tableauPile[c].length;e++)d=this.tableauPile[c][e],d.showBack||g.push(d);if(0<g.length)for(e=0;e<b.length;e++)if(b[e]&&
(d=g[0],l=b[e],d.suitColor!=l.suitColor&&d.number==l.number-1)){this.bestMove={};this.bestMove.from=d;this.bestMove.to=l;return}}if(0<this.waste.length){d=this.waste[this.waste.length-1];for(e=0;e<b.length;e++)if(b[e]&&(l=b[e],d.suitColor!=l.suitColor&&d.number==l.number-1)){this.bestMove={};this.bestMove.from=d;this.bestMove.to=l;return}}for(e=0;e<b.length;e++)if(b[e]&&(l=b[e],1==l.number)){this.bestMove={};this.bestMove.toFoundation=l;return}if(0<this.waste.length){e=this.waste[this.waste.length-
1];if(1==e.number){this.bestMove={};this.bestMove.toFoundation=e;return}for(c=0;c<this.foundationPile.length;c++)if(d=this.foundationPile[c],0<d.length&&(d=d[d.length-1],e.suitId==d.suitId&&e.number==d.number+1)){this.bestMove={};this.bestMove.toFoundation=e;return}}for(c=0;c<this.foundationPile.length;c++)if(d=this.foundationPile[c],0<d.length){d=d[d.length-1];for(e=0;e<b.length;e++)if(b[e]&&(l=b[e],l.suitId==d.suitId&&l.number==d.number+1)){this.bestMove={};this.bestMove.toFoundation=l;return}}0<
this.deck.length?(this.bestMove={},this.bestMove.revealWaste=!0):0<this.waste.length&&0<this.gamePoints&&(this.bestMove={},this.bestMove.revealDeck=!0)},doBestMove:function(){if(this.bestMove){if(this.bestMove.revealWaste)this.revealWaste();else if(this.bestMove.revealDeck)this.returnWasteToDeck();else if(this.bestMove.revealTableau)this.revealTableau(this.bestMove.revealTableau);else if(this.bestMove.toFoundation)this.foundationShortcut(this.bestMove.toFoundation);else if(null!=this.bestMove.toTableau&&
this.bestMove.from){var b=this.bestMove.from,c=this.bestMove.toTableau;b.pos.x=this.tableauFrameRect[c].x;b.pos.y=this.tableauFrameRect[c].y;this.dropCard(b)}else this.bestMove.to&&this.bestMove.from&&(b=this.bestMove.from,c=this.bestMove.to,b.pos.x=c.pos.x,b.pos.y=c.pos.y,this.dropCard(b));this.refreshCardPositions();this.resetHintTime()}},resetHintTime:function(){this.lastHintTime=ig.system.clock.delta();if(this.hintMove){for(var b=0;b<this.hintMove.length;b++)this.hintMove[b].show();this.hintMove=
null}},restartGame:function(){this.gameStopped=this.gameWon=!1;this.moveHistory=[];this.gamePoints=0;this.deck=this.clonedDeck;this.waste=[];this.foundationPile=[[],[],[],[]];this.tableauPile=this.clonedTableau;for(var b=0;b<this.deck.length;b++)d=this.deck[b],d.isDeck=!0,d.isWaste=!1,d.isFoundation=!1,d.isTableau=!1,d.pos.x=this.cardDeckRect.x,d.pos.y=this.cardDeckRect.y,d.setVOrder(b),d.showBack=!0,b+1>=this.deck.length&&(d.clickable=!0);for(var c=0;c<this.tableauPile.length;c++)for(b=0;b<this.tableauPile[c].length;b++){var d=
this.tableauPile[c][b];d.isDeck=!1;d.isWaste=!1;d.isFoundation=!1;d.isTableau=!0;d.pos.x=this.tableauFrameRect[c].x;d.pos.y=this.tableauFrameRect[c].y;d.setVOrder(b);d.tableauCol=c;d.showBack=!0;c==b&&(d.showBack=!1,d.clickable=!0)}this.clonedDeck=[];for(b=0;b<this.deck.length;b++)this.clonedDeck.push(this.deck[b]);this.clonedTableau=[];for(c=0;c<this.tableauPile.length;c++){this.clonedTableau.push([]);ct=this.clonedTableau[this.clonedTableau.length-1];for(b=0;b<this.tableauPile[c].length;b++)ct.push(this.tableauPile[c][b])}this.refreshCardPositions();
this.resetHintTime();this.gameStarted=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.cycle)}catch(e){console.log(e)}},showGameWon:function(){ig.onGameEnd(this.gamePoints,1);this.gamePoints>=ig.game.highScore&&(ig.game.highScore=this.gamePoints,ig.game.savePlayerStats());_SETTINGS.API.Enabled&&_SETTINGS.API.Log.Events.EndGame&&(console.log("Log events end game enabled"),this.API_LOG_EVENTS_END_GAME);if(_SETTINGS.MarketJSGameCenter.API.Enabled&&_SETTINGS.MarketJSGameCenter.API.Log.Events.EndGame){console.log("MarketJSGameCenter: Log events end game enabled");
this.MARKETJS_GAMECENTER_API_LOG_EVENTS_END_GAME;try{var b=this.gamePoints;console.log("score",b);MarketJSGameCenter.submitScore(b,GAME.key)}catch(c){console.log(c)}}if(this.ui&&!this.ui.drawGameWon){this.ui.drawGameWon=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.fanfare)}catch(d){console.log(d)}}}})});ig.baked=!0;
ig.module("game.entities.game-ui").requires("impact.entity").defines(function(){EntityGameUi=ig.Entity.extend({zIndex:300,newGameImage:new ig.Image("media/graphics/game/menu/newgame.png"),movesImage:new ig.Image("media/graphics/game/menu/moves.png"),settingsImage:new ig.Image("media/graphics/game/menu/settings.png"),undoImage:new ig.Image("media/graphics/game/menu/undo.png"),newGamePos:{x:50,y:416},settingsPos:{x:165,y:416},scorePos:{x:232,y:411},movesPos:{x:415,y:417},undoPos:{x:531,y:416},newGameRect:{x:20,
y:420,w:115,h:55},settingsRect:{x:137,y:420,w:115,h:55},undoRect:{x:513,y:420,w:115,h:55},menuBgImage:new ig.Image("media/graphics/game/menu/menubg.png"),menuBgImage2:new ig.Image("media/graphics/game/menu/menubg2.png"),sliderKnobImage:new ig.Image("media/graphics/game/menu/sliderknob.png"),tickImage:new ig.Image("media/graphics/game/menu/tick.png"),closeButtonRect:{x:436,y:125,w:30,h:27},playButtonRect:{x:231,y:175,w:175,h:25},restartButtonRect:{x:231,y:210,w:175,h:25},startNewButtonRect:{x:231,
y:245,w:175,h:25},instructionsButtonRect:{x:231,y:280,w:175,h:25},soundKnobRect:{x:287,y:186,w:142,h:36},musicKnobRect:{x:287,y:223,w:142,h:36},hintRect:{x:293,y:270,w:25,h:25},gameWonImage:new ig.Image("media/graphics/game/win.png"),gameWonNewGamePos:{x:267,y:230},gameWonNewGameRect:{x:255,y:200,w:130,h:70},instructionsBgImage:new ig.Image("media/graphics/game/mainmenu/instructions-bg.png"),instructionsCloseRect:{x:522,y:58,w:25,h:25},showInstructions:!1,pointer:null,control:null,drawMenu:!1,drawSettings:!1,
drawGameWon:!1,lockToSoundRect:!1,lockToMusicRect:!1,init:function(b,c,d){this.parent(b,c,d)},ready:function(){this.control=ig.game.getEntitiesByType(EntityGameControl)[0];this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},draw:function(){this.newGameImage.draw(this.newGamePos.x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.newGamePos.y+this.pos.y-this.offset.y-ig.game._rscreen.y);this.movesImage.draw(this.movesPos.x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.movesPos.y+this.pos.y-
this.offset.y-ig.game._rscreen.y);this.settingsImage.draw(this.settingsPos.x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.settingsPos.y+this.pos.y-this.offset.y-ig.game._rscreen.y);this.undoImage.draw(this.undoPos.x+this.pos.x-this.offset.x-ig.game._rscreen.x,this.undoPos.y+this.pos.y-this.offset.y-ig.game._rscreen.y);ig.system.context.fillStyle="#c7a46e";ig.system.context.font="30px Tw Cen MT, Helvetica, Verdana";var b="0";this.control&&(b=this.control.moveHistory.length);var c=ig.system.context.measureText(b).width,
d=ig.system.context.measureText("m").width,c=this.movesPos.x+(87-c)/2-15,d=this.movesPos.y+42.75+d/2-22;ig.system.context.fillText(b,c,d);ig.system.context.fillStyle="#fff";ig.system.context.font="15px Tw Cen MT, Helvetica, Verdana";b="0";this.control&&(b=this.control.gamePoints);c=ig.system.context.measureText(b).width;d=ig.system.context.measureText("m").width;c=this.scorePos.x+124.6-c/2-28;d=this.scorePos.y+13+d/2+6+16;ig.system.context.fillText(b,c,d);b=ig.game.highScore;c=ig.system.context.measureText(b).width;
d=ig.system.context.measureText("m").width;c=this.scorePos.x+124.6-c/2-28;d=this.scorePos.y+39+d/2+2+16;ig.system.context.fillText(b,c,d);this.drawGameWon&&(ig.system.context.globalAlpha=0.5,ig.system.context.fillStyle="#000000",ig.system.context.fillRect(0,0,ig.system.width,ig.system.height),ig.system.context.globalAlpha=1,this.gameWonImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y));this.drawMenu?(ig.system.context.globalAlpha=0.5,ig.system.context.fillStyle=
"#000000",ig.system.context.fillRect(0,0,ig.system.width,ig.system.height),ig.system.context.globalAlpha=1,this.menuBgImage2.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+150,this.pos.y-this.offset.y-ig.game._rscreen.y+100)):this.drawSettings&&(ig.system.context.globalAlpha=0.5,ig.system.context.fillStyle="#000000",ig.system.context.fillRect(0,0,ig.system.width,ig.system.height),ig.system.context.globalAlpha=1,this.menuBgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+150,this.pos.y-this.offset.y-
ig.game._rscreen.y+100),c=this.sliderKnobImage.width,b=(this.soundKnobRect.w-c)*ig.soundHandler.sfxVolume,this.sliderKnobImage.draw(this.soundKnobRect.x+b+this.pos.x-this.offset.x-ig.game._rscreen.x,this.soundKnobRect.y+this.pos.y-this.offset.y-ig.game._rscreen.y),b=(this.musicKnobRect.w-c)*ig.soundHandler.musicVolume,this.sliderKnobImage.draw(this.musicKnobRect.x+b+this.pos.x-this.offset.x-ig.game._rscreen.x,this.musicKnobRect.y+this.pos.y-this.offset.y-ig.game._rscreen.y),ig.game.hintsOn&&this.tickImage.draw(this.hintRect.x-
3+this.pos.x-this.offset.x-ig.game._rscreen.x,this.hintRect.y-3+this.pos.y-this.offset.y-ig.game._rscreen.y));this.showInstructions&&this.instructionsBgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+70,this.pos.y-this.offset.y-ig.game._rscreen.y+30)},aabbCheck:function(b,c){return b.x+b.w>c.x&&b.x<c.x+c.w&&b.y+b.h>c.y&&b.y<c.y+c.h?!0:!1},checkMainClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;
b.h=this.pointer.size.y;if(this.aabbCheck(b,this.newGameRect)){this.drawMenu=!0;this.control.gameStopped=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}}else if(this.aabbCheck(b,this.settingsRect)){this.drawSettings=!0;this.control.gameStopped=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(d){console.log(d)}}else if(this.aabbCheck(b,this.undoRect)){this.control.undoMove();try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(e){console.log(e)}}}},
checkGameWonClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.gameWonNewGameRect))ig.onGameStart(function(b){if(b){ig.game.director.loadLevel(2);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(d){console.log(d)}}})}},checkMenuClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;
b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.closeButtonRect)){this.drawMenu=!1;this.control.gameStopped=!1;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}}if(this.aabbCheck(b,this.playButtonRect)){this.drawMenu=!1;this.control.gameStopped=!1;this.control.resetHintTime();try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(d){console.log(d)}}else if(this.aabbCheck(b,this.restartButtonRect)){this.drawMenu=
!1;this.control.gameStopped=!1;this.control.restartGame();try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(e){console.log(e)}}else if(this.aabbCheck(b,this.startNewButtonRect)){ig.game.director.loadLevel(2);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(g){console.log(g)}}else if(this.aabbCheck(b,this.instructionsButtonRect)){this.drawMenu=!1;this.showInstructions=!0;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(l){console.log(l)}}}},checkSettingsClicks:function(){if(!this.lockToSoundRect&&
!this.lockToMusicRect&&this.pointer.firstClick&&!this.pointer.isReleased){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;this.aabbCheck(b,this.soundKnobRect)?this.lockToSoundRect=!0:this.aabbCheck(b,this.musicKnobRect)&&(this.lockToMusicRect=!0)}else if(this.pointer.isReleased)if(this.lockToMusicRect=this.lockToSoundRect=!1,this.pointer.refreshPos(),b={},b.x=this.pointer.pos.x,b.y=this.pointer.pos.y,b.w=this.pointer.size.x,
b.h=this.pointer.size.y,this.aabbCheck(b,this.soundKnobRect))try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}else if(this.aabbCheck(b,this.musicKnobRect))try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(d){console.log(d)}if(this.lockToSoundRect){var b=this.sliderKnobImage.width/2,e=this.pointer.pos.x+this.pointer.size.x/2-this.soundKnobRect.x;e<b&&(e=b);e>this.soundKnobRect.w-b&&(e=this.soundKnobRect.w-b);e=(e-b)/(this.soundKnobRect.w-b-b);ig.soundHandler.setSfxVolume(e);
ig.game.savePlayerStats()}else this.lockToMusicRect&&(b=this.sliderKnobImage.width/2,e=this.pointer.pos.x+this.pointer.size.x/2-this.soundKnobRect.x,e<b&&(e=b),e>this.soundKnobRect.w-b&&(e=this.soundKnobRect.w-b),e=(e-b)/(this.soundKnobRect.w-b-b),ig.soundHandler.setMusicVolume(e),ig.game.savePlayerStats());if(ig.input.pressed("click")){this.pointer.refreshPos();b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.closeButtonRect)){this.drawSettings=
!1;this.control.gameStopped=!1;this.control.resetHintTime();try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(g){console.log(g)}}if(this.aabbCheck(b,this.hintRect)){ig.game.hintsOn=!ig.game.hintsOn;ig.game.savePlayerStats();this.control.resetHintTime();try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(l){console.log(l)}}}},checkInstructionClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var b={};b.x=this.pointer.pos.x;b.y=this.pointer.pos.y;
b.w=this.pointer.size.x;b.h=this.pointer.size.y;if(this.aabbCheck(b,this.instructionsCloseRect)){this.showInstructions=!1;try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.drop1)}catch(c){console.log(c)}}}},update:function(){this.drawSettings?this.checkSettingsClicks():this.drawMenu?this.checkMenuClicks():this.showInstructions?this.checkInstructionClicks():(this.checkMainClicks(),this.control&&this.control.gameWon&&this.checkGameWonClicks())}})});ig.baked=!0;
ig.module("game.levels.game").requires("impact.image","game.entities.game-control","game.entities.game-ui","game.entities.pointer-selector").defines(function(){LevelGame={entities:[{type:"EntityGameControl",x:0,y:0},{type:"EntityGameUi",x:0,y:0},{type:"EntityPointerSelector",x:-20,y:-20}],layer:[]}});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.jukebox","plugins.director","plugins.impact-storage","plugins.branding.splash","plugins.glyphstudio-api","game.entities.branding-logo-placeholder","game.entities.branding-logo","game.entities.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.levels.opening","game.levels.home",
"game.levels.game").defines(function(){this.START_OBFUSCATION;this.FRAMEBREAKER;MyGame=ig.Game.extend({hintsOn:!0,highScore:0,init:function(){this.setupControls();this.setupLocalStorage();this.removeLoadingWheel();this.injectMobileLink();this.setupURLParameters();this.finalize()},finalize:function(){ig.ua.mobile?ig.game.showOverlay(["play"]):ig.game.startGame();sizeHandler()},injectMobileLink:function(){$("#play").attr("onclick","ig.game.pressPlay();ig.soundHandler.staticSound.play();")},removeLoadingWheel:function(){try{$("#ajaxbar").css("background",
"none")}catch(b){console.log(b)}},showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},setupLocalStorage:function(){this.storage=new ig.Storage;this.getPlayerStats()},savePlayerStats:function(){null!=this.storage&&(this.storage.set("musicVolume",ig.soundHandler.musicVolume),this.storage.set("sfxVolume",ig.soundHandler.sfxVolume),this.storage.set("hintsOn",this.hintsOn),this.storage.set("highScore",this.highScore))},getPlayerStats:function(){if(null!=
this.storage){var b=this.storage.get("musicVolume");null!=b&&ig.soundHandler.setMusicVolume(b);b=this.storage.get("sfxVolume");null!=b&&ig.soundHandler.setSfxVolume(b);b=this.storage.get("hintsOn");null!=b&&(this.hintsOn=b);b=this.storage.get("highScore");null!=b&&(this.highScore=b)}},startGame:function(){this.director=new ig.Director(this,[LevelOpening,LevelHome,LevelGame]);this.director=new ig.Director(this,[LevelOpening,LevelHome,LevelGame]);if(_SETTINGS.Branding.Splash.Enabled)try{this.branding=
new ig.BrandingSplash}catch(b){console.log(b),console.log("Loading original levels ..."),this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel);ig.soundHandler.playBackgroundMusic()},fpsCount:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()?null!=this.fpsCounter?this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset())},endGame:function(){console.log("End game");
ig.soundHandler.stopBackgroundMusic();ig.ua.mobile&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()},setupControls:function(){ig.input.unbindAll();ig.input.initMouse();ig.input.bind(ig.KEY.MOUSE1,"click")},setupURLParameters:function(){this.setupURLParameters=new ig.UrlParameters},pressPlay:function(){this.hideOverlay(["play"]);this.startGame();ig.ua.mobile&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize();ig.ua.mobile&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},
pauseGame:function(){ig.system.stopRunLoop.call(ig.system);console.log("Game Paused")},resumeGame:function(){ig.system.startRunLoop.call(ig.system);console.log("Game Resumed")},showOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i]).show(),document.getElementById(b[i]).style.visibility="visible"},hideOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i]).hide(),document.getElementById(b[i]).style.visibility="hidden"},update:function(){if(this.paused)for(var b=0;b<this.entities.length;b++)this.entities[b].ignorePause&&
this.entities[b].update();else this.parent(),ig.soundHandler&&ig.soundHandler.forceLoopBGM()},draw:function(){this.parent()},drawDebug:function(){if(!ig.global.wm&&(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=0.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px Arial",ig.system.context.fillStyle=
"#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(b){this.debug?(50>this.debug.length||this.debug.splice(0,1),this.debug.push(b),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(b));console.log(b)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&
0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=this.viewDebug?!1:!0)}});var b=getQueryVariable("device");if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...");if(b=getQueryVariable("force-rotate"))switch(b){case "portrait":console.log("force rotate to portrait");
window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,mobileWidth,mobileHeight,1,ig.SplashLoader)):ig.main("#canvas",MyGame,60,desktopWidth,desktopHeight,1,ig.SplashLoader);ig.ua.mobile&&orientationHandler();sizeHandler();fixSamsungHandler();this.END_OBFUSCATION});
